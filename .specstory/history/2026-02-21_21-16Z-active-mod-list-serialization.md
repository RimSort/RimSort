<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session 9ec0a7d6-88db-4f9d-af55-d0f366918794 (2026-02-21 21:16Z) -->

# Active mod list serialization (2026-02-21 21:16Z)

_**User**_

In the RimSort codebase at d:\DEV_Rimsort\RimSort, find how the active mod list is saved/serialized. I need to understand:

1. How `ModsConfig.xml` is written/exported - search in `app/utils/metadata.py` for functions like `save_mod_list`, `export`, `write_mods_config`, `set_mods_config`
2. How the list of active mod UUIDs is extracted from the widget for saving
3. How the list is loaded back (the `get_mods_from_list` function)
4. Any other import/export formats (e.g., mod list sharing)

Return the relevant code sections with line numbers and file paths.

---

_**Agent (model composer-1, mode Agent)**_



---



---


Searching for mod list save/serialize logic. Starting with the key files and functions.


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\app\utils\metadata.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "get_mods_from_list",
  "caseInsensitive": false
}
```
Additional data:

```json
{
  "isPruned": true,
  "pattern": "get_mods_from_list",
  "outputMode": "content",
  "totalFiles": 4,
  "totalMatches": 24,
  "topFiles": [
    {
      "uri": ".specstory\\history\\2026-02-21_21-16Z-rimsort-codebase-exploration.md",
      "matchCount": 13
    },
    {
      "uri": "app/views/main_content_panel.py",
      "matchCount": 6
    },
    {
      "uri": "app/utils/metadata.py",
      "matchCount": 1
    },
    {
      "uri": "app/controllers/file_search_controller.py",
      "matchCount": 4
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "save_mod_list|export.*mod|write_mods_config|set_mods_config",
  "caseInsensitive": true
}
```
Additional data:

```json
{
  "isPruned": true,
  "pattern": "save_mod_list|export.*mod|write_mods_config|set_mods_config",
  "outputMode": "content",
  "totalFiles": 25,
  "totalMatches": 150,
  "topFiles": [
    {
      "uri": "docs/index.md",
      "matchCount": 1
    },
    {
      "uri": "app/utils/csv_export_utils.py",
      "matchCount": 4
    },
    {
      "uri": "app/controllers/troubleshooting_controller.py",
      "matchCount": 4
    },
    {
      "uri": "locales/de_DE.ts",
      "matchCount": 10
    },
    {
      "uri": "locales/ja_JP.ts",
      "matchCount": 8
    },
    {
      "uri": "app/utils/event_bus.py",
      "matchCount": 3
    },
    {
      "uri": "locales/tr_TR.ts",
      "matchCount": 8
    },
    {
      "uri": "app/utils/zip_extractor.py",
      "matchCount": 1
    },
    {
      "uri": "tests/controllers/test_troubleshooting.py",
      "matchCount": 2
    },
    {
      "uri": "app/views/status_panel.py",
      "matchCount": 1
    },
    {
      "uri": "app/models/metadata/metadata_factory.py",
      "matchCount": 1
    },
    {
      "uri": "locales/fr_FR.ts",
      "matchCount": 13
    },
    {
      "uri": "locales/es_ES.ts",
      "matchCount": 13
    },
    {
      "uri": "locales/en_US.ts",
      "matchCount": 8
    },
    {
      "uri": "locales/zh_TW.ts",
      "matchCount": 8
    },
    {
      "uri": "app/controllers/menu_bar_controller.py",
      "matchCount": 4
    },
    {
      "uri": "docs/user-guide/basic-usage.md",
      "matchCount": 1
    },
    {
      "uri": "app/views/troubleshooting_dialog.py",
      "matchCount": 3
    },
    {
      "uri": "locales/zh_CN.ts",
      "matchCount": 8
    },
    {
      "uri": "locales/pt_BR.ts",
      "matchCount": 16
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "ModsConfig\\.xml",
  "caseInsensitive": true
}
```
Additional data:

```json
{
  "isPruned": true,
  "pattern": "ModsConfig\\.xml",
  "outputMode": "content",
  "totalFiles": 21,
  "totalMatches": 211,
  "topFiles": [
    {
      "uri": "app/utils/metadata.py",
      "matchCount": 2
    },
    {
      "uri": "locales/en_US.ts",
      "matchCount": 8
    },
    {
      "uri": "app/controllers/file_search_controller.py",
      "matchCount": 2
    },
    {
      "uri": ".specstory\\history\\2026-02-21_21-16Z-rimsort-codebase-exploration.md",
      "matchCount": 12
    },
    {
      "uri": "locales/zh_CN.ts",
      "matchCount": 16
    },
    {
      "uri": "app/controllers/settings_controller.py",
      "matchCount": 2
    },
    {
      "uri": "locales/fr_FR.ts",
      "matchCount": 16
    },
    {
      "uri": "locales/es_ES.ts",
      "matchCount": 16
    },
    {
      "uri": "locales/ru_RU.ts",
      "matchCount": 16
    },
    {
      "uri": "locales/pt_BR.ts",
      "matchCount": 16
    },
    {
      "uri": "app/views/status_panel.py",
      "matchCount": 2
    },
    {
      "uri": "app/views/troubleshooting_dialog.py",
      "matchCount": 5
    },
    {
      "uri": "locales/ja_JP.ts",
      "matchCount": 16
    },
    {
      "uri": "app/utils/exception.py",
      "matchCount": 1
    },
    {
      "uri": "app/views/main_content_panel.py",
      "matchCount": 6
    },
    {
      "uri": "locales/zh_TW.ts",
      "matchCount": 16
    },
    {
      "uri": "app/utils/schema.py",
      "matchCount": 2
    },
    {
      "uri": "locales/de_DE.ts",
      "matchCount": 16
    },
    {
      "uri": "locales/tr_TR.ts",
      "matchCount": 16
    },
    {
      "uri": "tests/controllers/test_troubleshooting.py",
      "matchCount": 10
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Reading the relevant sections to understand the save/serialize flow:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\app\utils\metadata.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\app\models\metadata\metadata_factory.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\app\views\main_content_panel.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\app\views\main_content_panel.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "get_active_mods|get.*uuid|extract.*uuid|widget.*uuid",
  "path": "app/views/main_content_panel.py",
  "caseInsensitive": true
}
```
Additional data:

```json
{
  "isPruned": true,
  "pattern": "get_active_mods|get.*uuid|extract.*uuid|widget.*uuid",
  "path": "app/views/main_content_panel.py",
  "outputMode": "content",
  "totalFiles": 1,
  "totalMatches": 4,
  "topFiles": [
    {
      "uri": "app/views/main_content_panel.py",
      "matchCount": 4
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Searching for additional export formats and helper functions:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\app\views\main_content_panel.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\app\views\main_content_panel.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "generate_rimworld_mods_list",
  "caseInsensitive": false
}
```
Additional data:

```json
{
  "isPruned": true,
  "pattern": "generate_rimworld_mods_list",
  "outputMode": "content",
  "totalFiles": 4,
  "totalMatches": 11,
  "topFiles": [
    {
      "uri": "app/views/main_content_panel.py",
      "matchCount": 3
    },
    {
      "uri": "app/utils/metadata.py",
      "matchCount": 2
    },
    {
      "uri": "app/utils/schema.py",
      "matchCount": 1
    },
    {
      "uri": ".specstory\\history\\2026-02-21_21-16Z-rimsort-codebase-exploration.md",
      "matchCount": 5
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "json_to_xml_write",
  "caseInsensitive": false
}
```
Additional data:

```json
{
  "isPruned": true,
  "pattern": "json_to_xml_write",
  "outputMode": "content",
  "totalFiles": 5,
  "totalMatches": 11,
  "topFiles": [
    {
      "uri": "app/utils/metadata.py",
      "matchCount": 2
    },
    {
      "uri": "app/models/metadata/metadata_factory.py",
      "matchCount": 2
    },
    {
      "uri": ".specstory\\history\\2026-02-21_21-16Z-rimsort-codebase-exploration.md",
      "matchCount": 2
    },
    {
      "uri": "app/views/main_content_panel.py",
      "matchCount": 4
    },
    {
      "uri": "app/utils/xml.py",
      "matchCount": 1
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How does the active_mods_list widget store and provide UUIDs?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\utils\\metadata.py",
        "range": {
          "startPosition": {
            "line": 2237,
            "column": 17
          },
          "endPosition": {
            "line": 2379
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "def get_mods_from_list(",
            "lineNumber": 2241,
            "isSignature": true
          },
          {
            "text": "    mod_list: Union[str, list[str]],",
            "lineNumber": 2242,
            "isSignature": true
          },
          {
            "text": ") -&gt; tuple[list[str], list[str], dict[str, Any], list[str]]:",
            "lineNumber": 2243,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 2244
          },
          {
            "text": "    Given a RimWorld mods list containing a complete list of mods,",
            "lineNumber": 2245
          },
          {
            "text": "    including base game and DLC, as well as their dependencies in order,",
            "lineNumber": 2246
          },
          {
            "text": "    return a list of mods for the active list widget and a list of",
            "lineNumber": 2247
          },
          {
            "text": "    mods for the inactive list widget.",
            "lineNumber": 2248
          },
          {
            "lineNumber": 2249
          },
          {
            "text": "    :param mod_list:",
            "lineNumber": 2250
          },
          {
            "text": "        A path to an .rws/.xml style list, or a list of package ids",
            "lineNumber": 2251
          },
          {
            "text": "        OR a list of mod uuids",
            "lineNumber": 2252
          },
          {
            "text": "    :return: a tuple which contains the active mods dict, inactive mods dict,",
            "lineNumber": 2253
          },
          {
            "text": "    duplicate mods dict, and missing mods list",
            "lineNumber": 2254
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 2255
          },
          {
            "text": "    all_mods = MetadataManager.instance().internal_local_metadata",
            "lineNumber": 2256
          },
          {
            "lineNumber": 2257
          },
          {
            "text": "    active_mods_uuids: list[str] = []",
            "lineNumber": 2258
          },
          {
            "text": "    inactive_mods_uuids: list[str] = []",
            "lineNumber": 2259
          },
          {
            "text": "    duplicate_mods: dict[str, Any] = {}",
            "lineNumber": 2260
          },
          {
            "text": "    duplicates_processed = []",
            "lineNumber": 2261
          },
          {
            "text": "    missing_mods: list[str] = []",
            "lineNumber": 2262
          },
          {
            "text": "    populated_mods = []",
            "lineNumber": 2263
          },
          {
            "text": "    to_populate = []",
            "lineNumber": 2264
          },
          {
            "text": "    logger.debug(\"Started generating active and inactive mods\")",
            "lineNumber": 2265
          },
          {
            "text": "    # Calculate duplicate mods (SCHEMA: {str packageid: list[str duplicate uuids]})",
            "lineNumber": 2266
          },
          {
            "text": "    for mod_uuid, mod_data in all_mods.items():",
            "lineNumber": 2267
          },
          {
            "text": "        # Using setdefault() to initialize the dictionary and then assigning the value",
            "lineNumber": 2268
          },
          {
            "text": "        duplicate_mods.setdefault(mod_data[\"packageid\"], []).append(mod_uuid)",
            "lineNumber": 2269
          },
          {
            "text": "    # Filter out non-duplicate mods",
            "lineNumber": 2270
          },
          {
            "text": "    duplicate_mods = {k: v for k, v in duplicate_mods.items() if len(v) &gt; 1}",
            "lineNumber": 2271
          },
          {
            "text": "    # Calculate mod lists",
            "lineNumber": 2272
          },
          {
            "text": "    if isinstance(mod_list, str):",
            "lineNumber": 2273
          }
        ]
      },
      "score": 0.5016679763793945
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\main_content_panel.py",
        "range": {
          "startPosition": {
            "line": 94
          },
          "endPosition": {
            "line": 3647
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 95,
                "column": 1
              },
              "endPosition": {
                "line": 96,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainContent(QObject):",
            "lineNumber": 95,
            "isSignature": true
          },
          {
            "text": "def _open_in_default_editor(self, path: Path | None) -&gt; None:",
            "lineNumber": 1830
          },
          {
            "lineNumber": 1843
          },
          {
            "text": "                ),",
            "lineNumber": 1844
          },
          {
            "text": "            )",
            "lineNumber": 1845
          },
          {
            "lineNumber": 1846
          },
          {
            "text": "    def _do_save(self) -&gt; None:",
            "lineNumber": 1847
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 1848
          },
          {
            "text": "        Method to save the current list of active mods to the selected ModsConfig.xml",
            "lineNumber": 1849
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 1850
          },
          {
            "text": "        logger.info(\"Saving current active mods to ModsConfig.xml\")",
            "lineNumber": 1851
          },
          {
            "text": "        active_mods = []",
            "lineNumber": 1852
          },
          {
            "text": "        for uuid in self.mods_panel.active_mods_list.uuids:",
            "lineNumber": 1853
          },
          {
            "text": "            package_id = self.metadata_manager.internal_local_metadata[uuid][",
            "lineNumber": 1854
          },
          {
            "text": "                \"packageid\"",
            "lineNumber": 1855
          },
          {
            "text": "            ]",
            "lineNumber": 1856
          },
          {
            "text": "            if package_id in active_mods:  # This should NOT be happening",
            "lineNumber": 1857
          },
          {
            "text": "                logger.critical(",
            "lineNumber": 1858
          },
          {
            "text": "                    f\"Tried to export more than 1 identical package ids to the same mod list. Skipping duplicate {package_id}\"",
            "lineNumber": 1859
          },
          {
            "text": "                )",
            "lineNumber": 1860
          },
          {
            "text": "                continue",
            "lineNumber": 1861
          },
          {
            "text": "            else:  # Otherwise, proceed with adding the mod package_id",
            "lineNumber": 1862
          },
          {
            "text": "                if (",
            "lineNumber": 1863
          },
          {
            "text": "                    package_id in self.duplicate_mods.keys()",
            "lineNumber": 1864
          },
          {
            "text": "                ):  # Check if mod has duplicates",
            "lineNumber": 1865
          },
          {
            "text": "                    if (",
            "lineNumber": 1866
          },
          {
            "text": "                        self.metadata_manager.internal_local_metadata[uuid][",
            "lineNumber": 1867
          },
          {
            "text": "                            \"data_source\"",
            "lineNumber": 1868
          },
          {
            "text": "                        ]",
            "lineNumber": 1869
          },
          {
            "text": "                        == \"workshop\"",
            "lineNumber": 1870
          },
          {
            "text": "                    ):",
            "lineNumber": 1871
          },
          {
            "text": "                        active_mods.append(package_id + \"_steam\")",
            "lineNumber": 1872
          },
          {
            "text": "                        continue  # Append &#96;_steam&#96; suffix if Steam mod, continue to next mod",
            "lineNumber": 1873
          },
          {
            "text": "                active_mods.append(package_id)",
            "lineNumber": 1874
          },
          {
            "text": "        active_mods_uuids, inactive_mods_uuids, _, _ = metadata.get_mods_from_list(",
            "lineNumber": 1875
          },
          {
            "text": "            mod_list=active_mods",
            "lineNumber": 1876
          },
          {
            "text": "        )",
            "lineNumber": 1877
          },
          {
            "text": "        self.active_mods_uuids_last_save = active_mods_uuids",
            "lineNumber": 1878
          },
          {
            "text": "        logger.info(f\"Collected {len(active_mods)} active mods for saving\")",
            "lineNumber": 1879
          },
          {
            "lineNumber": 1880
          },
          {
            "text": "        mods_config_data = generate_rimworld_mods_list(",
            "lineNumber": 1881
          },
          {
            "text": "            self.metadata_manager.game_version, active_mods",
            "lineNumber": 1882
          },
          {
            "text": "        )",
            "lineNumber": 1883
          },
          {
            "text": "        mods_config_path = str(",
            "lineNumber": 1884
          },
          {
            "text": "            Path",
            "lineNumber": 1885
          }
        ]
      },
      "score": 0.4445817470550537
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\controllers\\main_window_controller.py",
        "range": {
          "startPosition": {
            "line": 13
          },
          "endPosition": {
            "line": 414
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 14,
                "column": 1
              },
              "endPosition": {
                "line": 15,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 98,
                "column": 5
              },
              "endPosition": {
                "line": 100,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainWindowController(QObject):",
            "lineNumber": 14,
            "isSignature": true
          },
          {
            "text": "def check_dependencies(self) -&gt; None:",
            "lineNumber": 98
          },
          {
            "text": "        # Get the active mods list",
            "lineNumber": 99
          },
          {
            "lineNumber": 307
          },
          {
            "lineNumber": 308
          },
          {
            "text": "                # First add any local mods to the active list",
            "lineNumber": 309
          },
          {
            "text": "                if local_mods:",
            "lineNumber": 310
          },
          {
            "text": "                    for mod_id in local_mods:",
            "lineNumber": 311
          },
          {
            "text": "                        # Find the UUID for this package ID",
            "lineNumber": 312
          },
          {
            "text": "                        for (",
            "lineNumber": 313
          },
          {
            "text": "                            uuid,",
            "lineNumber": 314
          },
          {
            "text": "                            mod_data,",
            "lineNumber": 315
          },
          {
            "text": "                        ) in self.metadata_manager.internal_local_metadata.items():",
            "lineNumber": 316
          },
          {
            "text": "                            if mod_data.get(\"packageid\") == mod_id:",
            "lineNumber": 317
          },
          {
            "text": "                                active_mods.add(uuid)",
            "lineNumber": 318
          },
          {
            "text": "                                break",
            "lineNumber": 319
          },
          {
            "lineNumber": 320
          },
          {
            "text": "                    # Update the active mods list with local mods",
            "lineNumber": 321
          },
          {
            "text": "                    self.main_window.main_content_panel.mods_panel.active_mods_list.uuids = list(",
            "lineNumber": 322
          },
          {
            "text": "                        active_mods",
            "lineNumber": 323
          },
          {
            "text": "                    )",
            "lineNumber": 324
          },
          {
            "text": "                    # Trigger list updated signal to refresh UI",
            "lineNumber": 325
          },
          {
            "text": "                    self.main_window.main_content_panel.mods_panel.list_updated_signal.emit()",
            "lineNumber": 326
          },
          {
            "lineNumber": 327
          },
          {
            "text": "                # If there are mods to download, check SteamCMD setup first",
            "lineNumber": 328
          }
        ]
      },
      "score": 0.44321930408477783
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\controllers\\file_search_controller.py",
        "range": {
          "startPosition": {
            "line": 598
          },
          "endPosition": {
            "line": 1156
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 599,
                "column": 1
              },
              "endPosition": {
                "line": 600,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class FileSearchController(QObject):",
            "lineNumber": 599,
            "isSignature": true
          },
          {
            "text": "def _get_mod_paths_from_uuids(self, uuids: list[str]) -&gt; list[str]:",
            "lineNumber": 909
          },
          {
            "lineNumber": 930
          },
          {
            "text": "        return mod_paths",
            "lineNumber": 931
          },
          {
            "lineNumber": 932
          },
          {
            "text": "    def get_specific_mod_paths(self, mod_ids: set[str]) -&gt; list[str]:",
            "lineNumber": 933
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 934
          },
          {
            "text": "        Get direct paths to specific mods based on their IDs.",
            "lineNumber": 935
          },
          {
            "lineNumber": 936
          },
          {
            "text": "        Args:",
            "lineNumber": 937
          },
          {
            "text": "            mod_ids (set[str]): Set of mod IDs.",
            "lineNumber": 938
          },
          {
            "lineNumber": 939
          },
          {
            "text": "        Returns:",
            "lineNumber": 940
          },
          {
            "text": "            List[str]: List of mod folder paths for the specified mod IDs.",
            "lineNumber": 941
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 942
          },
          {
            "text": "        if not mod_ids:",
            "lineNumber": 943
          },
          {
            "text": "            return []",
            "lineNumber": 944
          },
          {
            "lineNumber": 945
          },
          {
            "text": "        instance = self.settings.instances[self.settings.current_instance]",
            "lineNumber": 946
          },
          {
            "text": "        specific_paths = []",
            "lineNumber": 947
          },
          {
            "lineNumber": 948
          },
          {
            "text": "        # Check local folder",
            "lineNumber": 949
          },
          {
            "text": "        if instance.local_folder and instance.local_folder != \"\":",
            "lineNumber": 950
          },
          {
            "text": "            local_folder = os.path.abspath(instance.local_folder)",
            "lineNumber": 951
          },
          {
            "text": "            for mod_id in mod_ids:",
            "lineNumber": 952
          },
          {
            "text": "                mod_path = os.path.join(local_folder, mod_id)",
            "lineNumber": 953
          },
          {
            "text": "                if os.path.isdir(mod_path):",
            "lineNumber": 954
          },
          {
            "text": "                    specific_paths.append(mod_path)",
            "lineNumber": 955
          },
          {
            "lineNumber": 956
          },
          {
            "text": "        # Check workshop folder",
            "lineNumber": 957
          },
          {
            "text": "        if instance.workshop_folder and instance.workshop_folder != \"\":",
            "lineNumber": 958
          },
          {
            "text": "            workshop_folder = os.path.abspath(instance.workshop_folder)",
            "lineNumber": 959
          },
          {
            "text": "            for mod_id in mod_ids:",
            "lineNumber": 960
          },
          {
            "text": "                mod_path = os.path.join(workshop_folder, mod_id)",
            "lineNumber": 961
          },
          {
            "text": "                if os.path.isdir(mod_path):",
            "lineNumber": 962
          },
          {
            "text": "                    specific_paths.append(mod_path)",
            "lineNumber": 963
          },
          {
            "lineNumber": 964
          },
          {
            "text": "        return specific_paths",
            "lineNumber": 965
          },
          {
            "lineNumber": 966
          },
          {
            "text": "    def get_active_mods_paths(self) -&gt; list[str]:",
            "lineNumber": 967
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 968
          },
          {
            "text": "        Get direct paths to active mod folders only.",
            "lineNumber": 969
          },
          {
            "lineNumber": 970
          },
          {
            "text": "        Returns:",
            "lineNumber": 971
          },
          {
            "text": "            List[str]: List of active mod folder paths.",
            "lineNumber": 972
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 973
          },
          {
            "text": "        # Use metadata.get_mods_from_list to get active mod UUIDs",
            "lineNumber": 974
          },
          {
            "text": "        instance = self.settings.instances[self.settings.current_instance]",
            "lineNumber": 975
          },
          {
            "text": "        mod_list_path = os.path.join(instance.config_folder, \"ModsConfig.xml\")",
            "lineNumber": 976
          },
          {
            "text": "        active_uuids, _, _, _ = metadata.get_mods_from_list(mod_list_path)",
            "lineNumber": 977
          },
          {
            "text": "        logger.info(f\"Getting paths for {len(active_uuids)} active mods from mod list\")",
            "lineNumber": 978
          },
          {
            "text": "        return get_mod_paths_from_uuids(active_uuids)",
            "lineNumber": 979
          },
          {
            "lineNumber": 980
          },
          {
            "text": "    def get_inactive_mods_paths(self) -&gt; list[str]:",
            "lineNumber": 981
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 982
          }
        ]
      },
      "score": 0.42296281456947327
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\main_content_panel.py",
        "range": {
          "startPosition": {
            "line": 94
          },
          "endPosition": {
            "line": 3647
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 95,
                "column": 1
              },
              "endPosition": {
                "line": 96,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainContent(QObject):",
            "lineNumber": 95,
            "isSignature": true
          },
          {
            "lineNumber": 718
          },
          {
            "lineNumber": 719
          },
          {
            "text": "    def __repopulate_lists(self, is_initial: bool = False) -&gt; None:",
            "lineNumber": 720
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 721
          },
          {
            "text": "        Get active and inactive mod lists based on the config path",
            "lineNumber": 722
          },
          {
            "text": "        and write them to the list widgets. is_initial indicates if",
            "lineNumber": 723
          },
          {
            "text": "        this function is running at app initialization. If is_initial is",
            "lineNumber": 724
          },
          {
            "text": "        true, then write the active_mods_data and inactive_mods_data to",
            "lineNumber": 725
          },
          {
            "text": "        restore variables.",
            "lineNumber": 726
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 727
          },
          {
            "text": "        logger.info(\"Repopulating mod lists\")",
            "lineNumber": 728
          },
          {
            "text": "        (",
            "lineNumber": 729
          },
          {
            "text": "            active_mods_uuids,",
            "lineNumber": 730
          },
          {
            "text": "            inactive_mods_uuids,",
            "lineNumber": 731
          },
          {
            "text": "            self.duplicate_mods,",
            "lineNumber": 732
          },
          {
            "text": "            self.missing_mods,",
            "lineNumber": 733
          },
          {
            "text": "        ) = metadata.get_mods_from_list(",
            "lineNumber": 734
          },
          {
            "text": "            mod_list=str(",
            "lineNumber": 735
          },
          {
            "text": "                (",
            "lineNumber": 736
          },
          {
            "text": "                    Path(",
            "lineNumber": 737
          },
          {
            "text": "                        self.settings_controller.settings.instances[",
            "lineNumber": 738
          },
          {
            "text": "                            self.settings_controller.settings.current_instance",
            "lineNumber": 739
          },
          {
            "text": "                        ].config_folder",
            "lineNumber": 740
          },
          {
            "text": "                    )",
            "lineNumber": 741
          },
          {
            "text": "                    / \"ModsConfig.xml\"",
            "lineNumber": 742
          },
          {
            "text": "                )",
            "lineNumber": 743
          },
          {
            "text": "            )",
            "lineNumber": 744
          },
          {
            "text": "        )",
            "lineNumber": 745
          },
          {
            "text": "        self.active_mods_uuids_last_save = active_mods_uuids",
            "lineNumber": 746
          },
          {
            "text": "        if is_initial:",
            "lineNumber": 747
          },
          {
            "text": "            logger.info(\"Caching initial active/inactive mod lists\")",
            "lineNumber": 748
          },
          {
            "text": "            self.active_mods_uuids_restore_state = active_mods_uuids",
            "lineNumber": 749
          },
          {
            "text": "            self.inactive_mods_uuids_restore_state = inactive_mods_uuids",
            "lineNumber": 750
          },
          {
            "lineNumber": 751
          },
          {
            "text": "        self._insert_data_into_lists(active_mods_uuids, inactive_mods_uuids)",
            "lineNumber": 752
          },
          {
            "lineNumber": 753
          },
          {
            "text": "    def _do_check_for_update(self) -&gt; None:",
            "lineNumber": 754
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 755
          },
          {
            "text": "        Check for RimSort updates using UpdateManager.",
            "lineNumber": 756
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 757
          },
          {
            "text": "        update_manager = UpdateManager(",
            "lineNumber": 758
          },
          {
            "text": "            self.settings_controller, self, self.mod_info_panel",
            "lineNumber": 759
          },
          {
            "text": "        )",
            "lineNumber": 760
          },
          {
            "text": "        update_manager.do_check_for_update()",
            "lineNumber": 761
          },
          {
            "lineNumber": 762
          },
          {
            "text": "    def __do_get_github_release_info(self) -&gt; dict[str, Any]:",
            "lineNumber": 763
          },
          {
            "text": "        # Parse latest release",
            "lineNumber": 764
          },
          {
            "text": "        ",
            "lineNumber": 765
          }
        ]
      },
      "score": 0.41681820154190063
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\main_content_panel.py",
        "range": {
          "startPosition": {
            "line": 94
          },
          "endPosition": {
            "line": 3647
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 95,
                "column": 1
              },
              "endPosition": {
                "line": 96,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainContent(QObject):",
            "lineNumber": 95,
            "isSignature": true
          },
          {
            "lineNumber": 1519
          },
          {
            "lineNumber": 1520
          },
          {
            "text": "    def _do_upload_list_rentry(self) -&gt; None:",
            "lineNumber": 1521
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 1522
          },
          {
            "text": "        Export the current list of active mods to the clipboard in a",
            "lineNumber": 1523
          },
          {
            "text": "        readable format. The current list does not need to have been saved.",
            "lineNumber": 1524
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 1525
          },
          {
            "text": "        # Define our lists",
            "lineNumber": 1526
          },
          {
            "text": "        active_mods = []",
            "lineNumber": 1527
          },
          {
            "text": "        active_mods_packageid_to_uuid = {}",
            "lineNumber": 1528
          },
          {
            "text": "        active_steam_mods_packageid_to_pfid = {}",
            "lineNumber": 1529
          },
          {
            "text": "        active_steam_mods_pfid_to_preview_url = {}",
            "lineNumber": 1530
          },
          {
            "text": "        pfids = []",
            "lineNumber": 1531
          },
          {
            "text": "        # Build our lists",
            "lineNumber": 1532
          },
          {
            "text": "        for uuid in self.mods_panel.active_mods_list.uuids:",
            "lineNumber": 1533
          },
          {
            "text": "            package_id = MetadataManager.instance().internal_local_metadata[uuid][",
            "lineNumber": 1534
          },
          {
            "text": "                \"packageid\"",
            "lineNumber": 1535
          },
          {
            "text": "            ]",
            "lineNumber": 1536
          },
          {
            "text": "            if package_id in active_mods:  # This should NOT be happening",
            "lineNumber": 1537
          },
          {
            "text": "                logger.critical(",
            "lineNumber": 1538
          },
          {
            "text": "                    \"Tried to export more than 1 identical package ids to the same mod list. \"",
            "lineNumber": 1539
          },
          {
            "text": "                    + f\"Skipping duplicate {package_id}\"",
            "lineNumber": 1540
          },
          {
            "text": "                )",
            "lineNumber": 1541
          },
          {
            "text": "                continue",
            "lineNumber": 1542
          },
          {
            "text": "            else:  # Otherwise, proceed with adding the mod package_id",
            "lineNumber": 1543
          },
          {
            "text": "                active_mods.append(package_id)",
            "lineNumber": 1544
          },
          {
            "text": "                active_mods_packageid_to_uuid[package_id] = uuid",
            "lineNumber": 1545
          },
          {
            "text": "                if (",
            "lineNumber": 1546
          },
          {
            "text": "                    self.metadata_manager.internal_local_metadata[uuid].get(\"steamcmd\")",
            "lineNumber": 1547
          },
          {
            "text": "                    or self.metadata_manager.internal_local_metadata[uuid][",
            "lineNumber": 1548
          },
          {
            "text": "                        \"data_source\"",
            "lineNumber": 1549
          },
          {
            "text": "                    ]",
            "lineNumber": 1550
          },
          {
            "text": "                    == \"workshop\"",
            "lineNumber": 1551
          },
          {
            "text": "                ) and self.metadata_manager.internal_local_metadata[uuid].get(",
            "lineNumber": 1552
          },
          {
            "text": "                    \"publishedfileid\"",
            "lineNumber": 1553
          },
          {
            "text": "                ):",
            "lineNumber": 1554
          },
          {
            "text": "                    publishedfileid = self.metadata_manager.internal_local_metadata[",
            "lineNumber": 1555
          },
          {
            "text": "                        uuid",
            "lineNumber": 1556
          },
          {
            "text": "                    ][\"publishedfileid\"]",
            "lineNumber": 1557
          },
          {
            "text": "                    active_steam_mods_packageid_to_pfid[package_id] = publishedfileid",
            "lineNumber": 1558
          },
          {
            "text": "                    pfids.append(publishedfileid)",
            "lineNumber": 1559
          },
          {
            "text": "        logger.info(f\"Collected {len(active_mods)} active mods for export\")",
            "lineNumber": 1560
          },
          {
            "text": "        if len(pfids) &gt; 0:  # No empty queries...",
            "lineNumber": 1561
          },
          {
            "text": "            # Compile list of Steam Workshop publishing preview images that correspond",
            "lineNumber": 1562
          }
        ]
      },
      "score": 0.4166969656944275
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\utils\\metadata.py",
        "range": {
          "startPosition": {
            "line": 2240
          },
          "endPosition": {
            "line": 2395
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 2241,
                "column": 1
              },
              "endPosition": {
                "line": 2244,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "def get_mods_from_list(",
            "lineNumber": 2241,
            "isSignature": true
          },
          {
            "text": "    mod_list: Union[str, list[str]],",
            "lineNumber": 2242,
            "isSignature": true
          },
          {
            "text": ") -&gt; tuple[list[str], list[str], dict[str, Any], list[str]]:",
            "lineNumber": 2243,
            "isSignature": true
          },
          {
            "lineNumber": 2369
          },
          {
            "text": "    logger.debug(f\"Generated active mods dict with {len(active_mods_uuids)} mods\")",
            "lineNumber": 2370
          },
          {
            "text": "    # Get the inactive mods by subtracting active mods from workshop + expansions",
            "lineNumber": 2371
          },
          {
            "text": "    logger.info(\"Generating inactive mod list\")",
            "lineNumber": 2372
          },
          {
            "text": "    inactive_mods_uuids = [",
            "lineNumber": 2373
          },
          {
            "text": "        uuid for uuid in all_mods.keys() if uuid not in active_mods_uuids",
            "lineNumber": 2374
          },
          {
            "text": "    ]",
            "lineNumber": 2375
          },
          {
            "text": "    logger.info(f\"# active mods: {len(active_mods_uuids)}\")",
            "lineNumber": 2376
          },
          {
            "text": "    logger.info(f\"# inactive mods: {len(inactive_mods_uuids)}\")",
            "lineNumber": 2377
          },
          {
            "text": "    logger.info(f\"# duplicate mods: {len(duplicate_mods)}\")",
            "lineNumber": 2378
          },
          {
            "text": "    logger.info(f\"# missing mods: {len(missing_mods)}\")",
            "lineNumber": 2379
          },
          {
            "text": "    return active_mods_uuids, inactive_mods_uuids, duplicate_mods, missing_mods",
            "lineNumber": 2380,
            "isSignature": true
          },
          {
            "lineNumber": 2381
          },
          {
            "lineNumber": 2382
          },
          {
            "text": "def log_deps_order_info(all_mods: dict[str, Any]) -&gt; None:",
            "lineNumber": 2383,
            "isSignature": true
          },
          {
            "text": "    \"\"\"This block is used quite a bit - deserves own function\"\"\"",
            "lineNumber": 2384
          }
        ]
      },
      "score": 0.41266459226608276
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\controllers\\file_search_controller.py",
        "range": {
          "startPosition": {
            "line": 598
          },
          "endPosition": {
            "line": 1156
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 599,
                "column": 1
              },
              "endPosition": {
                "line": 600,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class FileSearchController(QObject):",
            "lineNumber": 599,
            "isSignature": true
          },
          {
            "lineNumber": 887
          },
          {
            "lineNumber": 888
          },
          {
            "text": "    def all_mods_path(self) -&gt; list[str]:",
            "lineNumber": 889
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 890
          },
          {
            "text": "        Get paths to all mod folders (local and workshop).",
            "lineNumber": 891
          },
          {
            "lineNumber": 892
          },
          {
            "text": "        Returns:",
            "lineNumber": 893
          },
          {
            "text": "            List[str]: List of absolute paths to mod folders.",
            "lineNumber": 894
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 895
          },
          {
            "text": "        active_mods = self.get_active_mods_paths()",
            "lineNumber": 896
          },
          {
            "text": "        inactive_mods = self.get_inactive_mods_paths()",
            "lineNumber": 897
          },
          {
            "lineNumber": 898
          },
          {
            "text": "        # Combine active and inactive mod paths",
            "lineNumber": 899
          },
          {
            "text": "        root_paths = active_mods + inactive_mods",
            "lineNumber": 900
          },
          {
            "lineNumber": 901
          },
          {
            "text": "        # Log the combined paths for debugging",
            "lineNumber": 902
          },
          {
            "text": "        logger.info(",
            "lineNumber": 903
          },
          {
            "text": "            f\"All mods paths: {len(root_paths)} paths found (active + inactive)\"",
            "lineNumber": 904
          },
          {
            "text": "        )",
            "lineNumber": 905
          },
          {
            "lineNumber": 906
          },
          {
            "text": "        return root_paths",
            "lineNumber": 907
          },
          {
            "lineNumber": 908
          },
          {
            "text": "    def _get_mod_paths_from_uuids(self, uuids: list[str]) -&gt; list[str]:",
            "lineNumber": 909
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 910
          },
          {
            "text": "        Helper method to get mod paths from a list of UUIDs.",
            "lineNumber": 911
          },
          {
            "lineNumber": 912
          },
          {
            "text": "        Args:",
            "lineNumber": 913
          },
          {
            "text": "            uuids (List[str]): List of mod UUID strings.",
            "lineNumber": 914
          },
          {
            "lineNumber": 915
          },
          {
            "text": "        Returns:",
            "lineNumber": 916
          },
          {
            "text": "            List[str]: List of mod folder paths corresponding to the UUIDs.",
            "lineNumber": 917
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 918
          },
          {
            "text": "        # Get direct paths to the mods instead of just mod IDs",
            "lineNumber": 919
          },
          {
            "text": "        mod_paths = []",
            "lineNumber": 920
          },
          {
            "lineNumber": 921
          },
          {
            "text": "        for uuid in uuids:",
            "lineNumber": 922
          },
          {
            "text": "            # Check if the mod is in local metadata",
            "lineNumber": 923
          },
          {
            "text": "            if uuid in self.metadata_manager.internal_local_metadata:",
            "lineNumber": 924
          },
          {
            "text": "                mod_path = self.metadata_manager.internal_local_metadata[uuid][\"path\"]",
            "lineNumber": 925
          },
          {
            "text": "                if os.path.isdir(mod_path):",
            "lineNumber": 926
          },
          {
            "text": "                    mod_paths.append(mod_path)",
            "lineNumber": 927
          },
          {
            "text": "                    logger.debug(f\"Added mod path: {mod_path}\")",
            "lineNumber": 928
          },
          {
            "lineNumber": 929
          },
          {
            "text": "        logger.info(f\"Found {len(mod_paths)} mod paths from {len(uuids)} UUIDs\")",
            "lineNumber": 930
          },
          {
            "text": "        return mod_paths",
            "lineNumber": 931
          },
          {
            "lineNumber": 932
          },
          {
            "text": "    def get_specific_mod_paths(self, mod_ids: set[str]) -&gt; list[str]:",
            "lineNumber": 933
          },
          {
            "text": "        ",
            "lineNumber": 934
          }
        ]
      },
      "score": 0.4098184108734131
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\main_content_panel.py",
        "range": {
          "startPosition": {
            "line": 94
          },
          "endPosition": {
            "line": 3647
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 95,
                "column": 1
              },
              "endPosition": {
                "line": 96,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainContent(QObject):",
            "lineNumber": 95,
            "isSignature": true
          },
          {
            "lineNumber": 525
          },
          {
            "lineNumber": 526
          },
          {
            "text": "    def _insert_data_into_lists(",
            "lineNumber": 527
          },
          {
            "text": "        self, active_mods_uuids: list[str], inactive_mods_uuids: list[str]",
            "lineNumber": 528
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 529
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 530
          },
          {
            "text": "        Insert active mods and inactive mods into respective mod list widgets.",
            "lineNumber": 531
          },
          {
            "lineNumber": 532
          },
          {
            "text": "        :param active_mods_uuids: list of active mod uuids",
            "lineNumber": 533
          },
          {
            "text": "        :param inactive_mods_uuids: list of inactive mod uuids",
            "lineNumber": 534
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 535
          },
          {
            "text": "        logger.info(",
            "lineNumber": 536
          },
          {
            "text": "            f\"Inserting mod data into active [{len(active_mods_uuids)}] and inactive [{len(inactive_mods_uuids)}] mod lists\"",
            "lineNumber": 537
          },
          {
            "text": "        )",
            "lineNumber": 538
          },
          {
            "text": "        self.mods_panel.active_mods_list.recreate_mod_list(",
            "lineNumber": 539
          },
          {
            "text": "            list_type=\"active\", uuids=active_mods_uuids",
            "lineNumber": 540
          },
          {
            "text": "        )",
            "lineNumber": 541
          },
          {
            "text": "        # Determine sort key and descending for inactive mods",
            "lineNumber": 542
          },
          {
            "text": "        if self.settings_controller.settings.inactive_mods_sorting:",
            "lineNumber": 543
          },
          {
            "text": "            # Use current UI state from the combobox and button",
            "lineNumber": 544
          },
          {
            "text": "            sort_key = ModsPanelSortKey[self.mods_panel.inactive_mods_sort_key]",
            "lineNumber": 545
          },
          {
            "text": "            descending = self.mods_panel.inactive_sort_descending",
            "lineNumber": 546
          },
          {
            "text": "        else:",
            "lineNumber": 547
          },
          {
            "text": "            sort_key = ModsPanelSortKey.FILESYSTEM_MODIFIED_TIME",
            "lineNumber": 548
          },
          {
            "text": "            descending = True",
            "lineNumber": 549
          },
          {
            "text": "        self.mods_panel.inactive_mods_list.recreate_mod_list_and_sort(",
            "lineNumber": 550
          },
          {
            "text": "            list_type=\"inactive\",",
            "lineNumber": 551
          },
          {
            "text": "            uuids=inactive_mods_uuids,",
            "lineNumber": 552
          },
          {
            "text": "            key=sort_key,",
            "lineNumber": 553
          },
          {
            "text": "            descending=descending,",
            "lineNumber": 554
          },
          {
            "text": "        )",
            "lineNumber": 555
          },
          {
            "text": "        logger.info(",
            "lineNumber": 556
          },
          {
            "text": "            f\"Finished inserting mod data into active [{len(active_mods_uuids)}] and inactive [{len(inactive_mods_uuids)}] mod lists\"",
            "lineNumber": 557
          },
          {
            "text": "        )",
            "lineNumber": 558
          },
          {
            "text": "        # Recalculate warnings for both lists",
            "lineNumber": 559
          },
          {
            "text": "        # self.mods_panel.active_mods_list.recalculate_warnings_signal.emit()",
            "lineNumber": 560
          },
          {
            "text": "        # self.mods_panel.inactive_mods_list.recalculate_warnings_signal.emit()",
            "lineNumber": 561
          },
          {
            "lineNumber": 562
          },
          {
            "text": "    def __duplicate_mods_prompt(self) -&gt; None:",
            "lineNumber": 563
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 564
          }
        ]
      },
      "score": 0.4057750701904297
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\utils\\metadata.py",
        "range": {
          "startPosition": {
            "line": 2240
          },
          "endPosition": {
            "line": 2379
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 2241,
                "column": 1
              },
              "endPosition": {
                "line": 2244,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "def get_mods_from_list(",
            "lineNumber": 2241,
            "isSignature": true
          },
          {
            "text": "    mod_list: Union[str, list[str]],",
            "lineNumber": 2242,
            "isSignature": true
          },
          {
            "text": ") -&gt; tuple[list[str], list[str], dict[str, Any], list[str]]:",
            "lineNumber": 2243,
            "isSignature": true
          },
          {
            "lineNumber": 2271
          },
          {
            "text": "    # Calculate mod lists",
            "lineNumber": 2272
          },
          {
            "text": "    if isinstance(mod_list, str):",
            "lineNumber": 2273
          },
          {
            "text": "        # Handle the mod list not existing",
            "lineNumber": 2274
          },
          {
            "text": "        if not os.path.exists(mod_list):",
            "lineNumber": 2275
          },
          {
            "text": "            logger.debug(f\"Could not find mods list at: {mod_list}\")",
            "lineNumber": 2276
          },
          {
            "text": "            logger.debug(\"Creating an empty list with available expansions...\")",
            "lineNumber": 2277
          },
          {
            "text": "            metadata_manager = MetadataManager.instance()",
            "lineNumber": 2278
          },
          {
            "text": "            game_version = metadata_manager.game_version",
            "lineNumber": 2279
          },
          {
            "text": "            generated_xml = generate_rimworld_mods_list(",
            "lineNumber": 2280
          },
          {
            "text": "                game_version, [\"Ludeon.RimWorld\"]",
            "lineNumber": 2281
          },
          {
            "text": "            )",
            "lineNumber": 2282
          },
          {
            "text": "            logger.debug(f\"Saving new mods list to: {mod_list}\")",
            "lineNumber": 2283
          },
          {
            "text": "            json_to_xml_write(generated_xml, mod_list)",
            "lineNumber": 2284
          },
          {
            "text": "        # Parse the ModsConfig.xml activeMods list",
            "lineNumber": 2285
          },
          {
            "text": "        logger.info(f\"Retrieving active mods from RimWorld mod list: {mod_list}\")",
            "lineNumber": 2286
          },
          {
            "text": "        mod_data = xml_path_to_json(mod_list)",
            "lineNumber": 2287
          },
          {
            "text": "        package_ids_to_import = validate_rimworld_mods_list(mod_data)",
            "lineNumber": 2288
          },
          {
            "text": "    elif isinstance(mod_list, list):",
            "lineNumber": 2289
          },
          {
            "text": "        logger.info(\"Retrieving active mods from the provided list of package ids\")",
            "lineNumber": 2290
          },
          {
            "text": "        package_ids_to_import = mod_list",
            "lineNumber": 2291
          },
          {
            "text": "    # Parse the ModsConfig.xml data",
            "lineNumber": 2292
          },
          {
            "text": "    logger.info(\"Generating active mod list\")",
            "lineNumber": 2293
          },
          {
            "text": "    for (",
            "lineNumber": 2294
          },
          {
            "text": "        package_id",
            "lineNumber": 2295
          },
          {
            "text": "    ) in package_ids_to_import:",
            "lineNumber": 2296
          }
        ]
      },
      "score": 0.4043106138706207
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\models\\metadata\\metadata_structure.py",
        "range": {
          "startPosition": {
            "line": 97,
            "column": 36
          },
          "endPosition": {
            "line": 195
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "class ModsConfig:",
            "lineNumber": 101,
            "isSignature": true
          },
          {
            "text": "    \"\"\"A class to store the mods configuration.",
            "lineNumber": 102
          },
          {
            "lineNumber": 103
          },
          {
            "text": "    Note that activeMods and knownExpansions are set up such that they are NOT mutable.",
            "lineNumber": 104
          },
          {
            "text": "    To modify them, use the provided methods which will create a new list and set it.",
            "lineNumber": 105
          },
          {
            "lineNumber": 106
          },
          {
            "text": "    This is more performance heavy but ensures that the lists are not modified outside of the class,",
            "lineNumber": 107
          },
          {
            "text": "    preventing weird issues with the lists being modified in place, especially with threading.",
            "lineNumber": 108
          },
          {
            "lineNumber": 109
          },
          {
            "text": "    Attributes:",
            "lineNumber": 110
          },
          {
            "text": "        version (str): The version of the mods configuration.",
            "lineNumber": 111
          },
          {
            "text": "        activeMods (list[CaseInsensitiveStr]): A list of active mods.",
            "lineNumber": 112
          },
          {
            "text": "        knownExpansions (list[CaseInsensitiveStr]): A list of known expansions.",
            "lineNumber": 113
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 114
          },
          {
            "lineNumber": 115
          },
          {
            "text": "    version: str",
            "lineNumber": 116
          },
          {
            "text": "    _activeMods: list[CaseInsensitiveStr]",
            "lineNumber": 117
          },
          {
            "text": "    _knownExpansions: list[CaseInsensitiveStr]",
            "lineNumber": 118
          },
          {
            "lineNumber": 119
          },
          {
            "text": "    def __init__(",
            "lineNumber": 120
          },
          {
            "text": "        self,",
            "lineNumber": 121
          },
          {
            "text": "        version: str,",
            "lineNumber": 122
          },
          {
            "text": "        activeMods: list[CaseInsensitiveStr],",
            "lineNumber": 123
          },
          {
            "text": "        knownExpansions: list[CaseInsensitiveStr],",
            "lineNumber": 124
          },
          {
            "text": "    ):",
            "lineNumber": 125
          },
          {
            "text": "        self.version = version",
            "lineNumber": 126
          },
          {
            "text": "        self.activeMods = activeMods",
            "lineNumber": 127
          },
          {
            "text": "        self.knownExpansions = knownExpansions",
            "lineNumber": 128
          },
          {
            "lineNumber": 129
          },
          {
            "text": "    def clear_active_mods(self) -&gt; None:",
            "lineNumber": 130
          },
          {
            "text": "        \"\"\"Clear the active mods list.\"\"\"",
            "lineNumber": 131
          },
          {
            "text": "        self.activeMods.clear()",
            "lineNumber": 132
          },
          {
            "lineNumber": 133
          },
          {
            "text": "    def clear_all(self) -&gt; None:",
            "lineNumber": 134
          },
          {
            "text": "        \"\"\"Clear the active mods and known expansions lists.\"\"\"",
            "lineNumber": 135
          },
          {
            "text": "        self.clear_active_mods()",
            "lineNumber": 136
          },
          {
            "text": "        self.knownExpansions.clear()",
            "lineNumber": 137
          },
          {
            "lineNumber": 138
          },
          {
            "text": "    @property",
            "lineNumber": 139
          },
          {
            "text": "    def activeMods(self) -&gt; list[CaseInsensitiveStr]:",
            "lineNumber": 140
          },
          {
            "text": "        \"\"\"Copy of the active mods list.",
            "lineNumber": 141
          },
          {
            "lineNumber": 142
          },
          {
            "text": "        :return: A copy of the active mods list.",
            "lineNumber": 143
          },
          {
            "text": "        :rtype: list[CaseInsensitiveStr]",
            "lineNumber": 144
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 145
          },
          {
            "text": "        return self._activeMods[:]",
            "lineNumber": 146
          },
          {
            "lineNumber": 147
          },
          {
            "text": "    @activeMods.setter",
            "lineNumber": 148
          },
          {
            "text": "    def activeMods(self, value: list[CaseInsensitiveStr] | list[str]) -&gt; None:",
            "lineNumber": 149
          },
          {
            "text": "        ",
            "lineNumber": 150
          }
        ]
      },
      "score": 0.40258368849754333
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\utils\\metadata.py",
        "range": {
          "startPosition": {
            "line": 2240
          },
          "endPosition": {
            "line": 2379
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 2241,
                "column": 1
              },
              "endPosition": {
                "line": 2244,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "def get_mods_from_list(",
            "lineNumber": 2241,
            "isSignature": true
          },
          {
            "text": "    mod_list: Union[str, list[str]],",
            "lineNumber": 2242,
            "isSignature": true
          },
          {
            "text": ") -&gt; tuple[list[str], list[str], dict[str, Any], list[str]]:",
            "lineNumber": 2243,
            "isSignature": true
          },
          {
            "lineNumber": 2318
          },
          {
            "text": "        # Loop through all mods",
            "lineNumber": 2319
          },
          {
            "text": "        for uuid, metadata in all_mods.items():",
            "lineNumber": 2320
          },
          {
            "text": "            metadata_package_id = metadata[\"packageid\"]",
            "lineNumber": 2321
          },
          {
            "text": "            if (",
            "lineNumber": 2322
          },
          {
            "text": "                metadata_package_id",
            "lineNumber": 2323
          },
          {
            "text": "                in [  # If we have a match with or without _steam present",
            "lineNumber": 2324
          },
          {
            "text": "                    package_id_normalized,",
            "lineNumber": 2325
          },
          {
            "text": "                    package_id_normalized_stripped,",
            "lineNumber": 2326
          },
          {
            "text": "                ]",
            "lineNumber": 2327
          },
          {
            "text": "            ):",
            "lineNumber": 2328
          },
          {
            "text": "                # Add non-duplicates to active mods",
            "lineNumber": 2329
          },
          {
            "text": "                if target_id not in duplicate_mods.keys():",
            "lineNumber": 2330
          },
          {
            "text": "                    populated_mods.append(target_id)",
            "lineNumber": 2331
          },
          {
            "text": "                    active_mods_uuids.append(uuid)",
            "lineNumber": 2332
          },
          {
            "text": "                else:  # Otherwise, duplicate needs calculated",
            "lineNumber": 2333
          },
          {
            "text": "                    if (",
            "lineNumber": 2334
          },
          {
            "text": "                        target_id in duplicates_processed",
            "lineNumber": 2335
          },
          {
            "text": "                    ):  # Skip duplicates that have already been processed",
            "lineNumber": 2336
          },
          {
            "text": "                        continue",
            "lineNumber": 2337
          },
          {
            "text": "                    logger.info(",
            "lineNumber": 2338
          },
          {
            "text": "                        f\"Found duplicate mod present in active mods list: {target_id}\"",
            "lineNumber": 2339
          },
          {
            "text": "                    )",
            "lineNumber": 2340
          },
          {
            "text": "                    # Loop through sorted paths and determine which duplicate to used based on priority",
            "lineNumber": 2341
          },
          {
            "text": "                    for source in sources_order:",
            "lineNumber": 2342
          }
        ]
      },
      "score": 0.3851751983165741
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 2820,
                "column": 5
              },
              "endPosition": {
                "line": 2821,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "text": "def recreate_mod_list(",
            "lineNumber": 2920
          },
          {
            "text": "        self, list_type: str, uuids: list[str], filtering: bool = False",
            "lineNumber": 2921
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 2922
          },
          {
            "lineNumber": 2964
          },
          {
            "text": "        try:",
            "lineNumber": 2965
          },
          {
            "text": "            self.model().rowsAboutToBeRemoved.disconnect(self.handle_rows_removed)",
            "lineNumber": 2966
          },
          {
            "text": "        except TypeError:",
            "lineNumber": 2967
          },
          {
            "text": "            pass  # Signal not connected",
            "lineNumber": 2968
          },
          {
            "lineNumber": 2969
          },
          {
            "text": "        self.clear()",
            "lineNumber": 2970
          },
          {
            "text": "        self.uuids = list()",
            "lineNumber": 2971
          },
          {
            "text": "        if uuids:  # Insert data...",
            "lineNumber": 2972
          },
          {
            "text": "            for uuid_key in uuids:",
            "lineNumber": 2973
          },
          {
            "text": "                mod_path = self.metadata_manager.internal_local_metadata[uuid_key][",
            "lineNumber": 2974
          },
          {
            "text": "                    \"path\"",
            "lineNumber": 2975
          },
          {
            "text": "                ]",
            "lineNumber": 2976
          },
          {
            "text": "                aux_metadata_controller = (",
            "lineNumber": 2977
          },
          {
            "text": "                    AuxMetadataController.get_or_create_cached_instance(",
            "lineNumber": 2978
          },
          {
            "text": "                        self.settings_controller.settings.aux_db_path",
            "lineNumber": 2979
          },
          {
            "text": "                    )",
            "lineNumber": 2980
          },
          {
            "text": "                )",
            "lineNumber": 2981
          },
          {
            "text": "                with aux_metadata_controller.Session() as aux_metadata_session:",
            "lineNumber": 2982
          },
          {
            "text": "                    aux_metadata_controller.get_or_create(",
            "lineNumber": 2983
          },
          {
            "text": "                        aux_metadata_session, mod_path",
            "lineNumber": 2984
          },
          {
            "text": "                    )",
            "lineNumber": 2985
          },
          {
            "text": "                    aux_metadata_controller.update(",
            "lineNumber": 2986
          },
          {
            "text": "                        aux_metadata_session, mod_path, outdated=False",
            "lineNumber": 2987
          },
          {
            "text": "                    )",
            "lineNumber": 2988
          },
          {
            "text": "                    list_item = CustomListWidgetItem(self)",
            "lineNumber": 2989
          },
          {
            "text": "                    data = CustomListWidgetItemMetadata(",
            "lineNumber": 2990
          },
          {
            "text": "                        uuid=uuid_key,",
            "lineNumber": 2991
          },
          {
            "text": "                        list_type=self.list_type,",
            "lineNumber": 2992
          },
          {
            "text": "                        aux_metadata_controller=aux_metadata_controller,",
            "lineNumber": 2993
          },
          {
            "text": "                        aux_metadata_session=aux_metadata_session,",
            "lineNumber": 2994
          },
          {
            "text": "                        settings_controller=self.settings_controller,",
            "lineNumber": 2995
          },
          {
            "text": "                    )",
            "lineNumber": 2996
          },
          {
            "text": "                list_item.setData(Qt.ItemDataRole.UserRole, data)",
            "lineNumber": 2997
          },
          {
            "text": "                self.addItem(list_item)",
            "lineNumber": 2998
          },
          {
            "text": "                # When refreshing, update entry if needed?",
            "lineNumber": 2999
          },
          {
            "text": "            # Set uuids list to match the widget after all items are added",
            "lineNumber": 3000
          },
          {
            "text": "            self.uuids = uuids",
            "lineNumber": 3001
          },
          {
            "lineNumber": 3002
          },
          {
            "text": "        else:  # ...unless we don't have mods, at which point reenable updates and exit",
            "lineNumber": 3003
          }
        ]
      },
      "score": 0.37722858786582947
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\main_content_panel.py",
        "range": {
          "startPosition": {
            "line": 94
          },
          "endPosition": {
            "line": 3647
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 95,
                "column": 1
              },
              "endPosition": {
                "line": 96,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 829,
                "column": 5
              },
              "endPosition": {
                "line": 830,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainContent(QObject):",
            "lineNumber": 95,
            "isSignature": true
          },
          {
            "text": "def _do_clear(self) -&gt; None:",
            "lineNumber": 903
          },
          {
            "lineNumber": 927
          },
          {
            "text": "        ]",
            "lineNumber": 928
          },
          {
            "text": "        # If user wants Clear to also move DLC, only keep the base game in Active",
            "lineNumber": 929
          },
          {
            "text": "        if self.settings_controller.settings.clear_moves_dlc and package_id_order:",
            "lineNumber": 930
          },
          {
            "text": "            package_ids_to_keep_active = [package_id_order[0]]  # Base game only",
            "lineNumber": 931
          },
          {
            "text": "        else:",
            "lineNumber": 932
          },
          {
            "text": "            package_ids_to_keep_active = package_id_order",
            "lineNumber": 933
          },
          {
            "text": "        # Create a set of all package IDs from mod_data",
            "lineNumber": 934
          },
          {
            "text": "        package_ids_set = set(",
            "lineNumber": 935
          },
          {
            "text": "            mod_data[\"packageid\"]",
            "lineNumber": 936
          },
          {
            "text": "            for mod_data in self.metadata_manager.internal_local_metadata.values()",
            "lineNumber": 937
          },
          {
            "text": "        )",
            "lineNumber": 938
          },
          {
            "text": "        # Iterate over the package IDs we want to keep active",
            "lineNumber": 939
          },
          {
            "text": "        for package_id in package_ids_to_keep_active:",
            "lineNumber": 940
          },
          {
            "text": "            if package_id in package_ids_set:",
            "lineNumber": 941
          },
          {
            "text": "                # Append the UUIDs to active_mods_uuids if the package ID exists in mod_data",
            "lineNumber": 942
          },
          {
            "text": "                active_mods_uuids.extend(",
            "lineNumber": 943
          },
          {
            "text": "                    uuid",
            "lineNumber": 944
          },
          {
            "text": "                    for uuid, mod_data in self.metadata_manager.internal_local_metadata.items()",
            "lineNumber": 945
          },
          {
            "text": "                    if mod_data[\"data_source\"] == \"expansion\"",
            "lineNumber": 946
          },
          {
            "text": "                    and mod_data[\"packageid\"] == package_id",
            "lineNumber": 947
          },
          {
            "text": "                )",
            "lineNumber": 948
          },
          {
            "text": "        # Append the remaining UUIDs to inactive_mods_uuids",
            "lineNumber": 949
          },
          {
            "text": "        inactive_mods_uuids.extend(",
            "lineNumber": 950
          },
          {
            "text": "            uuid",
            "lineNumber": 951
          },
          {
            "text": "            for uuid in self.metadata_manager.internal_local_metadata.keys()",
            "lineNumber": 952
          },
          {
            "text": "            if uuid not in active_mods_uuids",
            "lineNumber": 953
          },
          {
            "text": "        )",
            "lineNumber": 954
          },
          {
            "text": "        # Disable widgets while inserting",
            "lineNumber": 955
          },
          {
            "text": "        self.disable_enable_widgets_signal.emit(False)",
            "lineNumber": 956
          },
          {
            "text": "        # Insert data into lists",
            "lineNumber": 957
          },
          {
            "text": "        self._insert_data_into_lists(active_mods_uuids, inactive_mods_uuids)",
            "lineNumber": 958
          },
          {
            "text": "        # Re-enable widgets after inserting",
            "lineNumber": 959
          },
          {
            "text": "        self.disable_enable_widgets_signal.emit(True)",
            "lineNumber": 960
          },
          {
            "lineNumber": 961
          },
          {
            "text": "    def _do_sort(self, check_deps: bool = True) -&gt; None:",
            "lineNumber": 962
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 963
          }
        ]
      },
      "score": 0.37444543838500977
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 2820,
                "column": 5
              },
              "endPosition": {
                "line": 2821,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "lineNumber": 2918
          },
          {
            "lineNumber": 2919
          },
          {
            "text": "    def recreate_mod_list(",
            "lineNumber": 2920
          },
          {
            "text": "        self, list_type: str, uuids: list[str], filtering: bool = False",
            "lineNumber": 2921
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 2922
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2923
          },
          {
            "text": "        Clear all mod items and add new ones from a dict.",
            "lineNumber": 2924
          },
          {
            "lineNumber": 2925
          },
          {
            "text": "        :param mods: dict of mod data",
            "lineNumber": 2926
          },
          {
            "text": "        :param filtering: if True, UUIDs are already sorted; skip sorting",
            "lineNumber": 2927
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2928
          },
          {
            "text": "        logger.info(f\"Internally recreating {list_type} mod list\")",
            "lineNumber": 2929
          },
          {
            "text": "        # Skip sorting if UUIDs are already filtered/sorted (filtering=True)",
            "lineNumber": 2930
          },
          {
            "text": "        if not filtering:",
            "lineNumber": 2931
          },
          {
            "text": "            # Sort inactive mods using saved settings if enabled",
            "lineNumber": 2932
          },
          {
            "text": "            if (",
            "lineNumber": 2933
          },
          {
            "text": "                list_type == \"Inactive\"",
            "lineNumber": 2934
          },
          {
            "text": "                and self.settings_controller.settings.save_inactive_mods_sort_state",
            "lineNumber": 2935
          },
          {
            "text": "                and self.settings_controller.settings.inactive_mods_sorting",
            "lineNumber": 2936
          },
          {
            "text": "            ):",
            "lineNumber": 2937
          },
          {
            "text": "                sort_key = ModsPanelSortKey[",
            "lineNumber": 2938
          },
          {
            "text": "                    self.settings_controller.settings.inactive_mods_sort_key",
            "lineNumber": 2939
          },
          {
            "text": "                ]",
            "lineNumber": 2940
          },
          {
            "text": "                descending = (",
            "lineNumber": 2941
          },
          {
            "text": "                    self.settings_controller.settings.inactive_mods_sort_descending",
            "lineNumber": 2942
          },
          {
            "text": "                )",
            "lineNumber": 2943
          },
          {
            "text": "                uuids = sort_uuids(",
            "lineNumber": 2944
          },
          {
            "text": "                    uuids,",
            "lineNumber": 2945
          },
          {
            "text": "                    key=sort_key,",
            "lineNumber": 2946
          },
          {
            "text": "                    descending=descending,",
            "lineNumber": 2947
          },
          {
            "text": "                    settings_controller=self.settings_controller,",
            "lineNumber": 2948
          },
          {
            "text": "                )",
            "lineNumber": 2949
          },
          {
            "text": "            else:",
            "lineNumber": 2950
          },
          {
            "text": "                if list_type == \"Inactive\":",
            "lineNumber": 2951
          },
          {
            "text": "                    uuids = sort_uuids(",
            "lineNumber": 2952
          },
          {
            "text": "                        uuids,",
            "lineNumber": 2953
          },
          {
            "text": "                        key=ModsPanelSortKey.FILESYSTEM_MODIFIED_TIME,",
            "lineNumber": 2954
          },
          {
            "text": "                        descending=True,",
            "lineNumber": 2955
          },
          {
            "text": "                        settings_controller=self.settings_controller,",
            "lineNumber": 2956
          },
          {
            "text": "                    )",
            "lineNumber": 2957
          },
          {
            "text": "        # Disable updates and disconnect model signals during rebuild",
            "lineNumber": 2958
          },
          {
            "text": "        self.setUpdatesEnabled(False)",
            "lineNumber": 2959
          },
          {
            "text": "        # Temporarily disconnect model signals to avoid cascading updates and duplicate items",
            "lineNumber": 2960
          },
          {
            "text": "        try:",
            "lineNumber": 2961
          },
          {
            "text": "            self.model().rowsInserted.disconnect(self.handle_rows_inserted)",
            "lineNumber": 2962
          },
          {
            "text": "        except TypeError:",
            "lineNumber": 2963
          },
          {
            "text": "            pass  # Signal not connected",
            "lineNumber": 2964
          },
          {
            "text": "        try:",
            "lineNumber": 2965
          },
          {
            "text": "            self.model().rowsAboutToBeRemoved.disconnect",
            "lineNumber": 2966
          }
        ]
      },
      "score": 0.37332919239997864
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\windows\\base_mods_panel.py",
        "range": {
          "startPosition": {
            "line": 125
          },
          "endPosition": {
            "line": 1412
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 126,
                "column": 1
              },
              "endPosition": {
                "line": 127,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class BaseModsPanel(QWidget):",
            "lineNumber": 126,
            "isSignature": true
          },
          {
            "lineNumber": 1007
          },
          {
            "lineNumber": 1008
          },
          {
            "text": "    # ===== CENTRALIZED METADATA HANDLING =====",
            "lineNumber": 1009
          },
          {
            "lineNumber": 1010
          },
          {
            "text": "    def _get_uuid_from_row(self, row: int, name_column: int = 1) -&gt; str | None:",
            "lineNumber": 1011
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 1012
          },
          {
            "text": "        Extract UUID from a table row's name column.",
            "lineNumber": 1013
          },
          {
            "lineNumber": 1014
          },
          {
            "text": "        Args:",
            "lineNumber": 1015
          },
          {
            "text": "            row: Row index to extract UUID from",
            "lineNumber": 1016
          },
          {
            "text": "            name_column: Column index containing the name item with UUID data",
            "lineNumber": 1017
          },
          {
            "lineNumber": 1018
          },
          {
            "text": "        Returns:",
            "lineNumber": 1019
          },
          {
            "text": "            UUID string if found, None otherwise",
            "lineNumber": 1020
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 1021
          },
          {
            "text": "        try:",
            "lineNumber": 1022
          },
          {
            "text": "            if row &gt;= self.editor_model.rowCount():",
            "lineNumber": 1023
          },
          {
            "text": "                return None",
            "lineNumber": 1024
          },
          {
            "lineNumber": 1025
          },
          {
            "text": "            name_item = self.editor_model.item(row, name_column)",
            "lineNumber": 1026
          },
          {
            "text": "            if name_item is None:",
            "lineNumber": 1027
          },
          {
            "text": "                return None",
            "lineNumber": 1028
          },
          {
            "lineNumber": 1029
          },
          {
            "text": "            return name_item.data(Qt.ItemDataRole.UserRole)",
            "lineNumber": 1030
          },
          {
            "text": "        except Exception as e:",
            "lineNumber": 1031
          },
          {
            "text": "            logger.warning(f\"Error accessing UUID from row {row}: {e}\")",
            "lineNumber": 1032
          },
          {
            "text": "            return None",
            "lineNumber": 1033
          },
          {
            "lineNumber": 1034
          },
          {
            "text": "    def _get_selected_mod_metadata(self) -&gt; list[dict[str, Any]]:",
            "lineNumber": 1035
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 1036
          },
          {
            "text": "        Get metadata for selected mods in the table.",
            "lineNumber": 1037
          },
          {
            "lineNumber": 1038
          },
          {
            "text": "        Returns:",
            "lineNumber": 1039
          },
          {
            "text": "            List of ModMetadata objects for selected mods",
            "lineNumber": 1040
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 1041
          },
          {
            "text": "        selected_mods = []",
            "lineNumber": 1042
          },
          {
            "text": "        try:",
            "lineNumber": 1043
          },
          {
            "text": "            for row in range(self.editor_model.rowCount()):",
            "lineNumber": 1044
          },
          {
            "text": "                if self._row_is_checked(row):",
            "lineNumber": 1045
          },
          {
            "text": "                    uuid = self._get_uuid_from_row(row)",
            "lineNumber": 1046
          },
          {
            "text": "                    if uuid and uuid in self.metadata_manager.internal_local_metadata:",
            "lineNumber": 1047
          },
          {
            "text": "                        selected_mods.append(",
            "lineNumber": 1048
          },
          {
            "text": "                            self.metadata_manager.internal_local_metadata[uuid]",
            "lineNumber": 1049
          },
          {
            "text": "                        )",
            "lineNumber": 1050
          },
          {
            "text": "        except Exception as e:",
            "lineNumber": 1051
          },
          {
            "text": "            logger.warning(f\"Error getting selected mod metadata: {e}\")",
            "lineNumber": 1052
          },
          {
            "text": "        return selected_mods",
            "lineNumber": 1053
          },
          {
            "lineNumber": 1054
          },
          {
            "text": "    def _refresh_metadata_and_panel(self) -&gt; None:",
            "lineNumber": 1055
          },
          {
            "text": "        ",
            "lineNumber": 1056
          }
        ]
      },
      "score": 0.37101173400878906
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 814,
                "column": 5
              },
              "endPosition": {
                "line": 815,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "text": "def __init__(self, list_type: str, settings_controller: SettingsController) -&gt; None:",
            "lineNumber": 814
          },
          {
            "lineNumber": 861
          },
          {
            "lineNumber": 862
          },
          {
            "text": "        # Allow inserting custom list items",
            "lineNumber": 863
          },
          {
            "text": "        self.model().rowsInserted.connect(self.handle_rows_inserted, Qt.ConnectionType.QueuedConnection)",
            "lineNumber": 864
          },
          {
            "lineNumber": 865
          },
          {
            "text": "        # Handle removing items to update count",
            "lineNumber": 866
          },
          {
            "text": "        self.model().rowsAboutToBeRemoved.connect(self.handle_rows_removed, Qt.ConnectionType.QueuedConnection)",
            "lineNumber": 867
          },
          {
            "lineNumber": 868
          },
          {
            "text": "        # Lazy load ModListItemInner",
            "lineNumber": 869
          },
          {
            "text": "        self.verticalScrollBar().valueChanged.connect(self.check_widgets_visible)",
            "lineNumber": 870
          },
          {
            "lineNumber": 871
          },
          {
            "text": "        # This set is used to keep track of mods that have been loaded",
            "lineNumber": 872
          },
          {
            "text": "        # into widgets. Used for an optimization strategy for &#96;handle_rows_inserted&#96;",
            "lineNumber": 873
          },
          {
            "text": "        self.uuids: list[str] = []",
            "lineNumber": 874
          },
          {
            "text": "        self.ignore_warning_list: list[str] = []",
            "lineNumber": 875
          },
          {
            "text": "        # Cache of latest save package ids to check new mods",
            "lineNumber": 876
          },
          {
            "text": "        self._latest_save_package_ids: set[str] | None = None",
            "lineNumber": 877
          },
          {
            "text": "        ",
            "lineNumber": 878
          },
          {
            "text": "        # Translation status",
            "lineNumber": 879
          },
          {
            "text": "        self.show_translation_status: bool = False",
            "lineNumber": 880
          },
          {
            "text": "        self.translation_lookup: set[str] = set()",
            "lineNumber": 881
          },
          {
            "lineNumber": 882
          },
          {
            "text": "        self.deletion_sub_menu = ModDeletionMenu(",
            "lineNumber": 883
          },
          {
            "text": "            self.settings_controller,",
            "lineNumber": 884
          },
          {
            "text": "            self._get_selected_metadata,",
            "lineNumber": 885
          },
          {
            "text": "            self.uuids,",
            "lineNumber": 886
          },
          {
            "text": "        )  # TODO: should we enable items conditionally? For now use all",
            "lineNumber": 887
          },
          {
            "text": "        logger.debug(\"Finished ModListW&#96;idget initialization\")",
            "lineNumber": 888
          },
          {
            "lineNumber": 889
          },
          {
            "text": "    def on_selection_changed(",
            "lineNumber": 890
          },
          {
            "text": "        self, selected: QItemSelection, deselected: QItemSelection",
            "lineNumber": 891
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 892
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 893
          },
          {
            "text": "        Used to indicate when the custom widget is selected/not selected.",
            "lineNumber": 894
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 895
          },
          {
            "text": "        for index in selected.indexes():",
            "lineNumber": 896
          },
          {
            "text": "            item = self.item(index.row())",
            "lineNumber": 897
          },
          {
            "text": "            widget = self.itemWidget(item)",
            "lineNumber": 898
          },
          {
            "text": "            if widget:",
            "lineNumber": 899
          },
          {
            "text": "                widget.set_selected(True)  # type: ignore",
            "lineNumber": 900
          },
          {
            "lineNumber": 901
          },
          {
            "text": "        for index in deselected.indexes():",
            "lineNumber": 902
          },
          {
            "text": "            item = self.item(index.row())",
            "lineNumber": 903
          },
          {
            "text": "            widget = self.itemWidget(item)",
            "lineNumber": 904
          },
          {
            "text": "            if widget:",
            "lineNumber": 905
          },
          {
            "text": "                widget.set_selected(False)  # type: ignore",
            "lineNumber": 906
          },
          {
            "lineNumber": 907
          },
          {
            "text": "    def item(self, row: int) -&gt; CustomListWidgetItem:",
            "lineNumber": 908
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 909
          }
        ]
      },
      "score": 0.3708232641220093
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 2268,
                "column": 5
              },
              "endPosition": {
                "line": 2269,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "lineNumber": 2307
          },
          {
            "lineNumber": 2308
          },
          {
            "text": "    def check_widgets_visible(self) -&gt; None:",
            "lineNumber": 2309
          },
          {
            "text": "        # This function checks the visibility of each item and creates a widget if the item is visible and not already setup.",
            "lineNumber": 2310
          },
          {
            "text": "        indexes = self.get_visible_indexes()",
            "lineNumber": 2311
          },
          {
            "text": "        for idx in indexes:",
            "lineNumber": 2312
          },
          {
            "text": "            item = self.item(idx)",
            "lineNumber": 2313
          },
          {
            "text": "            # Check for visible item without a widget set",
            "lineNumber": 2314
          },
          {
            "text": "            if item and self.itemWidget(item) is None:",
            "lineNumber": 2315
          },
          {
            "text": "                self.create_widget_for_item(item)",
            "lineNumber": 2316
          },
          {
            "lineNumber": 2317
          },
          {
            "text": "    def get_visible_indexes(self) -&gt; set[int]:",
            "lineNumber": 2318
          },
          {
            "text": "        \"\"\"This function returns the set of indexes for items that are currently visible in the viewport.\"\"\"",
            "lineNumber": 2319
          },
          {
            "text": "        indexes: set[int] = set()",
            "lineNumber": 2320
          },
          {
            "lineNumber": 2321
          },
          {
            "text": "        top_index = self.indexAt(self.viewport().rect().topLeft())",
            "lineNumber": 2322
          },
          {
            "text": "        if not top_index.isValid():",
            "lineNumber": 2323
          },
          {
            "text": "            return indexes",
            "lineNumber": 2324
          },
          {
            "lineNumber": 2325
          },
          {
            "text": "        row = top_index.row()",
            "lineNumber": 2326
          },
          {
            "text": "        model = self.model()",
            "lineNumber": 2327
          },
          {
            "lineNumber": 2328
          },
          {
            "text": "        while row &lt; model.rowCount():",
            "lineNumber": 2329
          },
          {
            "text": "            idx = model.index(row, 0)",
            "lineNumber": 2330
          },
          {
            "text": "            rect = self.visualRect(idx)",
            "lineNumber": 2331
          },
          {
            "text": "            if rect.top() &gt; self.viewport().height():",
            "lineNumber": 2332
          },
          {
            "text": "                break",
            "lineNumber": 2333
          },
          {
            "text": "            elif rect.bottom() &gt;= 0:",
            "lineNumber": 2334
          },
          {
            "text": "                indexes.add(row)",
            "lineNumber": 2335
          },
          {
            "lineNumber": 2336
          },
          {
            "text": "            row += 1",
            "lineNumber": 2337
          },
          {
            "lineNumber": 2338
          },
          {
            "text": "        return indexes",
            "lineNumber": 2339
          },
          {
            "text": "    ",
            "lineNumber": 2340
          },
          {
            "text": "    def handle_item_data_changed(self, item: CustomListWidgetItem) -&gt; None:",
            "lineNumber": 2341
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2342
          },
          {
            "text": "        This slot is called when an item's data changes",
            "lineNumber": 2343
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2344
          },
          {
            "text": "        widget = self.itemWidget(item)",
            "lineNumber": 2345
          },
          {
            "text": "        if widget is not None and isinstance(widget, ModListItemInner):",
            "lineNumber": 2346
          },
          {
            "text": "            widget.repolish(item)",
            "lineNumber": 2347
          },
          {
            "lineNumber": 2348
          },
          {
            "text": "    def handle_other_list_row_added(self, uuid: str) -&gt; None:",
            "lineNumber": 2349
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2350
          },
          {
            "text": "        When a mod is moved from Inactive-&gt;Active, the uuid is removed from the Inactive list.",
            "lineNumber": 2351
          },
          {
            "lineNumber": 2352
          },
          {
            "text": "        When a mod is moved from Active-&gt;Inactive, the uuid is removed from the Active list.",
            "lineNumber": 2353
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2354
          },
          {
            "text": "        if uuid in self.uuids:",
            "lineNumber": 2355
          },
          {
            "text": "            self.uuids.remove(uuid)",
            "lineNumber": 2356
          },
          {
            "lineNumber": 2357
          },
          {
            "text": "    def handle_rows_inserted(self, parent: QModelIndex, first: int, last: int) -&gt; None:",
            "lineNumber": 2358
          },
          {
            "text": "        ",
            "lineNumber": 2359
          }
        ]
      },
      "score": 0.3593331575393677
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\main_content_panel.py",
        "range": {
          "startPosition": {
            "line": 94
          },
          "endPosition": {
            "line": 3647
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 95,
                "column": 1
              },
              "endPosition": {
                "line": 96,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 115,
                "column": 5
              },
              "endPosition": {
                "line": 116,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainContent(QObject):",
            "lineNumber": 95,
            "isSignature": true
          },
          {
            "text": "def __init__(self, settings_controller: SettingsController) -&gt; None:",
            "lineNumber": 115
          },
          {
            "lineNumber": 288
          },
          {
            "text": "            self.mods_panel.active_mods_list.key_press_signal.connect(",
            "lineNumber": 289
          },
          {
            "text": "                self.__handle_active_mod_key_press",
            "lineNumber": 290
          },
          {
            "text": "            )",
            "lineNumber": 291
          },
          {
            "text": "            self.mods_panel.inactive_mods_list.key_press_signal.connect(",
            "lineNumber": 292
          },
          {
            "text": "                self.__handle_inactive_mod_key_press",
            "lineNumber": 293
          },
          {
            "text": "            )",
            "lineNumber": 294
          },
          {
            "text": "            self.mods_panel.active_mods_list.mod_info_signal.connect(",
            "lineNumber": 295
          },
          {
            "text": "                self.__mod_list_slot",
            "lineNumber": 296
          },
          {
            "text": "            )",
            "lineNumber": 297
          },
          {
            "text": "            self.mods_panel.inactive_mods_list.mod_info_signal.connect(",
            "lineNumber": 298
          },
          {
            "text": "                self.__mod_list_slot",
            "lineNumber": 299
          },
          {
            "text": "            )",
            "lineNumber": 300
          },
          {
            "text": "            self.mods_panel.active_mods_list.item_added_signal.connect(",
            "lineNumber": 301
          },
          {
            "text": "                self.mods_panel.inactive_mods_list.handle_other_list_row_added",
            "lineNumber": 302
          },
          {
            "text": "            )",
            "lineNumber": 303
          },
          {
            "text": "            self.mods_panel.inactive_mods_list.item_added_signal.connect(",
            "lineNumber": 304
          },
          {
            "text": "                self.mods_panel.active_mods_list.handle_other_list_row_added",
            "lineNumber": 305
          },
          {
            "text": "            )",
            "lineNumber": 306
          },
          {
            "text": "            self.mods_panel.active_mods_list.edit_rules_signal.connect(",
            "lineNumber": 307
          },
          {
            "text": "                self._do_open_rule_editor",
            "lineNumber": 308
          },
          {
            "text": "            )",
            "lineNumber": 309
          },
          {
            "text": "            self.mods_panel.inactive_mods_list.edit_rules_signal.connect(",
            "lineNumber": 310
          },
          {
            "text": "                self._do_open_rule_editor",
            "lineNumber": 311
          },
          {
            "text": "            )",
            "lineNumber": 312
          },
          {
            "text": "            self.mods_panel.active_mods_list.steamdb_blacklist_signal.connect(",
            "lineNumber": 313
          },
          {
            "text": "                self._do_blacklist_action_steamdb",
            "lineNumber": 314
          },
          {
            "text": "            )",
            "lineNumber": 315
          },
          {
            "text": "            self.mods_panel.inactive_mods_list.steamdb_blacklist_signal.connect(",
            "lineNumber": 316
          },
          {
            "text": "                self._do_blacklist_action_steamdb",
            "lineNumber": 317
          },
          {
            "text": "            )",
            "lineNumber": 318
          },
          {
            "text": "            self.mods_panel.active_mods_list.refresh_signal.connect(self._do_refresh)",
            "lineNumber": 319
          },
          {
            "text": "            self.mods_panel.inactive_mods_list.refresh_signal.connect(self._do_refresh)",
            "lineNumber": 320
          },
          {
            "lineNumber": 321
          },
          {
            "text": "            EventBus().use_this_instead_clicked.connect(self._use_this_instead_clicked)",
            "lineNumber": 322
          },
          {
            "lineNumber": 323
          },
          {
            "text": "            EventBus().do_threaded_loading_animation.connect(",
            "lineNumber": 324
          },
          {
            "text": "                self.do_threaded_loading_animation",
            "lineNumber": 325
          },
          {
            "text": "            )",
            "lineNumber": 326
          },
          {
            "lineNumber": 327
          },
          {
            "text": "            EventBus().do_metadata_refresh_cache.connect(self.do_metadata_refresh_cache)",
            "lineNumber": 328
          },
          {
            "lineNumber": 329
          },
          {
            "text": "            # Restore cache initially set to empty",
            "lineNumber": 330
          },
          {
            "text": "            self.active_mods_uuids_last_save: list[str] = []",
            "lineNumber": 331
          },
          {
            "text": "            self.active_mods_uuids_restore_state: list[str] = []",
            "lineNumber": 332
          },
          {
            "text": "            self.inactive_mods_uuids_restore_state: list[str] = []",
            "lineNumber": 333
          }
        ]
      },
      "score": 0.35323965549468994
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\utils\\schema.py",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 102
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "from typing import Any",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "from loguru import logger",
            "lineNumber": 3
          },
          {
            "text": "from PySide6.QtCore import QCoreApplication",
            "lineNumber": 4
          },
          {
            "lineNumber": 5
          },
          {
            "text": "from app.utils.constants import RIMWORLD_PACKAGE_IDS",
            "lineNumber": 6
          },
          {
            "text": "from app.views.dialogue import show_warning",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "translate = QCoreApplication.translate",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "def generate_rimworld_mods_list(",
            "lineNumber": 12,
            "isSignature": true
          },
          {
            "text": "    game_version: str, packageids: list[str], dlc_ids: list[str] = RIMWORLD_PACKAGE_IDS",
            "lineNumber": 13,
            "isSignature": true
          },
          {
            "text": ") -&gt; dict[str, Any]:",
            "lineNumber": 14,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 15
          },
          {
            "text": "    Generate the default Rimworld mods list",
            "lineNumber": 16
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 17
          },
          {
            "text": "    return {",
            "lineNumber": 18
          },
          {
            "text": "        \"ModsConfigData\": {",
            "lineNumber": 19
          },
          {
            "text": "            \"version\": game_version,",
            "lineNumber": 20
          },
          {
            "text": "            \"activeMods\": {",
            "lineNumber": 21
          },
          {
            "text": "                \"li\": packageids,",
            "lineNumber": 22
          },
          {
            "text": "            },",
            "lineNumber": 23
          },
          {
            "text": "            \"knownExpansions\": {",
            "lineNumber": 24
          },
          {
            "text": "                \"li\": [",
            "lineNumber": 25
          },
          {
            "text": "                    packageid",
            "lineNumber": 26
          },
          {
            "text": "                    for packageid in dlc_ids",
            "lineNumber": 27
          },
          {
            "text": "                    if packageid.lower() in RIMWORLD_PACKAGE_IDS",
            "lineNumber": 28
          },
          {
            "text": "                    and packageid.lower() != \"ludeon.rimworld\"",
            "lineNumber": 29
          },
          {
            "text": "                ],",
            "lineNumber": 30
          },
          {
            "text": "            },",
            "lineNumber": 31
          },
          {
            "text": "        },",
            "lineNumber": 32
          },
          {
            "text": "    }",
            "lineNumber": 33,
            "isSignature": true
          },
          {
            "lineNumber": 34
          },
          {
            "lineNumber": 35
          },
          {
            "text": "def validate_rimworld_mods_list(",
            "lineNumber": 36,
            "isSignature": true
          },
          {
            "text": "    mods_config_data: dict[str, Any],",
            "lineNumber": 37,
            "isSignature": true
          },
          {
            "text": ") -&gt; list[str]:",
            "lineNumber": 38,
            "isSignature": true
          },
          {
            "text": "    ",
            "lineNumber": 39
          }
        ]
      },
      "score": 0.3527812957763672
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 3129
          },
          "endPosition": {
            "line": 4800
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 3130,
                "column": 1
              },
              "endPosition": {
                "line": 3131,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 3983,
                "column": 5
              },
              "endPosition": {
                "line": 3985,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModsPanel(QWidget):",
            "lineNumber": 3130,
            "isSignature": true
          },
          {
            "text": "def apply_mods_filter_type(self, list_type: str) -&gt; None:",
            "lineNumber": 3983
          },
          {
            "text": "        # Define the mod types",
            "lineNumber": 3984
          },
          {
            "lineNumber": 4025
          },
          {
            "lineNumber": 4026
          },
          {
            "text": "        # Apply filtering based on the selected type",
            "lineNumber": 4027
          },
          {
            "text": "        for uuid in mod_list.uuids:",
            "lineNumber": 4028
          },
          {
            "text": "            item = mod_list.item(mod_list.uuids.index(uuid))",
            "lineNumber": 4029
          },
          {
            "text": "            item_data = item.data(Qt.ItemDataRole.UserRole)",
            "lineNumber": 4030
          },
          {
            "lineNumber": 4031
          },
          {
            "text": "            # Determine the mod type",
            "lineNumber": 4032
          },
          {
            "text": "            mod_type = (",
            "lineNumber": 4033
          },
          {
            "text": "                \"csharp\"",
            "lineNumber": 4034
          },
          {
            "text": "                if self.metadata_manager.internal_local_metadata.get(uuid, {}).get(",
            "lineNumber": 4035
          },
          {
            "text": "                    \"csharp\"",
            "lineNumber": 4036
          },
          {
            "text": "                )",
            "lineNumber": 4037
          },
          {
            "text": "                else \"xml\"",
            "lineNumber": 4038
          },
          {
            "text": "            )",
            "lineNumber": 4039
          },
          {
            "text": "            if mod_type and mod_types:",
            "lineNumber": 4040
          },
          {
            "text": "                item.setData(Qt.ItemDataRole.UserRole, item_data)",
            "lineNumber": 4041
          },
          {
            "lineNumber": 4042
          },
          {
            "text": "        if source_index == 0:",
            "lineNumber": 4043
          },
          {
            "text": "            filters_active = False",
            "lineNumber": 4044
          },
          {
            "text": "        else:",
            "lineNumber": 4045
          },
          {
            "text": "            filters_active = True",
            "lineNumber": 4046
          },
          {
            "text": "        # Trigger search and filters",
            "lineNumber": 4047
          },
          {
            "text": "        self.signal_search_and_filters(",
            "lineNumber": 4048
          },
          {
            "text": "            list_type=list_type,",
            "lineNumber": 4049
          },
          {
            "text": "            pattern=search.text(),",
            "lineNumber": 4050
          },
          {
            "text": "            filters_active=filters_active,",
            "lineNumber": 4051
          },
          {
            "text": "        )",
            "lineNumber": 4052
          },
          {
            "lineNumber": 4053
          },
          {
            "text": "    def on_mod_deleted(self, uuid: str) -&gt; None:",
            "lineNumber": 4054
          },
          {
            "text": "        if uuid in self.active_mods_list.uuids:",
            "lineNumber": 4055
          },
          {
            "text": "            index = self.active_mods_list.uuids.index(uuid)",
            "lineNumber": 4056
          },
          {
            "text": "            self.active_mods_list.takeItem(index)",
            "lineNumber": 4057
          },
          {
            "text": "            self.active_mods_list.uuids.pop(index)",
            "lineNumber": 4058
          },
          {
            "text": "            self.update_count(list_type=\"Active\")",
            "lineNumber": 4059
          },
          {
            "text": "        elif uuid in self.inactive_mods_list.uuids:",
            "lineNumber": 4060
          },
          {
            "text": "            index = self.inactive_mods_list.uuids.index(uuid)",
            "lineNumber": 4061
          },
          {
            "text": "            self.inactive_mods_list.takeItem(index)",
            "lineNumber": 4062
          },
          {
            "text": "            self.inactive_mods_list.uuids.pop(index)",
            "lineNumber": 4063
          },
          {
            "text": "            self.update_count(list_type=\"Inactive\")",
            "lineNumber": 4064
          },
          {
            "lineNumber": 4065
          },
          {
            "text": "    def on_mod_metadata_updated(self, uuid: str) -&gt; None:",
            "lineNumber": 4066
          },
          {
            "text": "        if uuid in self.active_mods_list.uuids:",
            "lineNumber": 4067
          },
          {
            "text": "            self.active_mods_list.rebuild_item_widget_from_uuid(uuid=uuid)",
            "lineNumber": 4068
          },
          {
            "text": "        elif uuid in self.inactive_mods_list.uuids:",
            "lineNumber": 4069
          },
          {
            "text": "            self.inactive_mods_list.rebuild_item_widget_from_uuid(uuid=uuid)",
            "lineNumber": 4070
          },
          {
            "lineNumber": 4071
          },
          {
            "text": "    def recalculate_list_errors_warnings(self, list_type: str) -&gt; None:",
            "lineNumber": 4072
          },
          {
            "text": "        ",
            "lineNumber": 4073
          }
        ]
      },
      "score": 0.3473384380340576
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 2820,
                "column": 5
              },
              "endPosition": {
                "line": 2821,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "text": "def _get_latest_save_package_ids(self) -&gt; set[str] | None:",
            "lineNumber": 2820
          },
          {
            "lineNumber": 2865
          },
          {
            "text": "        except Exception:",
            "lineNumber": 2866
          },
          {
            "text": "            return None",
            "lineNumber": 2867
          },
          {
            "lineNumber": 2868
          },
          {
            "text": "    def _has_replacement(",
            "lineNumber": 2869
          },
          {
            "text": "        self, package_id: str, dep: str, package_ids_set: set[str]",
            "lineNumber": 2870
          },
          {
            "text": "    ) -&gt; bool:",
            "lineNumber": 2871
          },
          {
            "text": "        # Get a list of mods that can replace this mod",
            "lineNumber": 2872
          },
          {
            "text": "        replacements = KNOWN_MOD_REPLACEMENTS.get(dep, set())",
            "lineNumber": 2873
          },
          {
            "text": "        # Return true if any of the above mods (replacements) are in the mod list",
            "lineNumber": 2874
          },
          {
            "text": "        # If no replacements exist for dep, returns false",
            "lineNumber": 2875
          },
          {
            "text": "        for replacement in replacements:",
            "lineNumber": 2876
          },
          {
            "text": "            if replacement in package_ids_set:",
            "lineNumber": 2877
          },
          {
            "text": "                logger.debug(",
            "lineNumber": 2878
          },
          {
            "text": "                    f\"Missing dependency [{dep}] for [{package_id}] replaced with [{replacement}]\"",
            "lineNumber": 2879
          },
          {
            "text": "                )",
            "lineNumber": 2880
          },
          {
            "text": "                return True",
            "lineNumber": 2881
          },
          {
            "text": "        return False",
            "lineNumber": 2882
          },
          {
            "lineNumber": 2883
          },
          {
            "text": "    def recreate_mod_list_and_sort(",
            "lineNumber": 2884
          },
          {
            "text": "        self,",
            "lineNumber": 2885
          },
          {
            "text": "        list_type: str,",
            "lineNumber": 2886
          },
          {
            "text": "        uuids: list[str],",
            "lineNumber": 2887
          },
          {
            "text": "        key: ModsPanelSortKey,",
            "lineNumber": 2888
          },
          {
            "text": "        descending: bool = False,",
            "lineNumber": 2889
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 2890
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2891
          },
          {
            "text": "        Reconstructs and sorts a mod list based on provided UUIDs and a sorting key.",
            "lineNumber": 2892
          },
          {
            "lineNumber": 2893
          },
          {
            "text": "        This method takes a list of mod UUIDs, sorts them according to the specified",
            "lineNumber": 2894
          },
          {
            "text": "        sorting key, and then recreates the mod list of the given type with the sorted order.",
            "lineNumber": 2895
          },
          {
            "lineNumber": 2896
          },
          {
            "text": "        Args:",
            "lineNumber": 2897
          },
          {
            "text": "            list_type (str): The type of mod list to recreate. (\"Active\", \"Inactive\")",
            "lineNumber": 2898
          },
          {
            "text": "            uuids (List[str]): The list of UUIDs representing the mods.",
            "lineNumber": 2899
          },
          {
            "text": "            key (ModsPanelSortKey): An enumeration value that determines the",
            "lineNumber": 2900
          },
          {
            "text": "                                     sorting criterion for the mods.",
            "lineNumber": 2901
          },
          {
            "text": "            descending (bool, optional): Whether to sort in descending order. Defaults to False.",
            "lineNumber": 2902
          },
          {
            "lineNumber": 2903
          },
          {
            "text": "        Returns:",
            "lineNumber": 2904
          },
          {
            "text": "            None",
            "lineNumber": 2905
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2906
          },
          {
            "text": "        filtering = self.settings_controller.settings.inactive_mods_sorting",
            "lineNumber": 2907
          },
          {
            "lineNumber": 2908
          },
          {
            "text": "        if filtering:",
            "lineNumber": 2909
          },
          {
            "text": "            sorted_uuids = sort_uuids(",
            "lineNumber": 2910
          },
          {
            "text": "                uuids,",
            "lineNumber": 2911
          },
          {
            "text": "                key=key,",
            "lineNumber": 2912
          },
          {
            "text": "                descending=descending,",
            "lineNumber": 2913
          },
          {
            "text": "                settings_controller=self.settings_controller,",
            "lineNumber": 2914
          },
          {
            "text": "            )",
            "lineNumber": 2915
          },
          {
            "text": "            self.recreate_mod_list(list_type, sorted_uuids, filtering=filtering)",
            "lineNumber": 2916
          },
          {
            "text": "        else:",
            "lineNumber": 2917
          },
          {
            "text": "            self.recreate_mod_list(list_type, uuids)",
            "lineNumber": 2918
          },
          {
            "lineNumber": 2919
          },
          {
            "text": "    def recreate_mod_list(",
            "lineNumber": 2920
          },
          {
            "text": "        self, list_type: str, uuids: list[str], filtering: bool = False",
            "lineNumber": 2921
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 2922
          },
          {
            "text": "        ",
            "lineNumber": 2923
          }
        ]
      },
      "score": 0.3470872640609741
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "lineNumber": 2463
          },
          {
            "lineNumber": 2464
          },
          {
            "text": "    def mod_clicked(self, current: CustomListWidgetItem) -&gt; None:",
            "lineNumber": 2465
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2466
          },
          {
            "text": "        Method to handle clicking on a row. Necessary because &#96;mod_changed_to&#96; does not",
            "lineNumber": 2467
          },
          {
            "text": "        properly handle clicking on a previous selected item after clicking on an item",
            "lineNumber": 2468
          },
          {
            "text": "        in another list. For example, clicking on item 1 in the inactive list, then on item 2",
            "lineNumber": 2469
          },
          {
            "text": "        in the active list, then back to item 1 in the inactive list-- this method makes",
            "lineNumber": 2470
          },
          {
            "text": "        it so that mod info is updated as expected.",
            "lineNumber": 2471
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2472
          },
          {
            "text": "        if current is not None:",
            "lineNumber": 2473
          },
          {
            "text": "            data = current.data(Qt.ItemDataRole.UserRole)",
            "lineNumber": 2474
          },
          {
            "text": "            self.mod_info_signal.emit(data[\"uuid\"], current)",
            "lineNumber": 2475
          },
          {
            "text": "            mod_info = self.metadata_manager.internal_local_metadata[data[\"uuid\"]]",
            "lineNumber": 2476
          },
          {
            "text": "            mod_info = flatten_to_list(mod_info)",
            "lineNumber": 2477
          },
          {
            "text": "            mod_info_pretty = json.dumps(mod_info, indent=4)",
            "lineNumber": 2478
          },
          {
            "text": "            logger.debug(",
            "lineNumber": 2479
          },
          {
            "text": "                f\"USER ACTION: mod was clicked: [{data['uuid']}] {mod_info_pretty}\"",
            "lineNumber": 2480
          },
          {
            "text": "            )",
            "lineNumber": 2481
          },
          {
            "lineNumber": 2482
          },
          {
            "text": "    def mod_double_clicked(self, item: CustomListWidgetItem) -&gt; None:",
            "lineNumber": 2483
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2484
          },
          {
            "text": "        Method to handle double clicking on a row.",
            "lineNumber": 2485
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2486
          },
          {
            "text": "        # widget = ModListItemInner = self.itemWidget(item)",
            "lineNumber": 2487
          },
          {
            "text": "        self.key_press_signal.emit(\"DoubleClick\")",
            "lineNumber": 2488
          },
          {
            "lineNumber": 2489
          },
          {
            "text": "    def rebuild_item_widget_from_uuid(self, uuid: str) -&gt; None:",
            "lineNumber": 2490
          },
          {
            "text": "        item_index = self.uuids.index(uuid)",
            "lineNumber": 2491
          }
        ]
      },
      "score": 0.34673333168029785
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\models\\metadata\\metadata_structure.py",
        "range": {
          "startPosition": {
            "line": 100
          },
          "endPosition": {
            "line": 195
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 101,
                "column": 1
              },
              "endPosition": {
                "line": 102,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModsConfig:",
            "lineNumber": 101,
            "isSignature": true
          },
          {
            "text": "@property",
            "lineNumber": 139
          },
          {
            "text": "def activeMods(self) -&gt; list[CaseInsensitiveStr]:",
            "lineNumber": 140
          },
          {
            "text": "\"\"\"",
            "lineNumber": 145
          },
          {
            "text": "        return self._activeMods[:]",
            "lineNumber": 146
          },
          {
            "lineNumber": 147
          },
          {
            "text": "    @activeMods.setter",
            "lineNumber": 148
          },
          {
            "text": "    def activeMods(self, value: list[CaseInsensitiveStr] | list[str]) -&gt; None:",
            "lineNumber": 149
          },
          {
            "text": "        \"\"\"Sets the active mods list by copying the input list and converting all elements to CaseInsensitiveStr.",
            "lineNumber": 150
          },
          {
            "lineNumber": 151
          },
          {
            "text": "        :param value: The list of active mods to set.",
            "lineNumber": 152
          },
          {
            "text": "        :type value: list[CaseInsensitiveStr] | list[str]",
            "lineNumber": 153
          },
          {
            "text": "        :raises TypeError: If the input value is not a list.",
            "lineNumber": 154
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 155
          },
          {
            "text": "        if isinstance(value, list):",
            "lineNumber": 156
          },
          {
            "text": "            self._activeMods = [CaseInsensitiveStr(i) for i in value]",
            "lineNumber": 157
          },
          {
            "text": "        else:",
            "lineNumber": 158
          },
          {
            "text": "            raise TypeError(f\"Expected list, got {type(value)}\")",
            "lineNumber": 159
          },
          {
            "lineNumber": 160
          },
          {
            "text": "    @property",
            "lineNumber": 161
          },
          {
            "text": "    def knownExpansions(self) -&gt; list[CaseInsensitiveStr]:",
            "lineNumber": 162
          },
          {
            "text": "        \"\"\"Copy of the known expansions list.",
            "lineNumber": 163
          },
          {
            "lineNumber": 164
          },
          {
            "text": "        :return: A copy of the known expansions list.",
            "lineNumber": 165
          },
          {
            "text": "        :rtype: list[CaseInsensitiveStr]",
            "lineNumber": 166
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 167
          },
          {
            "text": "        return self._knownExpansions[:]",
            "lineNumber": 168
          },
          {
            "lineNumber": 169
          },
          {
            "text": "    @knownExpansions.setter",
            "lineNumber": 170
          },
          {
            "text": "    def knownExpansions(self, value: list[CaseInsensitiveStr] | list[str]) -&gt; None:",
            "lineNumber": 171
          },
          {
            "text": "        \"\"\"Set the known expansions list by copying the input list and converting all elements to CaseInsensitiveStr.",
            "lineNumber": 172
          },
          {
            "lineNumber": 173
          },
          {
            "text": "        :param value: The list of known expansions to set.",
            "lineNumber": 174
          },
          {
            "text": "        :type value: list[CaseInsensitiveStr] | list[str]",
            "lineNumber": 175
          },
          {
            "text": "        :raises TypeError: If the input value is not a list.",
            "lineNumber": 176
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 177
          },
          {
            "text": "        if isinstance(value, list):",
            "lineNumber": 178
          },
          {
            "text": "            self._knownExpansions = [CaseInsensitiveStr(i) for i in value]",
            "lineNumber": 179
          },
          {
            "text": "        else:",
            "lineNumber": 180
          },
          {
            "text": "            raise TypeError(f\"Expected list, got {type(value)}\")",
            "lineNumber": 181
          },
          {
            "lineNumber": 182
          },
          {
            "text": "    def check_active_duplicates(self) -&gt; bool:",
            "lineNumber": 183
          },
          {
            "text": "        \"\"\"Check for duplicates in the active mods list.\"\"\"",
            "lineNumber": 184
          },
          {
            "text": "        return len(self.activeMods) != len(set(self.activeMods))",
            "lineNumber": 185
          },
          {
            "lineNumber": 186
          },
          {
            "text": "    def check_expansions_duplicates(self) -&gt; bool:",
            "lineNumber": 187
          },
          {
            "text": "        \"\"\"Check for duplicates in the known expansions list.\"\"\"",
            "lineNumber": 188
          },
          {
            "text": "        return len(self.knownExpansions) != len(set(self.knownExpansions))",
            "lineNumber": 189
          },
          {
            "lineNumber": 190
          },
          {
            "text": "    def to_dict(self) -&gt; dict[str, Any]:",
            "lineNumber": 191
          },
          {
            "text": "        return",
            "lineNumber": 192
          }
        ]
      },
      "score": 0.34503626823425293
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "lineNumber": 2488
          },
          {
            "lineNumber": 2489
          },
          {
            "text": "    def rebuild_item_widget_from_uuid(self, uuid: str) -&gt; None:",
            "lineNumber": 2490
          },
          {
            "text": "        item_index = self.uuids.index(uuid)",
            "lineNumber": 2491
          },
          {
            "text": "        item = self.item(item_index)",
            "lineNumber": 2492
          },
          {
            "text": "        logger.debug(f\"Rebuilding widget for item {uuid} at index {item_index}\")",
            "lineNumber": 2493
          },
          {
            "text": "        # Destroy the item's previous widget immediately. Recreate if the item is visible.",
            "lineNumber": 2494
          },
          {
            "text": "        widget = self.itemWidget(item)",
            "lineNumber": 2495
          },
          {
            "text": "        if widget:",
            "lineNumber": 2496
          },
          {
            "text": "            self.removeItemWidget(item)",
            "lineNumber": 2497
          },
          {
            "text": "        # If it is visible, create a new widget. Otherwise, allow lazy loading to handle this.",
            "lineNumber": 2498
          },
          {
            "text": "        if self.check_item_visible(item):",
            "lineNumber": 2499
          },
          {
            "text": "            self.create_widget_for_item(item)",
            "lineNumber": 2500
          },
          {
            "text": "        # If the current item is selected, update the info panel",
            "lineNumber": 2501
          },
          {
            "text": "        if self.currentItem() == item:",
            "lineNumber": 2502
          },
          {
            "text": "            self.mod_info_signal.emit(uuid, item)",
            "lineNumber": 2503
          },
          {
            "lineNumber": 2504
          },
          {
            "text": "    def _check_missing_dependencies(",
            "lineNumber": 2505
          },
          {
            "text": "        self, mod_data: ModMetadata, package_ids_set: set[str]",
            "lineNumber": 2506
          },
          {
            "text": "    ) -&gt; tuple[set[str], set[str]]:",
            "lineNumber": 2507
          },
          {
            "text": "        \"\"\"Check for missing dependencies and alternative dependencies.\"\"\"",
            "lineNumber": 2508
          },
          {
            "text": "        missing_deps: set[str] = set()",
            "lineNumber": 2509
          },
          {
            "text": "        alternative_deps: set[str] = set()",
            "lineNumber": 2510
          },
          {
            "text": "        consider_alternatives = self.metadata_manager.settings_controller.settings.use_alternative_package_ids_as_satisfying_dependencies",
            "lineNumber": 2511
          },
          {
            "text": "        for dep_entry in mod_data.get(\"dependencies\", []):",
            "lineNumber": 2512
          },
          {
            "text": "            alt_ids: set[str] = set()",
            "lineNumber": 2513
          },
          {
            "text": "            if",
            "lineNumber": 2514
          }
        ]
      },
      "score": 0.3444403409957886
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Reading the helper functions and widget structure:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\app\utils\schema.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\app\utils\xml.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "\\.uuids\\s*=",
  "path": "app/views",
  "caseInsensitive": false
}
```
Additional data:

```json
{
  "isPruned": true,
  "pattern": "\\.uuids\\s*=",
  "path": "app/views",
  "outputMode": "content",
  "totalFiles": 1,
  "totalMatches": 4,
  "topFiles": [
    {
      "uri": "app/views/mods_panel.py",
      "matchCount": 4
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\app\models\metadata\metadata_structure.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "class ModListWidget|def uuids|@property.*uuids",
  "path": "app/views/mods_panel.py",
  "caseInsensitive": false
}
```
Additional data:

```json
{
  "isPruned": true,
  "pattern": "class ModListWidget|def uuids|@property.*uuids",
  "path": "app/views/mods_panel.py",
  "outputMode": "content",
  "totalFiles": 1,
  "totalMatches": 1,
  "topFiles": [
    {
      "uri": "app/views/mods_panel.py",
      "matchCount": 1
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

