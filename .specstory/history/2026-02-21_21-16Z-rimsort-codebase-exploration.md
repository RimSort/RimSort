<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session 3ccb4411-cd60-408f-8186-2d347cfc9e57 (2026-02-21 21:16Z) -->

# RimSort codebase exploration (2026-02-21 21:16Z)

_**User**_

Explore the RimSort codebase at d:\DEV_Rimsort\RimSort. I need to understand:

1. The overall project structure (top-level files and directories)
2. What UI framework is used (Qt, Tkinter, etc.)
3. How the "active mod list" is implemented - find the relevant files, classes, and widgets
4. How mods are represented in the list (data model, list items)
5. Any existing separator/divider/category functionality

Return a comprehensive summary with file paths and key class/function names.

---

_**Agent (model composer-1, mode Agent)**_



---



---


Exploring the RimSort codebase. Gathering project structure and key information.


---

<tool-use data-tool-type="generic" data-tool-name="glob_file_search">
<details>
<summary>Tool use: **glob_file_search** • Searched codebase "undefined" • **127** results in **1** directory</summary>

Directory: **d:\DEV_Rimsort\RimSort** (127 files)

| File |
|------|
| `../app/models/search_result.py` |
| `../app/views/mods_panel.py` |
| `../app/utils/steam/steamfiles/wrapper.py` |
| `../app/views/mod_info_panel.py` |
| `../app/utils/zip_extractor.py` |
| `../app/controllers/menu_bar_controller.py` |
| `../app/sort/topo_sort.py` |
| `../tests/utils/test_launch_command_parser.py` |
| `../tests/windows/test_runner_panel_regex.py` |
| `../app/controllers/mods_panel_controller.py` |
| `../app/cli/__init__.py` |
| `../app/utils/external_metadata_loaders.py` |
| `../app/controllers/main_content_controller.py` |
| `../app/views/player_log_tab.py` |
| `../app/utils/git_worker.py` |
| `../app/utils/update_utils.py` |
| `../app/utils/steam/steambrowser/browser.py` |
| `../app/utils/custom_qlabels.py` |
| `../app/windows/runner_panel.py` |
| `../app/utils/win_find_steam.py` |
| `../app/utils/steam/webapi/wrapper.py` |
| `../app/views/task_progress_window.py` |
| `../app/utils/launch_command_parser.py` |
| `../app/utils/window_launch_state.py` |
| `../app/windows/duplicate_mods_panel.py` |
| `../app/utils/mod_info.py` |
| `../app/models/metadata/metadata_db.py` |
| `../tests/utils/test_generic.py` |
| `../app/models/metadata/metadata_structure.py` |
| `../app/controllers/sort_controller.py` |
| `../app/windows/ignore_json_editor.py` |
| `../app/utils/aux_db_utils.py` |
| `../app/utils/watchdog.py` |
| `../app/utils/dds_utility.py` |
| `../app/utils/xml.py` |
| `../app/__main__.py` |
| `../app/utils/todds/wrapper.py` |
| `../tests/views/test_main_content_run.py` |
| `../app/utils/db_builder_core.py` |
| `../tests/controllers/test_file_search.py` |
| `../tests/views/test_menu_bar.py` |
| `../app/views/status_panel.py` |
| `../app/windows/base_mods_panel.py` |
| `../tests/utils/test_mod_utils.py` |
| `../app/controllers/metadata_db_controller.py` |
| `../app/models/animations.py` |
| `../tests/controllers/test_metadata_db_controller.py` |
| `../app/controllers/language_controller.py` |
| `../app/utils/file_search.py` |
| `../app/controllers/app_controller.py` |
| `../app/views/deletion_menu.py` |
| `../app/views/file_search_dialog.py` |
| `../app/utils/mod_utils.py` |
| `../app/views/description_widget.py` |
| `../app/windows/missing_mod_properties_panel.py` |
| `../tests/controllers/test_language_controller.py` |
| `../app/models/metadata/metadata_mediator.py` |
| `../app/utils/files.py` |
| `../app/utils/constants.py` |
| `../app/models/settings.py` |
| `../app/controllers/settings_controller.py` |
| `../app/utils/button_factory.py` |
| `../app/controllers/theme_controller.py` |
| `../app/utils/git_utils.py` |
| `../app/cli/main.py` |
| `../app/utils/obfuscate_message.py` |
| `../app/views/dialogue.py` |
| `../tests/models/metadata/test_metadata_mediator.py` |
| `../app/utils/steam/steambrowser/js_bridge.py` |
| `../tests/views/test_dialogue.py` |
| `../app/views/troubleshooting_dialog.py` |
| `../app/utils/ignore_extensions.py` |
| `../translation_helper.py` |
| `../app/utils/csv_export_utils.py` |
| `../app/controllers/instance_controller.py` |
| `../app/cli/build_db.py` |
| `../app/views/settings_dialog.py` |
| `../tests/benchmarks/find_search_terms.py` |
| `../app/sort/alphabetical_sort.py` |
| `../tests/utils/steam/test_steam_browser_regex.py` |
| `../app/controllers/file_search_controller.py` |
| `../tests/controllers/test_metadata_controller.py` |
| `../app/models/image_label.py` |
| `../app/utils/symlink.py` |
| `../app/views/acf_log_reader.py` |
| `../distribute.py` |
| `../app/utils/exception.py` |
| `../app/utils/globals.py` |
| `../app/utils/app_info.py` |
| `../app/utils/ignore_manager.py` |
| `../app/windows/use_this_instead_panel.py` |
| `../app/sort/dependencies.py` |
| `../app/windows/rule_editor_panel.py` |
| `../app/utils/gui_info.py` |
| `../app/controllers/troubleshooting_controller.py` |
| `../app/utils/steam/steamcmd/wrapper.py` |
| `../tests/utils.py` |
| `../tests/conftest.py` |
| `../app/utils/event_bus.py` |
| `../app/models/metadata/metadata_factory.py` |
| `../app/controllers/main_window_controller.py` |
| `../app/utils/acf_utils.py` |
| `../tests/utils/test_obfuscate_message.py` |
| `../app/windows/missing_dependencies_dialog.py` |
| `../app/models/instance.py` |
| `../app/windows/missing_mods_panel.py` |
| `../app/controllers/metadata_controller.py` |
| `../tests/controllers/test_run_args_migration.py` |
| `../app/utils/generic.py` |
| `../tests/test_translation_helper.py` |
| `../app/utils/custom_list_widget_item_metadata.py` |
| `../app/utils/custom_list_widget_item.py` |
| `../app/utils/system_info.py` |
| `../app/sort/mod_sorting.py` |
| `../app/utils/steam/steamworks/wrapper.py` |
| `../app/utils/schema.py` |
| `../app/utils/metadata.py` |
| `../tests/controllers/test_troubleshooting.py` |
| `../app/utils/rentry/wrapper.py` |
| `../tests/models/metadata/test_metadata_factory.py` |
| `../tests/views/test_deletion_menu.py` |
| `../app/windows/workshop_mod_updater_panel.py` |
| `../tests/views/test_mod_info_panel.py` |
| `../tests/models/metadata/test_metadata_structure.py` |
| `../app/views/menu_bar.py` |
| `../app/views/main_content_panel.py` |
| `../app/views/main_window.py` |

</details>
</tool-use>

---

<tool-use data-tool-type="generic" data-tool-name="glob_file_search">
<details>
<summary>Tool use: **glob_file_search** • Searched codebase "undefined" • **0** result in **1** directory</summary>

Directory: **d:\DEV_Rimsort\RimSort** (0 file)

</details>
</tool-use>

---

<tool-use data-tool-type="generic" data-tool-name="glob_file_search">
<details>
<summary>Tool use: **glob_file_search** • Searched codebase "undefined" • **0** result in **1** directory</summary>

Directory: **d:\DEV_Rimsort\RimSort** (0 file)

</details>
</tool-use>

---

<tool-use data-tool-type="generic" data-tool-name="glob_file_search">
<details>
<summary>Tool use: **glob_file_search** • Searched codebase "undefined" • **0** result in **1** directory</summary>

Directory: **d:\DEV_Rimsort\RimSort** (0 file)

</details>
</tool-use>

---



---


Searching for UI framework indicators and active mod list implementation:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "from PyQt|from qtpy|import PyQt|import qtpy|QWidget|QListWidget",
  "path": "d:\\DEV_Rimsort\\RimSort",
  "caseInsensitive": true
}
```
Additional data:

```json
{
  "isPruned": true,
  "pattern": "from PyQt|from qtpy|import PyQt|import qtpy|QWidget|QListWidget",
  "path": "d:\\DEV_Rimsort\\RimSort",
  "outputMode": "content",
  "totalFiles": 26,
  "totalMatches": 275,
  "topFiles": [
    {
      "uri": "app/windows/runner_panel.py",
      "matchCount": 2
    },
    {
      "uri": "app/views/description_widget.py",
      "matchCount": 2
    },
    {
      "uri": "app/windows/base_mods_panel.py",
      "matchCount": 11
    },
    {
      "uri": "app/views/troubleshooting_dialog.py",
      "matchCount": 6
    },
    {
      "uri": "app/views/mods_panel.py",
      "matchCount": 19
    },
    {
      "uri": "app/windows/missing_dependencies_dialog.py",
      "matchCount": 4
    },
    {
      "uri": "app/views/acf_log_reader.py",
      "matchCount": 2
    },
    {
      "uri": "app/views/task_progress_window.py",
      "matchCount": 2
    },
    {
      "uri": "app/utils/custom_list_widget_item.py",
      "matchCount": 6
    },
    {
      "uri": "app/views/settings_dialog.py",
      "matchCount": 15
    },
    {
      "uri": "themes/Modern/style.qss",
      "matchCount": 20
    },
    {
      "uri": "tests/views/test_dialogue.py",
      "matchCount": 3
    },
    {
      "uri": "themes/RimPy/style.qss",
      "matchCount": 20
    },
    {
      "uri": "themes/Wood/style.qss",
      "matchCount": 20
    },
    {
      "uri": "themes/Nature/style.qss",
      "matchCount": 20
    },
    {
      "uri": "app/utils/steam/steambrowser/browser.py",
      "matchCount": 6
    },
    {
      "uri": "app/views/main_window.py",
      "matchCount": 6
    },
    {
      "uri": "themes/SunSet/style.qss",
      "matchCount": 20
    },
    {
      "uri": "app/models/animations.py",
      "matchCount": 2
    },
    {
      "uri": "app/views/dialogue.py",
      "matchCount": 19
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How is the active mod list implemented and displayed?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\utils\\metadata.py",
        "range": {
          "startPosition": {
            "line": 2237,
            "column": 17
          },
          "endPosition": {
            "line": 2379
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "def get_mods_from_list(",
            "lineNumber": 2241,
            "isSignature": true
          },
          {
            "text": "    mod_list: Union[str, list[str]],",
            "lineNumber": 2242,
            "isSignature": true
          },
          {
            "text": ") -&gt; tuple[list[str], list[str], dict[str, Any], list[str]]:",
            "lineNumber": 2243,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 2244
          },
          {
            "text": "    Given a RimWorld mods list containing a complete list of mods,",
            "lineNumber": 2245
          },
          {
            "text": "    including base game and DLC, as well as their dependencies in order,",
            "lineNumber": 2246
          },
          {
            "text": "    return a list of mods for the active list widget and a list of",
            "lineNumber": 2247
          },
          {
            "text": "    mods for the inactive list widget.",
            "lineNumber": 2248
          },
          {
            "lineNumber": 2249
          },
          {
            "text": "    :param mod_list:",
            "lineNumber": 2250
          },
          {
            "text": "        A path to an .rws/.xml style list, or a list of package ids",
            "lineNumber": 2251
          },
          {
            "text": "        OR a list of mod uuids",
            "lineNumber": 2252
          },
          {
            "text": "    :return: a tuple which contains the active mods dict, inactive mods dict,",
            "lineNumber": 2253
          },
          {
            "text": "    duplicate mods dict, and missing mods list",
            "lineNumber": 2254
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 2255
          },
          {
            "text": "    all_mods = MetadataManager.instance().internal_local_metadata",
            "lineNumber": 2256
          },
          {
            "lineNumber": 2257
          },
          {
            "text": "    active_mods_uuids: list[str] = []",
            "lineNumber": 2258
          },
          {
            "text": "    inactive_mods_uuids: list[str] = []",
            "lineNumber": 2259
          },
          {
            "text": "    duplicate_mods: dict[str, Any] = {}",
            "lineNumber": 2260
          },
          {
            "text": "    duplicates_processed = []",
            "lineNumber": 2261
          },
          {
            "text": "    missing_mods: list[str] = []",
            "lineNumber": 2262
          },
          {
            "text": "    populated_mods = []",
            "lineNumber": 2263
          },
          {
            "text": "    to_populate = []",
            "lineNumber": 2264
          },
          {
            "text": "    logger.debug(\"Started generating active and inactive mods\")",
            "lineNumber": 2265
          },
          {
            "text": "    # Calculate duplicate mods (SCHEMA: {str packageid: list[str duplicate uuids]})",
            "lineNumber": 2266
          },
          {
            "text": "    for mod_uuid, mod_data in all_mods.items():",
            "lineNumber": 2267
          },
          {
            "text": "        # Using setdefault() to initialize the dictionary and then assigning the value",
            "lineNumber": 2268
          },
          {
            "text": "        duplicate_mods.setdefault(mod_data[\"packageid\"], []).append(mod_uuid)",
            "lineNumber": 2269
          },
          {
            "text": "    # Filter out non-duplicate mods",
            "lineNumber": 2270
          },
          {
            "text": "    duplicate_mods = {k: v for k, v in duplicate_mods.items() if len(v) &gt; 1}",
            "lineNumber": 2271
          },
          {
            "text": "    # Calculate mod lists",
            "lineNumber": 2272
          },
          {
            "text": "    if isinstance(mod_list, str):",
            "lineNumber": 2273
          }
        ]
      },
      "score": 0.4408501386642456
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\main_content_panel.py",
        "range": {
          "startPosition": {
            "line": 94
          },
          "endPosition": {
            "line": 3647
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 95,
                "column": 1
              },
              "endPosition": {
                "line": 96,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainContent(QObject):",
            "lineNumber": 95,
            "isSignature": true
          },
          {
            "lineNumber": 718
          },
          {
            "lineNumber": 719
          },
          {
            "text": "    def __repopulate_lists(self, is_initial: bool = False) -&gt; None:",
            "lineNumber": 720
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 721
          },
          {
            "text": "        Get active and inactive mod lists based on the config path",
            "lineNumber": 722
          },
          {
            "text": "        and write them to the list widgets. is_initial indicates if",
            "lineNumber": 723
          },
          {
            "text": "        this function is running at app initialization. If is_initial is",
            "lineNumber": 724
          },
          {
            "text": "        true, then write the active_mods_data and inactive_mods_data to",
            "lineNumber": 725
          },
          {
            "text": "        restore variables.",
            "lineNumber": 726
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 727
          },
          {
            "text": "        logger.info(\"Repopulating mod lists\")",
            "lineNumber": 728
          },
          {
            "text": "        (",
            "lineNumber": 729
          },
          {
            "text": "            active_mods_uuids,",
            "lineNumber": 730
          },
          {
            "text": "            inactive_mods_uuids,",
            "lineNumber": 731
          },
          {
            "text": "            self.duplicate_mods,",
            "lineNumber": 732
          },
          {
            "text": "            self.missing_mods,",
            "lineNumber": 733
          },
          {
            "text": "        ) = metadata.get_mods_from_list(",
            "lineNumber": 734
          },
          {
            "text": "            mod_list=str(",
            "lineNumber": 735
          },
          {
            "text": "                (",
            "lineNumber": 736
          },
          {
            "text": "                    Path(",
            "lineNumber": 737
          },
          {
            "text": "                        self.settings_controller.settings.instances[",
            "lineNumber": 738
          },
          {
            "text": "                            self.settings_controller.settings.current_instance",
            "lineNumber": 739
          },
          {
            "text": "                        ].config_folder",
            "lineNumber": 740
          },
          {
            "text": "                    )",
            "lineNumber": 741
          },
          {
            "text": "                    / \"ModsConfig.xml\"",
            "lineNumber": 742
          },
          {
            "text": "                )",
            "lineNumber": 743
          },
          {
            "text": "            )",
            "lineNumber": 744
          },
          {
            "text": "        )",
            "lineNumber": 745
          },
          {
            "text": "        self.active_mods_uuids_last_save = active_mods_uuids",
            "lineNumber": 746
          },
          {
            "text": "        if is_initial:",
            "lineNumber": 747
          },
          {
            "text": "            logger.info(\"Caching initial active/inactive mod lists\")",
            "lineNumber": 748
          },
          {
            "text": "            self.active_mods_uuids_restore_state = active_mods_uuids",
            "lineNumber": 749
          },
          {
            "text": "            self.inactive_mods_uuids_restore_state = inactive_mods_uuids",
            "lineNumber": 750
          },
          {
            "lineNumber": 751
          },
          {
            "text": "        self._insert_data_into_lists(active_mods_uuids, inactive_mods_uuids)",
            "lineNumber": 752
          },
          {
            "lineNumber": 753
          },
          {
            "text": "    def _do_check_for_update(self) -&gt; None:",
            "lineNumber": 754
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 755
          },
          {
            "text": "        Check for RimSort updates using UpdateManager.",
            "lineNumber": 756
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 757
          },
          {
            "text": "        update_manager = UpdateManager(",
            "lineNumber": 758
          },
          {
            "text": "            self.settings_controller, self, self.mod_info_panel",
            "lineNumber": 759
          },
          {
            "text": "        )",
            "lineNumber": 760
          },
          {
            "text": "        update_manager.do_check_for_update()",
            "lineNumber": 761
          },
          {
            "lineNumber": 762
          },
          {
            "text": "    def __do_get_github_release_info(self) -&gt; dict[str, Any]:",
            "lineNumber": 763
          },
          {
            "text": "        # Parse latest release",
            "lineNumber": 764
          },
          {
            "text": "        ",
            "lineNumber": 765
          }
        ]
      },
      "score": 0.43266260623931885
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\main_content_panel.py",
        "range": {
          "startPosition": {
            "line": 94
          },
          "endPosition": {
            "line": 3647
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 95,
                "column": 1
              },
              "endPosition": {
                "line": 96,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainContent(QObject):",
            "lineNumber": 95,
            "isSignature": true
          },
          {
            "lineNumber": 525
          },
          {
            "lineNumber": 526
          },
          {
            "text": "    def _insert_data_into_lists(",
            "lineNumber": 527
          },
          {
            "text": "        self, active_mods_uuids: list[str], inactive_mods_uuids: list[str]",
            "lineNumber": 528
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 529
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 530
          },
          {
            "text": "        Insert active mods and inactive mods into respective mod list widgets.",
            "lineNumber": 531
          },
          {
            "lineNumber": 532
          },
          {
            "text": "        :param active_mods_uuids: list of active mod uuids",
            "lineNumber": 533
          },
          {
            "text": "        :param inactive_mods_uuids: list of inactive mod uuids",
            "lineNumber": 534
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 535
          },
          {
            "text": "        logger.info(",
            "lineNumber": 536
          },
          {
            "text": "            f\"Inserting mod data into active [{len(active_mods_uuids)}] and inactive [{len(inactive_mods_uuids)}] mod lists\"",
            "lineNumber": 537
          },
          {
            "text": "        )",
            "lineNumber": 538
          },
          {
            "text": "        self.mods_panel.active_mods_list.recreate_mod_list(",
            "lineNumber": 539
          },
          {
            "text": "            list_type=\"active\", uuids=active_mods_uuids",
            "lineNumber": 540
          },
          {
            "text": "        )",
            "lineNumber": 541
          },
          {
            "text": "        # Determine sort key and descending for inactive mods",
            "lineNumber": 542
          },
          {
            "text": "        if self.settings_controller.settings.inactive_mods_sorting:",
            "lineNumber": 543
          },
          {
            "text": "            # Use current UI state from the combobox and button",
            "lineNumber": 544
          },
          {
            "text": "            sort_key = ModsPanelSortKey[self.mods_panel.inactive_mods_sort_key]",
            "lineNumber": 545
          },
          {
            "text": "            descending = self.mods_panel.inactive_sort_descending",
            "lineNumber": 546
          },
          {
            "text": "        else:",
            "lineNumber": 547
          },
          {
            "text": "            sort_key = ModsPanelSortKey.FILESYSTEM_MODIFIED_TIME",
            "lineNumber": 548
          },
          {
            "text": "            descending = True",
            "lineNumber": 549
          },
          {
            "text": "        self.mods_panel.inactive_mods_list.recreate_mod_list_and_sort(",
            "lineNumber": 550
          },
          {
            "text": "            list_type=\"inactive\",",
            "lineNumber": 551
          },
          {
            "text": "            uuids=inactive_mods_uuids,",
            "lineNumber": 552
          },
          {
            "text": "            key=sort_key,",
            "lineNumber": 553
          },
          {
            "text": "            descending=descending,",
            "lineNumber": 554
          },
          {
            "text": "        )",
            "lineNumber": 555
          },
          {
            "text": "        logger.info(",
            "lineNumber": 556
          },
          {
            "text": "            f\"Finished inserting mod data into active [{len(active_mods_uuids)}] and inactive [{len(inactive_mods_uuids)}] mod lists\"",
            "lineNumber": 557
          },
          {
            "text": "        )",
            "lineNumber": 558
          },
          {
            "text": "        # Recalculate warnings for both lists",
            "lineNumber": 559
          },
          {
            "text": "        # self.mods_panel.active_mods_list.recalculate_warnings_signal.emit()",
            "lineNumber": 560
          },
          {
            "text": "        # self.mods_panel.inactive_mods_list.recalculate_warnings_signal.emit()",
            "lineNumber": 561
          },
          {
            "lineNumber": 562
          },
          {
            "text": "    def __duplicate_mods_prompt(self) -&gt; None:",
            "lineNumber": 563
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 564
          }
        ]
      },
      "score": 0.4295901656150818
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 3129
          },
          "endPosition": {
            "line": 4800
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 3130,
                "column": 1
              },
              "endPosition": {
                "line": 3131,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 3152,
                "column": 5
              },
              "endPosition": {
                "line": 3153,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModsPanel(QWidget):",
            "lineNumber": 3130,
            "isSignature": true
          },
          {
            "text": "def __init__(self, settings_controller: SettingsController) -&gt; None:",
            "lineNumber": 3183
          },
          {
            "lineNumber": 3311
          },
          {
            "text": "        self.active_mods_label.setObjectName(\"summaryValue\")",
            "lineNumber": 3312
          },
          {
            "text": "        self.active_mods_list = ModListWidget(",
            "lineNumber": 3313
          },
          {
            "text": "            list_type=\"Active\",",
            "lineNumber": 3314
          },
          {
            "text": "            settings_controller=self.settings_controller,",
            "lineNumber": 3315
          },
          {
            "text": "        )",
            "lineNumber": 3316
          },
          {
            "text": "        # Active mods search widgets",
            "lineNumber": 3317
          },
          {
            "text": "        self.active_mods_search_layout = QHBoxLayout()",
            "lineNumber": 3318
          },
          {
            "text": "        self.initialize_active_mods_search_widgets()",
            "lineNumber": 3319
          },
          {
            "lineNumber": 3320
          },
          {
            "text": "        # Add active mods widgets to layout",
            "lineNumber": 3321
          },
          {
            "text": "        self.active_panel.addWidget(self.active_mods_label)",
            "lineNumber": 3322
          },
          {
            "text": "        self.active_panel.addLayout(self.active_mods_search_layout)",
            "lineNumber": 3323
          },
          {
            "text": "        self.active_panel.addWidget(self.active_mods_list)",
            "lineNumber": 3324
          },
          {
            "lineNumber": 3325
          },
          {
            "text": "        # Add the errors summary frame below the active mods list",
            "lineNumber": 3326
          },
          {
            "text": "        self.active_panel.addWidget(self.errors_summary_frame)",
            "lineNumber": 3327
          },
          {
            "lineNumber": 3328
          },
          {
            "text": "        # Initialize inactive mods widgets",
            "lineNumber": 3329
          },
          {
            "text": "        self.inactive_mods_label = QLabel(self.tr(\"Inactive [0]\"))",
            "lineNumber": 3330
          },
          {
            "text": "        self.inactive_mods_label.setAlignment(Qt.AlignmentFlag.AlignCenter)",
            "lineNumber": 3331
          },
          {
            "text": "        self.inactive_mods_label.setObjectName(\"summaryValue\")",
            "lineNumber": 3332
          },
          {
            "text": "        self.inactive_mods_list = ModListWidget(",
            "lineNumber": 3333
          },
          {
            "text": "            list_type=\"Inactive\",",
            "lineNumber": 3334
          },
          {
            "text": "            settings_controller=self.settings_controller,",
            "lineNumber": 3335
          },
          {
            "text": "        )",
            "lineNumber": 3336
          },
          {
            "lineNumber": 3337
          },
          {
            "text": "        # Inactive mods search layout",
            "lineNumber": 3338
          },
          {
            "text": "        self.inactive_mods_search_layout = QHBoxLayout()",
            "lineNumber": 3339
          },
          {
            "text": "        self.initialize_inactive_mods_search_widgets()",
            "lineNumber": 3340
          },
          {
            "lineNumber": 3341
          },
          {
            "text": "        # Add inactive mods widgets to layout",
            "lineNumber": 3342
          },
          {
            "text": "        self.inactive_panel.addWidget(self.inactive_mods_label)",
            "lineNumber": 3343
          },
          {
            "text": "        self.inactive_panel.addLayout(self.inactive_mods_search_layout)",
            "lineNumber": 3344
          },
          {
            "text": "        self.inactive_panel.addWidget(self.inactive_mods_list)",
            "lineNumber": 3345
          },
          {
            "lineNumber": 3346
          },
          {
            "text": "        # Connect signals and slots",
            "lineNumber": 3347
          },
          {
            "text": "        self.connect_signals()",
            "lineNumber": 3348
          },
          {
            "lineNumber": 3349
          },
          {
            "text": "        # Connect to settings changed to update sort UI",
            "lineNumber": 3350
          },
          {
            "text": "        EventBus().settings_have_changed.connect(self.update_sort_ui_from_settings)",
            "lineNumber": 3351
          },
          {
            "lineNumber": 3352
          },
          {
            "text": "        # Set the main layout for the widget",
            "lineNumber": 3353
          },
          {
            "text": "        self.setLayout(self.panel)",
            "lineNumber": 3354
          },
          {
            "lineNumber": 3355
          },
          {
            "text": "        logger.debug(\"Finished ModsPanel initialization\")",
            "lineNumber": 3356
          },
          {
            "lineNumber": 3357
          },
          {
            "text": "    def initialize_active_mods_search_widgets(self) -&gt; None:",
            "lineNumber": 3358
          },
          {
            "text": "        \"\"\"Initialize widgets for active mods search layout.\"\"\"",
            "lineNumber": 3359
          }
        ]
      },
      "score": 0.41619205474853516
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\models\\metadata\\metadata_structure.py",
        "range": {
          "startPosition": {
            "line": 97,
            "column": 36
          },
          "endPosition": {
            "line": 195
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "class ModsConfig:",
            "lineNumber": 101,
            "isSignature": true
          },
          {
            "text": "    \"\"\"A class to store the mods configuration.",
            "lineNumber": 102
          },
          {
            "lineNumber": 103
          },
          {
            "text": "    Note that activeMods and knownExpansions are set up such that they are NOT mutable.",
            "lineNumber": 104
          },
          {
            "text": "    To modify them, use the provided methods which will create a new list and set it.",
            "lineNumber": 105
          },
          {
            "lineNumber": 106
          },
          {
            "text": "    This is more performance heavy but ensures that the lists are not modified outside of the class,",
            "lineNumber": 107
          },
          {
            "text": "    preventing weird issues with the lists being modified in place, especially with threading.",
            "lineNumber": 108
          },
          {
            "lineNumber": 109
          },
          {
            "text": "    Attributes:",
            "lineNumber": 110
          },
          {
            "text": "        version (str): The version of the mods configuration.",
            "lineNumber": 111
          },
          {
            "text": "        activeMods (list[CaseInsensitiveStr]): A list of active mods.",
            "lineNumber": 112
          },
          {
            "text": "        knownExpansions (list[CaseInsensitiveStr]): A list of known expansions.",
            "lineNumber": 113
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 114
          },
          {
            "lineNumber": 115
          },
          {
            "text": "    version: str",
            "lineNumber": 116
          },
          {
            "text": "    _activeMods: list[CaseInsensitiveStr]",
            "lineNumber": 117
          },
          {
            "text": "    _knownExpansions: list[CaseInsensitiveStr]",
            "lineNumber": 118
          },
          {
            "lineNumber": 119
          },
          {
            "text": "    def __init__(",
            "lineNumber": 120
          },
          {
            "text": "        self,",
            "lineNumber": 121
          },
          {
            "text": "        version: str,",
            "lineNumber": 122
          },
          {
            "text": "        activeMods: list[CaseInsensitiveStr],",
            "lineNumber": 123
          },
          {
            "text": "        knownExpansions: list[CaseInsensitiveStr],",
            "lineNumber": 124
          },
          {
            "text": "    ):",
            "lineNumber": 125
          },
          {
            "text": "        self.version = version",
            "lineNumber": 126
          },
          {
            "text": "        self.activeMods = activeMods",
            "lineNumber": 127
          },
          {
            "text": "        self.knownExpansions = knownExpansions",
            "lineNumber": 128
          },
          {
            "lineNumber": 129
          },
          {
            "text": "    def clear_active_mods(self) -&gt; None:",
            "lineNumber": 130
          },
          {
            "text": "        \"\"\"Clear the active mods list.\"\"\"",
            "lineNumber": 131
          },
          {
            "text": "        self.activeMods.clear()",
            "lineNumber": 132
          },
          {
            "lineNumber": 133
          },
          {
            "text": "    def clear_all(self) -&gt; None:",
            "lineNumber": 134
          },
          {
            "text": "        \"\"\"Clear the active mods and known expansions lists.\"\"\"",
            "lineNumber": 135
          },
          {
            "text": "        self.clear_active_mods()",
            "lineNumber": 136
          },
          {
            "text": "        self.knownExpansions.clear()",
            "lineNumber": 137
          },
          {
            "lineNumber": 138
          },
          {
            "text": "    @property",
            "lineNumber": 139
          },
          {
            "text": "    def activeMods(self) -&gt; list[CaseInsensitiveStr]:",
            "lineNumber": 140
          },
          {
            "text": "        \"\"\"Copy of the active mods list.",
            "lineNumber": 141
          },
          {
            "lineNumber": 142
          },
          {
            "text": "        :return: A copy of the active mods list.",
            "lineNumber": 143
          },
          {
            "text": "        :rtype: list[CaseInsensitiveStr]",
            "lineNumber": 144
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 145
          },
          {
            "text": "        return self._activeMods[:]",
            "lineNumber": 146
          },
          {
            "lineNumber": 147
          },
          {
            "text": "    @activeMods.setter",
            "lineNumber": 148
          },
          {
            "text": "    def activeMods(self, value: list[CaseInsensitiveStr] | list[str]) -&gt; None:",
            "lineNumber": 149
          },
          {
            "text": "        ",
            "lineNumber": 150
          }
        ]
      },
      "score": 0.4127964377403259
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\controllers\\main_window_controller.py",
        "range": {
          "startPosition": {
            "line": 13
          },
          "endPosition": {
            "line": 414
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 14,
                "column": 1
              },
              "endPosition": {
                "line": 15,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 98,
                "column": 5
              },
              "endPosition": {
                "line": 100,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainWindowController(QObject):",
            "lineNumber": 14,
            "isSignature": true
          },
          {
            "text": "def check_dependencies(self) -&gt; None:",
            "lineNumber": 98
          },
          {
            "text": "        # Get the active mods list",
            "lineNumber": 99
          },
          {
            "lineNumber": 307
          },
          {
            "lineNumber": 308
          },
          {
            "text": "                # First add any local mods to the active list",
            "lineNumber": 309
          },
          {
            "text": "                if local_mods:",
            "lineNumber": 310
          },
          {
            "text": "                    for mod_id in local_mods:",
            "lineNumber": 311
          },
          {
            "text": "                        # Find the UUID for this package ID",
            "lineNumber": 312
          },
          {
            "text": "                        for (",
            "lineNumber": 313
          },
          {
            "text": "                            uuid,",
            "lineNumber": 314
          },
          {
            "text": "                            mod_data,",
            "lineNumber": 315
          },
          {
            "text": "                        ) in self.metadata_manager.internal_local_metadata.items():",
            "lineNumber": 316
          },
          {
            "text": "                            if mod_data.get(\"packageid\") == mod_id:",
            "lineNumber": 317
          },
          {
            "text": "                                active_mods.add(uuid)",
            "lineNumber": 318
          },
          {
            "text": "                                break",
            "lineNumber": 319
          },
          {
            "lineNumber": 320
          },
          {
            "text": "                    # Update the active mods list with local mods",
            "lineNumber": 321
          },
          {
            "text": "                    self.main_window.main_content_panel.mods_panel.active_mods_list.uuids = list(",
            "lineNumber": 322
          },
          {
            "text": "                        active_mods",
            "lineNumber": 323
          },
          {
            "text": "                    )",
            "lineNumber": 324
          },
          {
            "text": "                    # Trigger list updated signal to refresh UI",
            "lineNumber": 325
          },
          {
            "text": "                    self.main_window.main_content_panel.mods_panel.list_updated_signal.emit()",
            "lineNumber": 326
          },
          {
            "lineNumber": 327
          },
          {
            "text": "                # If there are mods to download, check SteamCMD setup first",
            "lineNumber": 328
          }
        ]
      },
      "score": 0.39551985263824463
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\controllers\\file_search_controller.py",
        "range": {
          "startPosition": {
            "line": 598
          },
          "endPosition": {
            "line": 1156
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 599,
                "column": 1
              },
              "endPosition": {
                "line": 600,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class FileSearchController(QObject):",
            "lineNumber": 599,
            "isSignature": true
          },
          {
            "text": "def _get_mod_paths_from_uuids(self, uuids: list[str]) -&gt; list[str]:",
            "lineNumber": 909
          },
          {
            "lineNumber": 930
          },
          {
            "text": "        return mod_paths",
            "lineNumber": 931
          },
          {
            "lineNumber": 932
          },
          {
            "text": "    def get_specific_mod_paths(self, mod_ids: set[str]) -&gt; list[str]:",
            "lineNumber": 933
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 934
          },
          {
            "text": "        Get direct paths to specific mods based on their IDs.",
            "lineNumber": 935
          },
          {
            "lineNumber": 936
          },
          {
            "text": "        Args:",
            "lineNumber": 937
          },
          {
            "text": "            mod_ids (set[str]): Set of mod IDs.",
            "lineNumber": 938
          },
          {
            "lineNumber": 939
          },
          {
            "text": "        Returns:",
            "lineNumber": 940
          },
          {
            "text": "            List[str]: List of mod folder paths for the specified mod IDs.",
            "lineNumber": 941
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 942
          },
          {
            "text": "        if not mod_ids:",
            "lineNumber": 943
          },
          {
            "text": "            return []",
            "lineNumber": 944
          },
          {
            "lineNumber": 945
          },
          {
            "text": "        instance = self.settings.instances[self.settings.current_instance]",
            "lineNumber": 946
          },
          {
            "text": "        specific_paths = []",
            "lineNumber": 947
          },
          {
            "lineNumber": 948
          },
          {
            "text": "        # Check local folder",
            "lineNumber": 949
          },
          {
            "text": "        if instance.local_folder and instance.local_folder != \"\":",
            "lineNumber": 950
          },
          {
            "text": "            local_folder = os.path.abspath(instance.local_folder)",
            "lineNumber": 951
          },
          {
            "text": "            for mod_id in mod_ids:",
            "lineNumber": 952
          },
          {
            "text": "                mod_path = os.path.join(local_folder, mod_id)",
            "lineNumber": 953
          },
          {
            "text": "                if os.path.isdir(mod_path):",
            "lineNumber": 954
          },
          {
            "text": "                    specific_paths.append(mod_path)",
            "lineNumber": 955
          },
          {
            "lineNumber": 956
          },
          {
            "text": "        # Check workshop folder",
            "lineNumber": 957
          },
          {
            "text": "        if instance.workshop_folder and instance.workshop_folder != \"\":",
            "lineNumber": 958
          },
          {
            "text": "            workshop_folder = os.path.abspath(instance.workshop_folder)",
            "lineNumber": 959
          },
          {
            "text": "            for mod_id in mod_ids:",
            "lineNumber": 960
          },
          {
            "text": "                mod_path = os.path.join(workshop_folder, mod_id)",
            "lineNumber": 961
          },
          {
            "text": "                if os.path.isdir(mod_path):",
            "lineNumber": 962
          },
          {
            "text": "                    specific_paths.append(mod_path)",
            "lineNumber": 963
          },
          {
            "lineNumber": 964
          },
          {
            "text": "        return specific_paths",
            "lineNumber": 965
          },
          {
            "lineNumber": 966
          },
          {
            "text": "    def get_active_mods_paths(self) -&gt; list[str]:",
            "lineNumber": 967
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 968
          },
          {
            "text": "        Get direct paths to active mod folders only.",
            "lineNumber": 969
          },
          {
            "lineNumber": 970
          },
          {
            "text": "        Returns:",
            "lineNumber": 971
          },
          {
            "text": "            List[str]: List of active mod folder paths.",
            "lineNumber": 972
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 973
          },
          {
            "text": "        # Use metadata.get_mods_from_list to get active mod UUIDs",
            "lineNumber": 974
          },
          {
            "text": "        instance = self.settings.instances[self.settings.current_instance]",
            "lineNumber": 975
          },
          {
            "text": "        mod_list_path = os.path.join(instance.config_folder, \"ModsConfig.xml\")",
            "lineNumber": 976
          },
          {
            "text": "        active_uuids, _, _, _ = metadata.get_mods_from_list(mod_list_path)",
            "lineNumber": 977
          },
          {
            "text": "        logger.info(f\"Getting paths for {len(active_uuids)} active mods from mod list\")",
            "lineNumber": 978
          },
          {
            "text": "        return get_mod_paths_from_uuids(active_uuids)",
            "lineNumber": 979
          },
          {
            "lineNumber": 980
          },
          {
            "text": "    def get_inactive_mods_paths(self) -&gt; list[str]:",
            "lineNumber": 981
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 982
          }
        ]
      },
      "score": 0.3895007371902466
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\utils\\metadata.py",
        "range": {
          "startPosition": {
            "line": 2240
          },
          "endPosition": {
            "line": 2379
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 2241,
                "column": 1
              },
              "endPosition": {
                "line": 2244,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "def get_mods_from_list(",
            "lineNumber": 2241,
            "isSignature": true
          },
          {
            "text": "    mod_list: Union[str, list[str]],",
            "lineNumber": 2242,
            "isSignature": true
          },
          {
            "text": ") -&gt; tuple[list[str], list[str], dict[str, Any], list[str]]:",
            "lineNumber": 2243,
            "isSignature": true
          },
          {
            "lineNumber": 2271
          },
          {
            "text": "    # Calculate mod lists",
            "lineNumber": 2272
          },
          {
            "text": "    if isinstance(mod_list, str):",
            "lineNumber": 2273
          },
          {
            "text": "        # Handle the mod list not existing",
            "lineNumber": 2274
          },
          {
            "text": "        if not os.path.exists(mod_list):",
            "lineNumber": 2275
          },
          {
            "text": "            logger.debug(f\"Could not find mods list at: {mod_list}\")",
            "lineNumber": 2276
          },
          {
            "text": "            logger.debug(\"Creating an empty list with available expansions...\")",
            "lineNumber": 2277
          },
          {
            "text": "            metadata_manager = MetadataManager.instance()",
            "lineNumber": 2278
          },
          {
            "text": "            game_version = metadata_manager.game_version",
            "lineNumber": 2279
          },
          {
            "text": "            generated_xml = generate_rimworld_mods_list(",
            "lineNumber": 2280
          },
          {
            "text": "                game_version, [\"Ludeon.RimWorld\"]",
            "lineNumber": 2281
          },
          {
            "text": "            )",
            "lineNumber": 2282
          },
          {
            "text": "            logger.debug(f\"Saving new mods list to: {mod_list}\")",
            "lineNumber": 2283
          },
          {
            "text": "            json_to_xml_write(generated_xml, mod_list)",
            "lineNumber": 2284
          },
          {
            "text": "        # Parse the ModsConfig.xml activeMods list",
            "lineNumber": 2285
          },
          {
            "text": "        logger.info(f\"Retrieving active mods from RimWorld mod list: {mod_list}\")",
            "lineNumber": 2286
          },
          {
            "text": "        mod_data = xml_path_to_json(mod_list)",
            "lineNumber": 2287
          },
          {
            "text": "        package_ids_to_import = validate_rimworld_mods_list(mod_data)",
            "lineNumber": 2288
          },
          {
            "text": "    elif isinstance(mod_list, list):",
            "lineNumber": 2289
          },
          {
            "text": "        logger.info(\"Retrieving active mods from the provided list of package ids\")",
            "lineNumber": 2290
          },
          {
            "text": "        package_ids_to_import = mod_list",
            "lineNumber": 2291
          },
          {
            "text": "    # Parse the ModsConfig.xml data",
            "lineNumber": 2292
          },
          {
            "text": "    logger.info(\"Generating active mod list\")",
            "lineNumber": 2293
          },
          {
            "text": "    for (",
            "lineNumber": 2294
          },
          {
            "text": "        package_id",
            "lineNumber": 2295
          },
          {
            "text": "    ) in package_ids_to_import:",
            "lineNumber": 2296
          }
        ]
      },
      "score": 0.37149345874786377
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "lineNumber": 812
          },
          {
            "lineNumber": 813
          },
          {
            "text": "    def __init__(self, list_type: str, settings_controller: SettingsController) -&gt; None:",
            "lineNumber": 814
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 815
          },
          {
            "text": "        Initialize the ListWidget with a dict of mods.",
            "lineNumber": 816
          },
          {
            "text": "        Keys are the package ids and values are a dict of",
            "lineNumber": 817
          },
          {
            "text": "        mod attributes. See tags:",
            "lineNumber": 818
          },
          {
            "text": "        https://rimworldwiki.com/wiki/About.xml",
            "lineNumber": 819
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 820
          },
          {
            "text": "        logger.debug(\"Initializing ModListWidget\")",
            "lineNumber": 821
          },
          {
            "lineNumber": 822
          },
          {
            "text": "        # Cache list_type for later use",
            "lineNumber": 823
          },
          {
            "text": "        self.list_type = list_type",
            "lineNumber": 824
          },
          {
            "lineNumber": 825
          },
          {
            "text": "        # Cache MetadataManager instance",
            "lineNumber": 826
          },
          {
            "text": "        self.metadata_manager = MetadataManager.instance()",
            "lineNumber": 827
          },
          {
            "lineNumber": 828
          },
          {
            "text": "        self.settings_controller = settings_controller",
            "lineNumber": 829
          },
          {
            "lineNumber": 830
          },
          {
            "text": "        super(ModListWidget, self).__init__()",
            "lineNumber": 831
          },
          {
            "lineNumber": 832
          },
          {
            "text": "        # Track when a custom widget (ModListItemInner) is selected/not selected",
            "lineNumber": 833
          },
          {
            "text": "        self.selectionModel().selectionChanged.connect(self.on_selection_changed)",
            "lineNumber": 834
          },
          {
            "lineNumber": 835
          },
          {
            "text": "        # Allow for dragging and dropping between lists",
            "lineNumber": 836
          },
          {
            "text": "        self.setDefaultDropAction(Qt.DropAction.MoveAction)",
            "lineNumber": 837
          },
          {
            "text": "        self.setDragDropMode(QAbstractItemView.DragDropMode.DragDrop)",
            "lineNumber": 838
          },
          {
            "lineNumber": 839
          },
          {
            "text": "        # Allow for selecting and moving multiple items",
            "lineNumber": 840
          },
          {
            "text": "        self.setSelectionMode(QAbstractItemView.SelectionMode.ExtendedSelection)",
            "lineNumber": 841
          },
          {
            "lineNumber": 842
          },
          {
            "text": "        # When an item is clicked, display the mod information",
            "lineNumber": 843
          },
          {
            "text": "        self.currentItemChanged.connect(self.mod_changed_to)",
            "lineNumber": 844
          },
          {
            "text": "        self.itemClicked.connect(self.mod_clicked)",
            "lineNumber": 845
          },
          {
            "lineNumber": 846
          },
          {
            "text": "        # When an item is double clicked, move it to the opposite list",
            "lineNumber": 847
          },
          {
            "text": "        self.itemDoubleClicked.connect(self.mod_double_clicked)",
            "lineNumber": 848
          },
          {
            "lineNumber": 849
          },
          {
            "text": "        # Add an eventFilter for per mod_list_item context menu",
            "lineNumber": 850
          },
          {
            "text": "        self.installEventFilter(self)",
            "lineNumber": 851
          },
          {
            "lineNumber": 852
          },
          {
            "text": "        # Disable horizontal scroll bar",
            "lineNumber": 853
          },
          {
            "text": "        self.horizontalScrollBar().setEnabled(False)",
            "lineNumber": 854
          },
          {
            "text": "        self.horizontalScrollBar().setVisible(False)",
            "lineNumber": 855
          },
          {
            "lineNumber": 856
          },
          {
            "text": "        # Optimizes performance",
            "lineNumber": 857
          },
          {
            "text": "        # self.setUniformItemSizes(True)",
            "lineNumber": 858
          },
          {
            "lineNumber": 859
          },
          {
            "text": "        # Slot to handle item widgets when itemChanged()",
            "lineNumber": 860
          },
          {
            "text": "        self.itemChanged.connect(self.handle_item_data_changed)",
            "lineNumber": 861
          },
          {
            "lineNumber": 862
          },
          {
            "text": "        # Allow inserting custom list items",
            "lineNumber": 863
          }
        ]
      },
      "score": 0.36037659645080566
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 2268,
                "column": 5
              },
              "endPosition": {
                "line": 2269,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "lineNumber": 2307
          },
          {
            "lineNumber": 2308
          },
          {
            "text": "    def check_widgets_visible(self) -&gt; None:",
            "lineNumber": 2309
          },
          {
            "text": "        # This function checks the visibility of each item and creates a widget if the item is visible and not already setup.",
            "lineNumber": 2310
          },
          {
            "text": "        indexes = self.get_visible_indexes()",
            "lineNumber": 2311
          },
          {
            "text": "        for idx in indexes:",
            "lineNumber": 2312
          },
          {
            "text": "            item = self.item(idx)",
            "lineNumber": 2313
          },
          {
            "text": "            # Check for visible item without a widget set",
            "lineNumber": 2314
          },
          {
            "text": "            if item and self.itemWidget(item) is None:",
            "lineNumber": 2315
          },
          {
            "text": "                self.create_widget_for_item(item)",
            "lineNumber": 2316
          },
          {
            "lineNumber": 2317
          },
          {
            "text": "    def get_visible_indexes(self) -&gt; set[int]:",
            "lineNumber": 2318
          },
          {
            "text": "        \"\"\"This function returns the set of indexes for items that are currently visible in the viewport.\"\"\"",
            "lineNumber": 2319
          },
          {
            "text": "        indexes: set[int] = set()",
            "lineNumber": 2320
          },
          {
            "lineNumber": 2321
          },
          {
            "text": "        top_index = self.indexAt(self.viewport().rect().topLeft())",
            "lineNumber": 2322
          },
          {
            "text": "        if not top_index.isValid():",
            "lineNumber": 2323
          },
          {
            "text": "            return indexes",
            "lineNumber": 2324
          },
          {
            "lineNumber": 2325
          },
          {
            "text": "        row = top_index.row()",
            "lineNumber": 2326
          },
          {
            "text": "        model = self.model()",
            "lineNumber": 2327
          },
          {
            "lineNumber": 2328
          },
          {
            "text": "        while row &lt; model.rowCount():",
            "lineNumber": 2329
          },
          {
            "text": "            idx = model.index(row, 0)",
            "lineNumber": 2330
          },
          {
            "text": "            rect = self.visualRect(idx)",
            "lineNumber": 2331
          },
          {
            "text": "            if rect.top() &gt; self.viewport().height():",
            "lineNumber": 2332
          },
          {
            "text": "                break",
            "lineNumber": 2333
          },
          {
            "text": "            elif rect.bottom() &gt;= 0:",
            "lineNumber": 2334
          },
          {
            "text": "                indexes.add(row)",
            "lineNumber": 2335
          },
          {
            "lineNumber": 2336
          },
          {
            "text": "            row += 1",
            "lineNumber": 2337
          },
          {
            "lineNumber": 2338
          },
          {
            "text": "        return indexes",
            "lineNumber": 2339
          },
          {
            "text": "    ",
            "lineNumber": 2340
          },
          {
            "text": "    def handle_item_data_changed(self, item: CustomListWidgetItem) -&gt; None:",
            "lineNumber": 2341
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2342
          },
          {
            "text": "        This slot is called when an item's data changes",
            "lineNumber": 2343
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2344
          },
          {
            "text": "        widget = self.itemWidget(item)",
            "lineNumber": 2345
          },
          {
            "text": "        if widget is not None and isinstance(widget, ModListItemInner):",
            "lineNumber": 2346
          },
          {
            "text": "            widget.repolish(item)",
            "lineNumber": 2347
          },
          {
            "lineNumber": 2348
          },
          {
            "text": "    def handle_other_list_row_added(self, uuid: str) -&gt; None:",
            "lineNumber": 2349
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2350
          },
          {
            "text": "        When a mod is moved from Inactive-&gt;Active, the uuid is removed from the Inactive list.",
            "lineNumber": 2351
          },
          {
            "lineNumber": 2352
          },
          {
            "text": "        When a mod is moved from Active-&gt;Inactive, the uuid is removed from the Active list.",
            "lineNumber": 2353
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2354
          },
          {
            "text": "        if uuid in self.uuids:",
            "lineNumber": 2355
          },
          {
            "text": "            self.uuids.remove(uuid)",
            "lineNumber": 2356
          },
          {
            "lineNumber": 2357
          },
          {
            "text": "    def handle_rows_inserted(self, parent: QModelIndex, first: int, last: int) -&gt; None:",
            "lineNumber": 2358
          },
          {
            "text": "        ",
            "lineNumber": 2359
          }
        ]
      },
      "score": 0.35940760374069214
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\main_content_panel.py",
        "range": {
          "startPosition": {
            "line": 94
          },
          "endPosition": {
            "line": 3647
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 95,
                "column": 1
              },
              "endPosition": {
                "line": 96,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainContent(QObject):",
            "lineNumber": 95,
            "isSignature": true
          },
          {
            "text": "def _open_in_default_editor(self, path: Path | None) -&gt; None:",
            "lineNumber": 1830
          },
          {
            "lineNumber": 1843
          },
          {
            "text": "                ),",
            "lineNumber": 1844
          },
          {
            "text": "            )",
            "lineNumber": 1845
          },
          {
            "lineNumber": 1846
          },
          {
            "text": "    def _do_save(self) -&gt; None:",
            "lineNumber": 1847
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 1848
          },
          {
            "text": "        Method to save the current list of active mods to the selected ModsConfig.xml",
            "lineNumber": 1849
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 1850
          },
          {
            "text": "        logger.info(\"Saving current active mods to ModsConfig.xml\")",
            "lineNumber": 1851
          },
          {
            "text": "        active_mods = []",
            "lineNumber": 1852
          },
          {
            "text": "        for uuid in self.mods_panel.active_mods_list.uuids:",
            "lineNumber": 1853
          },
          {
            "text": "            package_id = self.metadata_manager.internal_local_metadata[uuid][",
            "lineNumber": 1854
          },
          {
            "text": "                \"packageid\"",
            "lineNumber": 1855
          },
          {
            "text": "            ]",
            "lineNumber": 1856
          },
          {
            "text": "            if package_id in active_mods:  # This should NOT be happening",
            "lineNumber": 1857
          },
          {
            "text": "                logger.critical(",
            "lineNumber": 1858
          },
          {
            "text": "                    f\"Tried to export more than 1 identical package ids to the same mod list. Skipping duplicate {package_id}\"",
            "lineNumber": 1859
          },
          {
            "text": "                )",
            "lineNumber": 1860
          },
          {
            "text": "                continue",
            "lineNumber": 1861
          },
          {
            "text": "            else:  # Otherwise, proceed with adding the mod package_id",
            "lineNumber": 1862
          },
          {
            "text": "                if (",
            "lineNumber": 1863
          },
          {
            "text": "                    package_id in self.duplicate_mods.keys()",
            "lineNumber": 1864
          },
          {
            "text": "                ):  # Check if mod has duplicates",
            "lineNumber": 1865
          },
          {
            "text": "                    if (",
            "lineNumber": 1866
          },
          {
            "text": "                        self.metadata_manager.internal_local_metadata[uuid][",
            "lineNumber": 1867
          },
          {
            "text": "                            \"data_source\"",
            "lineNumber": 1868
          },
          {
            "text": "                        ]",
            "lineNumber": 1869
          },
          {
            "text": "                        == \"workshop\"",
            "lineNumber": 1870
          },
          {
            "text": "                    ):",
            "lineNumber": 1871
          },
          {
            "text": "                        active_mods.append(package_id + \"_steam\")",
            "lineNumber": 1872
          },
          {
            "text": "                        continue  # Append &#96;_steam&#96; suffix if Steam mod, continue to next mod",
            "lineNumber": 1873
          },
          {
            "text": "                active_mods.append(package_id)",
            "lineNumber": 1874
          },
          {
            "text": "        active_mods_uuids, inactive_mods_uuids, _, _ = metadata.get_mods_from_list(",
            "lineNumber": 1875
          },
          {
            "text": "            mod_list=active_mods",
            "lineNumber": 1876
          },
          {
            "text": "        )",
            "lineNumber": 1877
          },
          {
            "text": "        self.active_mods_uuids_last_save = active_mods_uuids",
            "lineNumber": 1878
          },
          {
            "text": "        logger.info(f\"Collected {len(active_mods)} active mods for saving\")",
            "lineNumber": 1879
          },
          {
            "lineNumber": 1880
          },
          {
            "text": "        mods_config_data = generate_rimworld_mods_list(",
            "lineNumber": 1881
          },
          {
            "text": "            self.metadata_manager.game_version, active_mods",
            "lineNumber": 1882
          },
          {
            "text": "        )",
            "lineNumber": 1883
          },
          {
            "text": "        mods_config_path = str(",
            "lineNumber": 1884
          },
          {
            "text": "            Path",
            "lineNumber": 1885
          }
        ]
      },
      "score": 0.3566482961177826
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\acf_log_reader.py",
        "range": {
          "startPosition": {
            "line": 623,
            "column": 58
          },
          "endPosition": {
            "line": 690
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "class ActiveModDelegate(QStyledItemDelegate):",
            "lineNumber": 627,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 628
          },
          {
            "text": "    Custom cell delegate for highlighting active mods in the ACF table.",
            "lineNumber": 629
          },
          {
            "lineNumber": 630
          },
          {
            "text": "    Renders cells with bold white text on dark green background (#006400) for any mod",
            "lineNumber": 631
          },
          {
            "text": "    whose Published File ID (PFID) is present in the parent AcfLogReader's active_pfids set.",
            "lineNumber": 632
          },
          {
            "text": "    Active mods are those currently in the game's load order.",
            "lineNumber": 633
          },
          {
            "lineNumber": 634
          },
          {
            "text": "    For non-active mods, delegates to default painting.",
            "lineNumber": 635
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 636
          },
          {
            "lineNumber": 637
          },
          {
            "text": "    def __init__(self, parent: Optional[QWidget] = None) -&gt; None:",
            "lineNumber": 638
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 639
          },
          {
            "text": "        Initialize the delegate.",
            "lineNumber": 640
          },
          {
            "lineNumber": 641
          },
          {
            "text": "        Args:",
            "lineNumber": 642
          },
          {
            "text": "            parent: Parent AcfLogReader widget for accessing active_pfids set.",
            "lineNumber": 643
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 644
          },
          {
            "text": "        super().__init__(parent)",
            "lineNumber": 645
          },
          {
            "text": "        self.acf_log_reader: Optional[AcfLogReader] = cast(\"AcfLogReader\", parent)",
            "lineNumber": 646
          },
          {
            "lineNumber": 647
          },
          {
            "text": "    def paint(",
            "lineNumber": 648
          },
          {
            "text": "        self,",
            "lineNumber": 649
          },
          {
            "text": "        painter: QPainter,",
            "lineNumber": 650
          },
          {
            "text": "        option: QStyleOptionViewItem,",
            "lineNumber": 651
          },
          {
            "text": "        index: QModelIndex | QPersistentModelIndex,",
            "lineNumber": 652
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 653
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 654
          },
          {
            "text": "        Paint cell with custom styling for active mods.",
            "lineNumber": 655
          },
          {
            "lineNumber": 656
          },
          {
            "text": "        Checks if the mod's PFID is in the active_pfids set. If so, renders with",
            "lineNumber": 657
          },
          {
            "text": "        bold white text (#FFFFFF) on dark green background (#006400).",
            "lineNumber": 658
          },
          {
            "text": "        Otherwise, delegates to the default QStyledItemDelegate painting.",
            "lineNumber": 659
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 660
          },
          {
            "text": "        acf_log_reader = self.acf_log_reader",
            "lineNumber": 661
          },
          {
            "text": "        if acf_log_reader is None:",
            "lineNumber": 662
          },
          {
            "text": "            super().paint(painter, option, index)",
            "lineNumber": 663
          },
          {
            "text": "            return",
            "lineNumber": 664
          },
          {
            "lineNumber": 665
          },
          {
            "text": "        # Get PFID from model to check if mod is active",
            "lineNumber": 666
          },
          {
            "text": "        pfid_index = index.sibling(index.row(), ColumnIndex.PUBLISHED_FILE_ID.value)",
            "lineNumber": 667
          },
          {
            "text": "        pfid = acf_log_reader.editor_model.data(pfid_index, Qt.ItemDataRole.DisplayRole)",
            "lineNumber": 668
          },
          {
            "lineNumber": 669
          },
          {
            "text": "        # Highlight if this mod's PFID is in the active set",
            "lineNumber": 670
          },
          {
            "text": "        if",
            "lineNumber": 671
          }
        ]
      },
      "score": 0.3530536890029907
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\utils\\metadata.py",
        "range": {
          "startPosition": {
            "line": 2240
          },
          "endPosition": {
            "line": 2395
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 2241,
                "column": 1
              },
              "endPosition": {
                "line": 2244,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "def get_mods_from_list(",
            "lineNumber": 2241,
            "isSignature": true
          },
          {
            "text": "    mod_list: Union[str, list[str]],",
            "lineNumber": 2242,
            "isSignature": true
          },
          {
            "text": ") -&gt; tuple[list[str], list[str], dict[str, Any], list[str]]:",
            "lineNumber": 2243,
            "isSignature": true
          },
          {
            "lineNumber": 2369
          },
          {
            "text": "    logger.debug(f\"Generated active mods dict with {len(active_mods_uuids)} mods\")",
            "lineNumber": 2370
          },
          {
            "text": "    # Get the inactive mods by subtracting active mods from workshop + expansions",
            "lineNumber": 2371
          },
          {
            "text": "    logger.info(\"Generating inactive mod list\")",
            "lineNumber": 2372
          },
          {
            "text": "    inactive_mods_uuids = [",
            "lineNumber": 2373
          },
          {
            "text": "        uuid for uuid in all_mods.keys() if uuid not in active_mods_uuids",
            "lineNumber": 2374
          },
          {
            "text": "    ]",
            "lineNumber": 2375
          },
          {
            "text": "    logger.info(f\"# active mods: {len(active_mods_uuids)}\")",
            "lineNumber": 2376
          },
          {
            "text": "    logger.info(f\"# inactive mods: {len(inactive_mods_uuids)}\")",
            "lineNumber": 2377
          },
          {
            "text": "    logger.info(f\"# duplicate mods: {len(duplicate_mods)}\")",
            "lineNumber": 2378
          },
          {
            "text": "    logger.info(f\"# missing mods: {len(missing_mods)}\")",
            "lineNumber": 2379
          },
          {
            "text": "    return active_mods_uuids, inactive_mods_uuids, duplicate_mods, missing_mods",
            "lineNumber": 2380,
            "isSignature": true
          },
          {
            "lineNumber": 2381
          },
          {
            "lineNumber": 2382
          },
          {
            "text": "def log_deps_order_info(all_mods: dict[str, Any]) -&gt; None:",
            "lineNumber": 2383,
            "isSignature": true
          },
          {
            "text": "    \"\"\"This block is used quite a bit - deserves own function\"\"\"",
            "lineNumber": 2384
          }
        ]
      },
      "score": 0.35271763801574707
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\main_content_panel.py",
        "range": {
          "startPosition": {
            "line": 94
          },
          "endPosition": {
            "line": 3647
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 95,
                "column": 1
              },
              "endPosition": {
                "line": 96,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 962,
                "column": 5
              },
              "endPosition": {
                "line": 963,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainContent(QObject):",
            "lineNumber": 95,
            "isSignature": true
          },
          {
            "text": "def _do_sort(self, check_deps: bool = True) -&gt; None:",
            "lineNumber": 962
          },
          {
            "lineNumber": 985
          },
          {
            "lineNumber": 986
          },
          {
            "text": "        # Check for missing dependencies if enabled in settings and check_deps is True",
            "lineNumber": 987
          },
          {
            "text": "        if check_deps and self.settings_controller.settings.check_dependencies_on_sort:",
            "lineNumber": 988
          },
          {
            "text": "            missing_deps = self.metadata_manager.get_missing_dependencies(active_mods)",
            "lineNumber": 989
          },
          {
            "text": "            if missing_deps:",
            "lineNumber": 990
          },
          {
            "text": "                dialog = MissingDependenciesDialog()",
            "lineNumber": 991
          },
          {
            "text": "                selected_deps = dialog.show_dialog(missing_deps)",
            "lineNumber": 992
          },
          {
            "lineNumber": 993
          },
          {
            "text": "                if selected_deps:",
            "lineNumber": 994
          },
          {
            "text": "                    # Add selected mods to active mods",
            "lineNumber": 995
          },
          {
            "text": "                    for mod_id in selected_deps:",
            "lineNumber": 996
          },
          {
            "text": "                        # Find the UUID for this package ID",
            "lineNumber": 997
          },
          {
            "text": "                        for (",
            "lineNumber": 998
          },
          {
            "text": "                            uuid,",
            "lineNumber": 999
          },
          {
            "text": "                            mod_data,",
            "lineNumber": 1000
          },
          {
            "text": "                        ) in self.metadata_manager.internal_local_metadata.items():",
            "lineNumber": 1001
          },
          {
            "text": "                            if mod_data.get(\"packageid\") == mod_id:",
            "lineNumber": 1002
          },
          {
            "text": "                                if uuid not in active_mods:",
            "lineNumber": 1003
          },
          {
            "text": "                                    active_mods.add(uuid)",
            "lineNumber": 1004
          },
          {
            "text": "                                break",
            "lineNumber": 1005
          },
          {
            "lineNumber": 1006
          },
          {
            "text": "        # Get package IDs for active mods",
            "lineNumber": 1007
          },
          {
            "text": "        active_package_ids = set()",
            "lineNumber": 1008
          },
          {
            "text": "        for uuid in active_mods:",
            "lineNumber": 1009
          },
          {
            "text": "            active_package_ids.add(",
            "lineNumber": 1010
          },
          {
            "text": "                self.metadata_manager.internal_local_metadata[uuid][\"packageid\"]",
            "lineNumber": 1011
          },
          {
            "text": "            )",
            "lineNumber": 1012
          },
          {
            "lineNumber": 1013
          },
          {
            "text": "        # Get the current order of active mods list and create a copy for comparison",
            "lineNumber": 1014
          },
          {
            "text": "        current_order = active_mods",
            "lineNumber": 1015
          },
          {
            "text": "        try:",
            "lineNumber": 1016
          },
          {
            "text": "            sorter = Sorter(",
            "lineNumber": 1017
          },
          {
            "text": "                self.settings_controller.settings.sorting_algorithm",
            "lineNumber": 1018
          }
        ]
      },
      "score": 0.3508094549179077
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\main_content_panel.py",
        "range": {
          "startPosition": {
            "line": 94
          },
          "endPosition": {
            "line": 3647
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 95,
                "column": 1
              },
              "endPosition": {
                "line": 96,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainContent(QObject):",
            "lineNumber": 95,
            "isSignature": true
          },
          {
            "lineNumber": 1519
          },
          {
            "lineNumber": 1520
          },
          {
            "text": "    def _do_upload_list_rentry(self) -&gt; None:",
            "lineNumber": 1521
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 1522
          },
          {
            "text": "        Export the current list of active mods to the clipboard in a",
            "lineNumber": 1523
          },
          {
            "text": "        readable format. The current list does not need to have been saved.",
            "lineNumber": 1524
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 1525
          },
          {
            "text": "        # Define our lists",
            "lineNumber": 1526
          },
          {
            "text": "        active_mods = []",
            "lineNumber": 1527
          },
          {
            "text": "        active_mods_packageid_to_uuid = {}",
            "lineNumber": 1528
          },
          {
            "text": "        active_steam_mods_packageid_to_pfid = {}",
            "lineNumber": 1529
          },
          {
            "text": "        active_steam_mods_pfid_to_preview_url = {}",
            "lineNumber": 1530
          },
          {
            "text": "        pfids = []",
            "lineNumber": 1531
          },
          {
            "text": "        # Build our lists",
            "lineNumber": 1532
          },
          {
            "text": "        for uuid in self.mods_panel.active_mods_list.uuids:",
            "lineNumber": 1533
          },
          {
            "text": "            package_id = MetadataManager.instance().internal_local_metadata[uuid][",
            "lineNumber": 1534
          },
          {
            "text": "                \"packageid\"",
            "lineNumber": 1535
          },
          {
            "text": "            ]",
            "lineNumber": 1536
          },
          {
            "text": "            if package_id in active_mods:  # This should NOT be happening",
            "lineNumber": 1537
          },
          {
            "text": "                logger.critical(",
            "lineNumber": 1538
          },
          {
            "text": "                    \"Tried to export more than 1 identical package ids to the same mod list. \"",
            "lineNumber": 1539
          },
          {
            "text": "                    + f\"Skipping duplicate {package_id}\"",
            "lineNumber": 1540
          },
          {
            "text": "                )",
            "lineNumber": 1541
          },
          {
            "text": "                continue",
            "lineNumber": 1542
          },
          {
            "text": "            else:  # Otherwise, proceed with adding the mod package_id",
            "lineNumber": 1543
          },
          {
            "text": "                active_mods.append(package_id)",
            "lineNumber": 1544
          },
          {
            "text": "                active_mods_packageid_to_uuid[package_id] = uuid",
            "lineNumber": 1545
          },
          {
            "text": "                if (",
            "lineNumber": 1546
          },
          {
            "text": "                    self.metadata_manager.internal_local_metadata[uuid].get(\"steamcmd\")",
            "lineNumber": 1547
          },
          {
            "text": "                    or self.metadata_manager.internal_local_metadata[uuid][",
            "lineNumber": 1548
          },
          {
            "text": "                        \"data_source\"",
            "lineNumber": 1549
          },
          {
            "text": "                    ]",
            "lineNumber": 1550
          },
          {
            "text": "                    == \"workshop\"",
            "lineNumber": 1551
          },
          {
            "text": "                ) and self.metadata_manager.internal_local_metadata[uuid].get(",
            "lineNumber": 1552
          },
          {
            "text": "                    \"publishedfileid\"",
            "lineNumber": 1553
          },
          {
            "text": "                ):",
            "lineNumber": 1554
          },
          {
            "text": "                    publishedfileid = self.metadata_manager.internal_local_metadata[",
            "lineNumber": 1555
          },
          {
            "text": "                        uuid",
            "lineNumber": 1556
          },
          {
            "text": "                    ][\"publishedfileid\"]",
            "lineNumber": 1557
          },
          {
            "text": "                    active_steam_mods_packageid_to_pfid[package_id] = publishedfileid",
            "lineNumber": 1558
          },
          {
            "text": "                    pfids.append(publishedfileid)",
            "lineNumber": 1559
          },
          {
            "text": "        logger.info(f\"Collected {len(active_mods)} active mods for export\")",
            "lineNumber": 1560
          },
          {
            "text": "        if len(pfids) &gt; 0:  # No empty queries...",
            "lineNumber": 1561
          },
          {
            "text": "            # Compile list of Steam Workshop publishing preview images that correspond",
            "lineNumber": 1562
          }
        ]
      },
      "score": 0.35007715225219727
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 3129
          },
          "endPosition": {
            "line": 4800
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 3130,
                "column": 1
              },
              "endPosition": {
                "line": 3131,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModsPanel(QWidget):",
            "lineNumber": 3130,
            "isSignature": true
          },
          {
            "lineNumber": 3981
          },
          {
            "lineNumber": 3982
          },
          {
            "text": "    def apply_mods_filter_type(self, list_type: str) -&gt; None:",
            "lineNumber": 3983
          },
          {
            "text": "        # Define the mod types",
            "lineNumber": 3984
          },
          {
            "text": "        mod_types = [\"csharp\", \"xml\"]",
            "lineNumber": 3985
          },
          {
            "text": "        source_filter_index: int = (",
            "lineNumber": 3986
          },
          {
            "text": "            self.active_data_source_filter_type_index",
            "lineNumber": 3987
          },
          {
            "text": "            or self.inactive_data_source_filter_type_index",
            "lineNumber": 3988
          },
          {
            "text": "        )",
            "lineNumber": 3989
          },
          {
            "lineNumber": 3990
          },
          {
            "text": "        if list_type == \"Active\":",
            "lineNumber": 3991
          },
          {
            "text": "            button = self.active_data_source_filter_type_button",
            "lineNumber": 3992
          },
          {
            "text": "            search = self.active_mods_search",
            "lineNumber": 3993
          },
          {
            "text": "            source_index = source_filter_index",
            "lineNumber": 3994
          },
          {
            "text": "        elif list_type == \"Inactive\":",
            "lineNumber": 3995
          },
          {
            "text": "            button = self.inactive_data_source_filter_type_button",
            "lineNumber": 3996
          },
          {
            "text": "            search = self.inactive_mods_search",
            "lineNumber": 3997
          },
          {
            "text": "            source_index = source_filter_index",
            "lineNumber": 3998
          },
          {
            "text": "        else:",
            "lineNumber": 3999
          },
          {
            "text": "            raise NotImplementedError(f\"Unknown list type: {list_type}\")",
            "lineNumber": 4000
          },
          {
            "lineNumber": 4001
          },
          {
            "text": "        # Update the filter index",
            "lineNumber": 4002
          },
          {
            "text": "        if source_index &lt; (len(self.data_source_filter_type_icons) - 1):",
            "lineNumber": 4003
          },
          {
            "text": "            source_index += 1",
            "lineNumber": 4004
          },
          {
            "text": "        else:",
            "lineNumber": 4005
          },
          {
            "text": "            source_index = 0",
            "lineNumber": 4006
          },
          {
            "lineNumber": 4007
          },
          {
            "text": "        button.setIcon(self.data_source_filter_type_icons[source_index])",
            "lineNumber": 4008
          },
          {
            "text": "        button.setToolTip(self.data_source_filter_type_tooltips[source_index])",
            "lineNumber": 4009
          },
          {
            "lineNumber": 4010
          },
          {
            "text": "        # Update the relevant index for the list type",
            "lineNumber": 4011
          },
          {
            "text": "        if list_type == \"Active\":",
            "lineNumber": 4012
          },
          {
            "text": "            self.active_data_source_filter_type_index = source_index",
            "lineNumber": 4013
          },
          {
            "text": "            self.active_mods_data_source_filter_type = (",
            "lineNumber": 4014
          },
          {
            "text": "                SEARCH_DATA_SOURCE_FILTER_INDEXES[source_index]",
            "lineNumber": 4015
          },
          {
            "text": "            )",
            "lineNumber": 4016
          },
          {
            "text": "        elif list_type == \"Inactive\":",
            "lineNumber": 4017
          },
          {
            "text": "            self.inactive_data_source_filter_type_index = source_index",
            "lineNumber": 4018
          },
          {
            "text": "            self.inactive_mods_data_source_filter_type = (",
            "lineNumber": 4019
          },
          {
            "text": "                SEARCH_DATA_SOURCE_FILTER_INDEXES[source_index]",
            "lineNumber": 4020
          },
          {
            "text": "            )",
            "lineNumber": 4021
          },
          {
            "lineNumber": 4022
          },
          {
            "text": "        mod_list = (",
            "lineNumber": 4023
          },
          {
            "text": "            self.active_mods_list if list_type == \"Active\" else self.inactive_mods_list",
            "lineNumber": 4024
          },
          {
            "text": "        )",
            "lineNumber": 4025
          },
          {
            "lineNumber": 4026
          },
          {
            "text": "        # Apply filtering based on the selected type",
            "lineNumber": 4027
          }
        ]
      },
      "score": 0.34886443614959717
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 2820,
                "column": 5
              },
              "endPosition": {
                "line": 2821,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "lineNumber": 2918
          },
          {
            "lineNumber": 2919
          },
          {
            "text": "    def recreate_mod_list(",
            "lineNumber": 2920
          },
          {
            "text": "        self, list_type: str, uuids: list[str], filtering: bool = False",
            "lineNumber": 2921
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 2922
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2923
          },
          {
            "text": "        Clear all mod items and add new ones from a dict.",
            "lineNumber": 2924
          },
          {
            "lineNumber": 2925
          },
          {
            "text": "        :param mods: dict of mod data",
            "lineNumber": 2926
          },
          {
            "text": "        :param filtering: if True, UUIDs are already sorted; skip sorting",
            "lineNumber": 2927
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2928
          },
          {
            "text": "        logger.info(f\"Internally recreating {list_type} mod list\")",
            "lineNumber": 2929
          },
          {
            "text": "        # Skip sorting if UUIDs are already filtered/sorted (filtering=True)",
            "lineNumber": 2930
          },
          {
            "text": "        if not filtering:",
            "lineNumber": 2931
          },
          {
            "text": "            # Sort inactive mods using saved settings if enabled",
            "lineNumber": 2932
          },
          {
            "text": "            if (",
            "lineNumber": 2933
          },
          {
            "text": "                list_type == \"Inactive\"",
            "lineNumber": 2934
          },
          {
            "text": "                and self.settings_controller.settings.save_inactive_mods_sort_state",
            "lineNumber": 2935
          },
          {
            "text": "                and self.settings_controller.settings.inactive_mods_sorting",
            "lineNumber": 2936
          },
          {
            "text": "            ):",
            "lineNumber": 2937
          },
          {
            "text": "                sort_key = ModsPanelSortKey[",
            "lineNumber": 2938
          },
          {
            "text": "                    self.settings_controller.settings.inactive_mods_sort_key",
            "lineNumber": 2939
          },
          {
            "text": "                ]",
            "lineNumber": 2940
          },
          {
            "text": "                descending = (",
            "lineNumber": 2941
          },
          {
            "text": "                    self.settings_controller.settings.inactive_mods_sort_descending",
            "lineNumber": 2942
          },
          {
            "text": "                )",
            "lineNumber": 2943
          },
          {
            "text": "                uuids = sort_uuids(",
            "lineNumber": 2944
          },
          {
            "text": "                    uuids,",
            "lineNumber": 2945
          },
          {
            "text": "                    key=sort_key,",
            "lineNumber": 2946
          },
          {
            "text": "                    descending=descending,",
            "lineNumber": 2947
          },
          {
            "text": "                    settings_controller=self.settings_controller,",
            "lineNumber": 2948
          },
          {
            "text": "                )",
            "lineNumber": 2949
          },
          {
            "text": "            else:",
            "lineNumber": 2950
          },
          {
            "text": "                if list_type == \"Inactive\":",
            "lineNumber": 2951
          },
          {
            "text": "                    uuids = sort_uuids(",
            "lineNumber": 2952
          },
          {
            "text": "                        uuids,",
            "lineNumber": 2953
          },
          {
            "text": "                        key=ModsPanelSortKey.FILESYSTEM_MODIFIED_TIME,",
            "lineNumber": 2954
          },
          {
            "text": "                        descending=True,",
            "lineNumber": 2955
          },
          {
            "text": "                        settings_controller=self.settings_controller,",
            "lineNumber": 2956
          },
          {
            "text": "                    )",
            "lineNumber": 2957
          },
          {
            "text": "        # Disable updates and disconnect model signals during rebuild",
            "lineNumber": 2958
          },
          {
            "text": "        self.setUpdatesEnabled(False)",
            "lineNumber": 2959
          },
          {
            "text": "        # Temporarily disconnect model signals to avoid cascading updates and duplicate items",
            "lineNumber": 2960
          },
          {
            "text": "        try:",
            "lineNumber": 2961
          },
          {
            "text": "            self.model().rowsInserted.disconnect(self.handle_rows_inserted)",
            "lineNumber": 2962
          },
          {
            "text": "        except TypeError:",
            "lineNumber": 2963
          },
          {
            "text": "            pass  # Signal not connected",
            "lineNumber": 2964
          },
          {
            "text": "        try:",
            "lineNumber": 2965
          },
          {
            "text": "            self.model().rowsAboutToBeRemoved.disconnect",
            "lineNumber": 2966
          }
        ]
      },
      "score": 0.3475660979747772
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\main_content_panel.py",
        "range": {
          "startPosition": {
            "line": 94
          },
          "endPosition": {
            "line": 3647
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 95,
                "column": 1
              },
              "endPosition": {
                "line": 96,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainContent(QObject):",
            "lineNumber": 95,
            "isSignature": true
          },
          {
            "lineNumber": 960
          },
          {
            "lineNumber": 961
          },
          {
            "text": "    def _do_sort(self, check_deps: bool = True) -&gt; None:",
            "lineNumber": 962
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 963
          },
          {
            "text": "        Trigger sorting of all active mods using user-configured algorithm",
            "lineNumber": 964
          },
          {
            "text": "        &amp; all available &amp; configured metadata",
            "lineNumber": 965
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 966
          },
          {
            "text": "        # Get the live list of active and inactive mods. This is because the user",
            "lineNumber": 967
          },
          {
            "text": "        # will likely sort before saving.",
            "lineNumber": 968
          },
          {
            "text": "        logger.debug(\"Starting sorting mods\")",
            "lineNumber": 969
          },
          {
            "text": "        self.mods_panel.signal_clear_search(list_type=\"Active\")",
            "lineNumber": 970
          },
          {
            "text": "        self.mods_panel.active_mods_filter_data_source_index = len(",
            "lineNumber": 971
          },
          {
            "text": "            self.mods_panel.data_source_filter_icons",
            "lineNumber": 972
          },
          {
            "text": "        )",
            "lineNumber": 973
          },
          {
            "text": "        self.mods_panel.on_active_mods_search_data_source_filter()",
            "lineNumber": 974
          },
          {
            "text": "        self.mods_panel.signal_clear_search(list_type=\"Inactive\")",
            "lineNumber": 975
          },
          {
            "text": "        self.mods_panel.inactive_mods_filter_data_source_index = len(",
            "lineNumber": 976
          },
          {
            "text": "            self.mods_panel.data_source_filter_icons",
            "lineNumber": 977
          },
          {
            "text": "        )",
            "lineNumber": 978
          },
          {
            "text": "        self.mods_panel.on_inactive_mods_search_data_source_filter()",
            "lineNumber": 979
          },
          {
            "lineNumber": 980
          },
          {
            "text": "        # Get active mods",
            "lineNumber": 981
          },
          {
            "text": "        active_mods = set(self.mods_panel.active_mods_list.uuids)",
            "lineNumber": 982
          },
          {
            "lineNumber": 983
          },
          {
            "text": "        # Compile metadata for active mods so newly-added ones have dependency info",
            "lineNumber": 984
          },
          {
            "text": "        self.metadata_manager.compile_metadata(uuids=list(active_mods))",
            "lineNumber": 985
          },
          {
            "lineNumber": 986
          },
          {
            "text": "        # Check for missing dependencies if enabled in settings and check_deps is True",
            "lineNumber": 987
          }
        ]
      },
      "score": 0.3468360900878906
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\acf_log_reader.py",
        "range": {
          "startPosition": {
            "line": 43
          },
          "endPosition": {
            "line": 623
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 44,
                "column": 1
              },
              "endPosition": {
                "line": 45,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class AcfLogReader(BaseModsPanel):",
            "lineNumber": 44,
            "isSignature": true
          },
          {
            "lineNumber": 298
          },
          {
            "lineNumber": 299
          },
          {
            "text": "    def _apply_sort_and_enable(self) -&gt; None:",
            "lineNumber": 300
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 301
          },
          {
            "text": "        Apply default sort indicator and enable sorting mode after initial table population.",
            "lineNumber": 302
          },
          {
            "lineNumber": 303
          },
          {
            "text": "        Sets the visual sort indicator on the \"Mod Downloaded\" column in descending order.",
            "lineNumber": 304
          },
          {
            "text": "        Actual sorting is deferred to user clicks on column headers to avoid performance",
            "lineNumber": 305
          },
          {
            "text": "        impact from string-based sorting of formatted timestamps.",
            "lineNumber": 306
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 307
          },
          {
            "text": "        # Enable user-triggered sorting via column header clicks",
            "lineNumber": 308
          },
          {
            "text": "        self.editor_table_view.setSortingEnabled(True)",
            "lineNumber": 309
          },
          {
            "lineNumber": 310
          },
          {
            "text": "        # Set sort indicator on the header (rows are already in correct order)",
            "lineNumber": 311
          },
          {
            "text": "        self.editor_table_view.horizontalHeader().setSortIndicator(",
            "lineNumber": 312
          },
          {
            "text": "            self.DEFAULT_SORT_COLUMN, self.DEFAULT_SORT_ORDER",
            "lineNumber": 313
          },
          {
            "text": "        )",
            "lineNumber": 314
          },
          {
            "lineNumber": 315
          },
          {
            "text": "    def _update_active_pfids(self) -&gt; None:",
            "lineNumber": 316
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 317
          },
          {
            "text": "        Update the set of active PFIDs from active_mods_list.",
            "lineNumber": 318
          },
          {
            "lineNumber": 319
          },
          {
            "text": "        Extracts Published File IDs (PFIDs) from the UUIDs of mods currently active",
            "lineNumber": 320
          },
          {
            "text": "        in the game's load order. These PFIDs are used by ActiveModDelegate to highlight",
            "lineNumber": 321
          },
          {
            "text": "        matching rows in the table with bold white text on dark green background.",
            "lineNumber": 322
          },
          {
            "lineNumber": 323
          },
          {
            "text": "        Repaints the table viewport after updating to apply the highlighting changes.",
            "lineNumber": 324
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 325
          },
          {
            "text": "        self.active_pfids.clear()",
            "lineNumber": 326
          },
          {
            "text": "        if not self.active_mods_list:",
            "lineNumber": 327
          },
          {
            "text": "            return",
            "lineNumber": 328
          },
          {
            "lineNumber": 329
          },
          {
            "text": "        if not hasattr(self.active_mods_list, \"uuids\"):",
            "lineNumber": 330
          },
          {
            "text": "            return",
            "lineNumber": 331
          },
          {
            "lineNumber": 332
          },
          {
            "text": "        uuids = getattr(self.active_mods_list, \"uuids\", [])",
            "lineNumber": 333
          },
          {
            "text": "        for mod_uuid in uuids:",
            "lineNumber": 334
          },
          {
            "text": "            metadata = self.metadata_manager.internal_local_metadata.get(mod_uuid)",
            "lineNumber": 335
          },
          {
            "text": "            if metadata:",
            "lineNumber": 336
          },
          {
            "text": "                pfid = metadata.get(\"publishedfileid\")",
            "lineNumber": 337
          },
          {
            "text": "                if pfid:",
            "lineNumber": 338
          },
          {
            "text": "                    self.active_pfids.add(str(pfid))",
            "lineNumber": 339
          },
          {
            "lineNumber": 340
          },
          {
            "text": "        # Repaint table viewport to apply active mod highlighting",
            "lineNumber": 341
          },
          {
            "text": "        self.editor_table_view.viewport().update()",
            "lineNumber": 342
          },
          {
            "lineNumber": 343
          },
          {
            "text": "    def _populate_from_metadata(self) -&gt; None:",
            "lineNumber": 344
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 345
          }
        ]
      },
      "score": 0.3468267023563385
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\controllers\\mods_panel_controller.py",
        "range": {
          "startPosition": {
            "line": 15
          },
          "endPosition": {
            "line": 331
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 16,
                "column": 1
              },
              "endPosition": {
                "line": 17,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModsPanelController(QObject):",
            "lineNumber": 16,
            "isSignature": true
          },
          {
            "lineNumber": 236
          },
          {
            "lineNumber": 237
          },
          {
            "text": "    @Slot()",
            "lineNumber": 238
          },
          {
            "text": "    def _change_visibility_of_new_mods(self) -&gt; None:",
            "lineNumber": 239
          },
          {
            "text": "        \"\"\"When on, shows only active mods that are not in the latest save file.",
            "lineNumber": 240
          },
          {
            "lineNumber": 241
          },
          {
            "text": "        When off, shows all mods. Respects other active filters.",
            "lineNumber": 242
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 243
          },
          {
            "lineNumber": 244
          },
          {
            "text": "        # If the other labels are active, disable them",
            "lineNumber": 245
          },
          {
            "text": "        if self.warnings_label_active:",
            "lineNumber": 246
          },
          {
            "text": "            self.mods_panel.warnings_text.clicked.emit()",
            "lineNumber": 247
          },
          {
            "text": "        if self.errors_label_active:",
            "lineNumber": 248
          },
          {
            "text": "            self.mods_panel.errors_text.clicked.emit()",
            "lineNumber": 249
          },
          {
            "lineNumber": 250
          },
          {
            "text": "        self.news_label_active = not self.news_label_active",
            "lineNumber": 251
          },
          {
            "lineNumber": 252
          },
          {
            "text": "        self.__change_visibility_helper(self.news_label_active, \"new_text\")",
            "lineNumber": 253
          },
          {
            "text": "        logger.debug(\"Finished hiding mods that are in save (showing only new).\")",
            "lineNumber": 254
          },
          {
            "lineNumber": 255
          },
          {
            "text": "    def __change_visibility_helper(self, label_active: bool, type: str) -&gt; None:",
            "lineNumber": 256
          },
          {
            "text": "        active_mods = self.mods_panel.active_mods_list.get_all_mod_list_items()",
            "lineNumber": 257
          },
          {
            "text": "        for mod in active_mods:",
            "lineNumber": 258
          },
          {
            "text": "            mod_data = mod.data(Qt.ItemDataRole.UserRole)",
            "lineNumber": 259
          },
          {
            "text": "            if type == \"new_text\":",
            "lineNumber": 260
          },
          {
            "text": "                apply_filter = not bool(mod_data.__dict__.get(\"is_new\", False))",
            "lineNumber": 261
          },
          {
            "text": "            else:",
            "lineNumber": 262
          },
          {
            "text": "                apply_filter = mod_data[type] == \"\"",
            "lineNumber": 263
          },
          {
            "lineNumber": 264
          },
          {
            "text": "            # If a mod is already hidden becasue of filters, dont unhide it",
            "lineNumber": 265
          },
          {
            "text": "            if apply_filter:",
            "lineNumber": 266
          },
          {
            "text": "                if label_active:",
            "lineNumber": 267
          },
          {
            "text": "                    mod.setHidden(True)",
            "lineNumber": 268
          },
          {
            "text": "                elif not mod_data[\"hidden_by_filter\"]:",
            "lineNumber": 269
          },
          {
            "text": "                    mod.setHidden(False)",
            "lineNumber": 270
          },
          {
            "text": "        self.mods_panel.update_count(\"Active\")",
            "lineNumber": 271
          },
          {
            "text": "        self.mods_panel.active_mods_list.repaint()",
            "lineNumber": 272
          },
          {
            "text": "        self.mods_panel.active_mods_list.check_widgets_visible()",
            "lineNumber": 273
          },
          {
            "lineNumber": 274
          },
          {
            "text": "    def do_all_entries_in_aux_db_as_outdated(self) -&gt; None:",
            "lineNumber": 275
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 276
          }
        ]
      },
      "score": 0.3466741144657135
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 779,
            "column": 30
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 784
          },
          {
            "text": "    Subclass for QListWidget. Used to store lists for",
            "lineNumber": 785
          },
          {
            "text": "    active and inactive mods. Mods can be rearranged within",
            "lineNumber": 786
          },
          {
            "text": "    their own lists or moved from one list to another.",
            "lineNumber": 787
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 788
          },
          {
            "lineNumber": 789
          },
          {
            "text": "    SORT_TEXT_TO_KEY_MAP = {",
            "lineNumber": 790
          },
          {
            "text": "        \"Name\": ModsPanelSortKey.MODNAME,",
            "lineNumber": 791
          },
          {
            "text": "        \"Author\": ModsPanelSortKey.AUTHOR,",
            "lineNumber": 792
          },
          {
            "text": "        \"Modified Time\": ModsPanelSortKey.FILESYSTEM_MODIFIED_TIME,",
            "lineNumber": 793
          },
          {
            "text": "        \"Folder Size\": ModsPanelSortKey.FOLDER_SIZE,",
            "lineNumber": 794
          },
          {
            "text": "        \"Version\": ModsPanelSortKey.VERSION,",
            "lineNumber": 795
          },
          {
            "text": "        \"PackageId\": ModsPanelSortKey.PACKAGEID,",
            "lineNumber": 796
          },
          {
            "text": "        \"Color\": ModsPanelSortKey.MOD_COLOR,",
            "lineNumber": 797
          },
          {
            "text": "    }",
            "lineNumber": 798
          },
          {
            "lineNumber": 799
          },
          {
            "text": "    @staticmethod",
            "lineNumber": 800
          },
          {
            "text": "    def _text_to_sort_key(text: str) -&gt; ModsPanelSortKey:",
            "lineNumber": 801
          },
          {
            "text": "        return ModListWidget.SORT_TEXT_TO_KEY_MAP.get(text, ModsPanelSortKey.MODNAME)",
            "lineNumber": 802
          },
          {
            "lineNumber": 803
          },
          {
            "text": "    edit_rules_signal = Signal(bool, str, str)",
            "lineNumber": 804
          },
          {
            "text": "    item_added_signal = Signal(str)",
            "lineNumber": 805
          },
          {
            "text": "    key_press_signal = Signal(str)",
            "lineNumber": 806
          },
          {
            "text": "    list_update_signal = Signal(str)",
            "lineNumber": 807
          },
          {
            "text": "    mod_info_signal = Signal(str, CustomListWidgetItem)",
            "lineNumber": 808
          },
          {
            "text": "    recalculate_warnings_signal = Signal()",
            "lineNumber": 809
          },
          {
            "text": "    refresh_signal = Signal()",
            "lineNumber": 810
          },
          {
            "text": "    update_git_mods_signal = Signal(list)",
            "lineNumber": 811
          },
          {
            "text": "    steamdb_blacklist_signal = Signal(list)",
            "lineNumber": 812
          },
          {
            "lineNumber": 813
          },
          {
            "text": "    def __init__(self, list_type: str, settings_controller: SettingsController) -&gt; None:",
            "lineNumber": 814
          },
          {
            "text": "        ",
            "lineNumber": 815
          }
        ]
      },
      "score": 0.34560930728912354
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 3129
          },
          "endPosition": {
            "line": 4800
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 3130,
                "column": 1
              },
              "endPosition": {
                "line": 3131,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModsPanel(QWidget):",
            "lineNumber": 3130,
            "isSignature": true
          },
          {
            "lineNumber": 4481
          },
          {
            "lineNumber": 4482
          },
          {
            "text": "    def update_count(self, list_type: str) -&gt; None:",
            "lineNumber": 4483
          },
          {
            "text": "        # Calculate filtered items",
            "lineNumber": 4484
          },
          {
            "text": "        list_type_label = (",
            "lineNumber": 4485
          },
          {
            "text": "            self.tr(\"Active\") if list_type == \"Active\" else self.tr(\"Inactive\")",
            "lineNumber": 4486
          },
          {
            "text": "        )",
            "lineNumber": 4487
          },
          {
            "text": "        label = (",
            "lineNumber": 4488
          },
          {
            "text": "            self.active_mods_label",
            "lineNumber": 4489
          },
          {
            "text": "            if list_type == \"Active\"",
            "lineNumber": 4490
          },
          {
            "text": "            else self.inactive_mods_label",
            "lineNumber": 4491
          },
          {
            "text": "        )",
            "lineNumber": 4492
          },
          {
            "text": "        search = (",
            "lineNumber": 4493
          },
          {
            "text": "            self.active_mods_search",
            "lineNumber": 4494
          },
          {
            "text": "            if list_type == \"Active\"",
            "lineNumber": 4495
          },
          {
            "text": "            else self.inactive_mods_search",
            "lineNumber": 4496
          },
          {
            "text": "        )",
            "lineNumber": 4497
          },
          {
            "text": "        uuids = (",
            "lineNumber": 4498
          },
          {
            "text": "            self.active_mods_list.uuids",
            "lineNumber": 4499
          },
          {
            "text": "            if list_type == \"Active\"",
            "lineNumber": 4500
          },
          {
            "text": "            else self.inactive_mods_list.uuids",
            "lineNumber": 4501
          },
          {
            "text": "        )",
            "lineNumber": 4502
          },
          {
            "text": "        num_filtered = 0",
            "lineNumber": 4503
          },
          {
            "text": "        num_unfiltered = 0",
            "lineNumber": 4504
          },
          {
            "text": "        for idx in range(len(uuids)):",
            "lineNumber": 4505
          },
          {
            "text": "            item = (",
            "lineNumber": 4506
          },
          {
            "text": "                self.active_mods_list.item(idx)",
            "lineNumber": 4507
          },
          {
            "text": "                if list_type == \"Active\"",
            "lineNumber": 4508
          },
          {
            "text": "                else self.inactive_mods_list.item(idx)",
            "lineNumber": 4509
          },
          {
            "text": "            )",
            "lineNumber": 4510
          },
          {
            "text": "            if item is None:",
            "lineNumber": 4511
          },
          {
            "text": "                continue",
            "lineNumber": 4512
          },
          {
            "text": "            item_data = item.data(Qt.ItemDataRole.UserRole)",
            "lineNumber": 4513
          },
          {
            "text": "            item_filtered = item_data[\"filtered\"]",
            "lineNumber": 4514
          },
          {
            "lineNumber": 4515
          },
          {
            "text": "            if item.isHidden() or item_filtered:",
            "lineNumber": 4516
          },
          {
            "text": "                num_filtered += 1",
            "lineNumber": 4517
          },
          {
            "text": "            else:",
            "lineNumber": 4518
          },
          {
            "text": "                num_unfiltered += 1",
            "lineNumber": 4519
          },
          {
            "text": "        if search.text():",
            "lineNumber": 4520
          },
          {
            "text": "            label.setText(",
            "lineNumber": 4521
          },
          {
            "text": "                f\"{list_type_label} [{num_unfiltered}/{num_filtered + num_unfiltered}]\"",
            "lineNumber": 4522
          },
          {
            "text": "            )",
            "lineNumber": 4523
          },
          {
            "text": "        elif num_filtered &gt; 0:",
            "lineNumber": 4524
          },
          {
            "text": "            # If any filter is active, show how many mods are displayed out of total",
            "lineNumber": 4525
          },
          {
            "text": "            label.setText(",
            "lineNumber": 4526
          },
          {
            "text": "                f\"{list_type_label} [{num_unfiltered}/{num_filtered + num_unfiltered}]\"",
            "lineNumber": 4527
          },
          {
            "text": "            )",
            "lineNumber": 4528
          },
          {
            "text": "        else:",
            "lineNumber": 4529
          },
          {
            "text": "            label.setText(f\"{list_type_label} [{num_filtered + num_unfiltered}]\")",
            "lineNumber": 4530
          },
          {
            "lineNumber": 4531
          },
          {
            "text": "    def _on_toggle_translation_status(self, enabled: bool) -&gt; None:",
            "lineNumber": 4532
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 4533
          }
        ]
      },
      "score": 0.3451947569847107
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\main_content_panel.py",
        "range": {
          "startPosition": {
            "line": 94
          },
          "endPosition": {
            "line": 3647
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 95,
                "column": 1
              },
              "endPosition": {
                "line": 96,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 829,
                "column": 5
              },
              "endPosition": {
                "line": 830,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainContent(QObject):",
            "lineNumber": 95,
            "isSignature": true
          },
          {
            "text": "def _do_clear(self) -&gt; None:",
            "lineNumber": 903
          },
          {
            "lineNumber": 927
          },
          {
            "text": "        ]",
            "lineNumber": 928
          },
          {
            "text": "        # If user wants Clear to also move DLC, only keep the base game in Active",
            "lineNumber": 929
          },
          {
            "text": "        if self.settings_controller.settings.clear_moves_dlc and package_id_order:",
            "lineNumber": 930
          },
          {
            "text": "            package_ids_to_keep_active = [package_id_order[0]]  # Base game only",
            "lineNumber": 931
          },
          {
            "text": "        else:",
            "lineNumber": 932
          },
          {
            "text": "            package_ids_to_keep_active = package_id_order",
            "lineNumber": 933
          },
          {
            "text": "        # Create a set of all package IDs from mod_data",
            "lineNumber": 934
          },
          {
            "text": "        package_ids_set = set(",
            "lineNumber": 935
          },
          {
            "text": "            mod_data[\"packageid\"]",
            "lineNumber": 936
          },
          {
            "text": "            for mod_data in self.metadata_manager.internal_local_metadata.values()",
            "lineNumber": 937
          },
          {
            "text": "        )",
            "lineNumber": 938
          },
          {
            "text": "        # Iterate over the package IDs we want to keep active",
            "lineNumber": 939
          },
          {
            "text": "        for package_id in package_ids_to_keep_active:",
            "lineNumber": 940
          },
          {
            "text": "            if package_id in package_ids_set:",
            "lineNumber": 941
          },
          {
            "text": "                # Append the UUIDs to active_mods_uuids if the package ID exists in mod_data",
            "lineNumber": 942
          },
          {
            "text": "                active_mods_uuids.extend(",
            "lineNumber": 943
          },
          {
            "text": "                    uuid",
            "lineNumber": 944
          },
          {
            "text": "                    for uuid, mod_data in self.metadata_manager.internal_local_metadata.items()",
            "lineNumber": 945
          },
          {
            "text": "                    if mod_data[\"data_source\"] == \"expansion\"",
            "lineNumber": 946
          },
          {
            "text": "                    and mod_data[\"packageid\"] == package_id",
            "lineNumber": 947
          },
          {
            "text": "                )",
            "lineNumber": 948
          },
          {
            "text": "        # Append the remaining UUIDs to inactive_mods_uuids",
            "lineNumber": 949
          },
          {
            "text": "        inactive_mods_uuids.extend(",
            "lineNumber": 950
          },
          {
            "text": "            uuid",
            "lineNumber": 951
          },
          {
            "text": "            for uuid in self.metadata_manager.internal_local_metadata.keys()",
            "lineNumber": 952
          },
          {
            "text": "            if uuid not in active_mods_uuids",
            "lineNumber": 953
          },
          {
            "text": "        )",
            "lineNumber": 954
          },
          {
            "text": "        # Disable widgets while inserting",
            "lineNumber": 955
          },
          {
            "text": "        self.disable_enable_widgets_signal.emit(False)",
            "lineNumber": 956
          },
          {
            "text": "        # Insert data into lists",
            "lineNumber": 957
          },
          {
            "text": "        self._insert_data_into_lists(active_mods_uuids, inactive_mods_uuids)",
            "lineNumber": 958
          },
          {
            "text": "        # Re-enable widgets after inserting",
            "lineNumber": 959
          },
          {
            "text": "        self.disable_enable_widgets_signal.emit(True)",
            "lineNumber": 960
          },
          {
            "lineNumber": 961
          },
          {
            "text": "    def _do_sort(self, check_deps: bool = True) -&gt; None:",
            "lineNumber": 962
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 963
          }
        ]
      },
      "score": 0.3441735506057739
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\main_content_panel.py",
        "range": {
          "startPosition": {
            "line": 94
          },
          "endPosition": {
            "line": 3647
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 95,
                "column": 1
              },
              "endPosition": {
                "line": 96,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 417,
                "column": 5
              },
              "endPosition": {
                "line": 418,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainContent(QObject):",
            "lineNumber": 95,
            "isSignature": true
          },
          {
            "text": "def __handle_active_mod_key_press(self, key: str) -&gt; None:",
            "lineNumber": 417
          },
          {
            "lineNumber": 430
          },
          {
            "text": "        if key == \"Left\":",
            "lineNumber": 431
          },
          {
            "text": "            iml.setFocus()",
            "lineNumber": 432
          },
          {
            "text": "            if not iml.selectedIndexes():",
            "lineNumber": 433
          },
          {
            "text": "                iml.setCurrentRow(self.___get_relative_middle(iml))",
            "lineNumber": 434
          },
          {
            "text": "            selected_items = iml.selectedItems()",
            "lineNumber": 435
          },
          {
            "text": "            if not selected_items:",
            "lineNumber": 436
          },
          {
            "text": "                return",
            "lineNumber": 437
          },
          {
            "text": "            item = selected_items[0]",
            "lineNumber": 438
          },
          {
            "text": "            data = item.data(Qt.ItemDataRole.UserRole)",
            "lineNumber": 439
          },
          {
            "text": "            uuid = data[\"uuid\"]",
            "lineNumber": 440
          },
          {
            "text": "            self.__mod_list_slot(uuid, cast(CustomListWidgetItem, item))",
            "lineNumber": 441
          },
          {
            "lineNumber": 442
          },
          {
            "text": "        elif key == \"Return\" or key == \"Space\" or key == \"DoubleClick\":",
            "lineNumber": 443
          },
          {
            "text": "            # TODO: graphical bug where if you hold down the key, items are",
            "lineNumber": 444
          },
          {
            "text": "            # inserted too quickly and become empty items",
            "lineNumber": 445
          },
          {
            "lineNumber": 446
          },
          {
            "text": "            items_to_move = aml.selectedItems().copy()",
            "lineNumber": 447
          },
          {
            "text": "            if items_to_move:",
            "lineNumber": 448
          },
          {
            "text": "                first_selected = sorted(aml.row(i) for i in items_to_move)[0]",
            "lineNumber": 449
          },
          {
            "lineNumber": 450
          },
          {
            "text": "                # Remove items from current list",
            "lineNumber": 451
          },
          {
            "text": "                for item in items_to_move:",
            "lineNumber": 452
          },
          {
            "text": "                    data = item.data(Qt.ItemDataRole.UserRole)",
            "lineNumber": 453
          },
          {
            "text": "                    uuid = data[\"uuid\"]",
            "lineNumber": 454
          },
          {
            "text": "                    aml.uuids.remove(uuid)",
            "lineNumber": 455
          },
          {
            "text": "                    aml.takeItem(aml.row(item))",
            "lineNumber": 456
          },
          {
            "text": "                if aml.count():",
            "lineNumber": 457
          },
          {
            "text": "                    if aml.count() == first_selected:",
            "lineNumber": 458
          },
          {
            "text": "                        aml.setCurrentRow(aml.count() - 1)",
            "lineNumber": 459
          },
          {
            "text": "                    else:",
            "lineNumber": 460
          },
          {
            "text": "                        aml.setCurrentRow(first_selected)",
            "lineNumber": 461
          },
          {
            "lineNumber": 462
          },
          {
            "text": "                # Insert items into other list",
            "lineNumber": 463
          },
          {
            "text": "                if not iml.selectedIndexes():",
            "lineNumber": 464
          },
          {
            "text": "                    count = self.___get_relative_middle(iml)",
            "lineNumber": 465
          },
          {
            "text": "                else:",
            "lineNumber": 466
          },
          {
            "text": "                    count = iml.row(iml.selectedItems()[-1]) + 1",
            "lineNumber": 467
          },
          {
            "text": "                for item in items_to_move:",
            "lineNumber": 468
          },
          {
            "text": "                    iml.insertItem(count, item)",
            "lineNumber": 469
          },
          {
            "text": "                    count += 1",
            "lineNumber": 470
          },
          {
            "text": "        # List error/warnings are automatically recalculated when a mod is inserted/removed from a list",
            "lineNumber": 471
          },
          {
            "lineNumber": 472
          },
          {
            "text": "    def __handle_inactive_mod_key_press(self, key: str) -&gt; None:",
            "lineNumber": 473
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 474
          }
        ]
      },
      "score": 0.34115904569625854
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\models\\metadata\\metadata_structure.py",
        "range": {
          "startPosition": {
            "line": 100
          },
          "endPosition": {
            "line": 195
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 101,
                "column": 1
              },
              "endPosition": {
                "line": 102,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModsConfig:",
            "lineNumber": 101,
            "isSignature": true
          },
          {
            "text": "@property",
            "lineNumber": 139
          },
          {
            "text": "def activeMods(self) -&gt; list[CaseInsensitiveStr]:",
            "lineNumber": 140
          },
          {
            "text": "\"\"\"",
            "lineNumber": 145
          },
          {
            "text": "        return self._activeMods[:]",
            "lineNumber": 146
          },
          {
            "lineNumber": 147
          },
          {
            "text": "    @activeMods.setter",
            "lineNumber": 148
          },
          {
            "text": "    def activeMods(self, value: list[CaseInsensitiveStr] | list[str]) -&gt; None:",
            "lineNumber": 149
          },
          {
            "text": "        \"\"\"Sets the active mods list by copying the input list and converting all elements to CaseInsensitiveStr.",
            "lineNumber": 150
          },
          {
            "lineNumber": 151
          },
          {
            "text": "        :param value: The list of active mods to set.",
            "lineNumber": 152
          },
          {
            "text": "        :type value: list[CaseInsensitiveStr] | list[str]",
            "lineNumber": 153
          },
          {
            "text": "        :raises TypeError: If the input value is not a list.",
            "lineNumber": 154
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 155
          },
          {
            "text": "        if isinstance(value, list):",
            "lineNumber": 156
          },
          {
            "text": "            self._activeMods = [CaseInsensitiveStr(i) for i in value]",
            "lineNumber": 157
          },
          {
            "text": "        else:",
            "lineNumber": 158
          },
          {
            "text": "            raise TypeError(f\"Expected list, got {type(value)}\")",
            "lineNumber": 159
          },
          {
            "lineNumber": 160
          },
          {
            "text": "    @property",
            "lineNumber": 161
          },
          {
            "text": "    def knownExpansions(self) -&gt; list[CaseInsensitiveStr]:",
            "lineNumber": 162
          },
          {
            "text": "        \"\"\"Copy of the known expansions list.",
            "lineNumber": 163
          },
          {
            "lineNumber": 164
          },
          {
            "text": "        :return: A copy of the known expansions list.",
            "lineNumber": 165
          },
          {
            "text": "        :rtype: list[CaseInsensitiveStr]",
            "lineNumber": 166
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 167
          },
          {
            "text": "        return self._knownExpansions[:]",
            "lineNumber": 168
          },
          {
            "lineNumber": 169
          },
          {
            "text": "    @knownExpansions.setter",
            "lineNumber": 170
          },
          {
            "text": "    def knownExpansions(self, value: list[CaseInsensitiveStr] | list[str]) -&gt; None:",
            "lineNumber": 171
          },
          {
            "text": "        \"\"\"Set the known expansions list by copying the input list and converting all elements to CaseInsensitiveStr.",
            "lineNumber": 172
          },
          {
            "lineNumber": 173
          },
          {
            "text": "        :param value: The list of known expansions to set.",
            "lineNumber": 174
          },
          {
            "text": "        :type value: list[CaseInsensitiveStr] | list[str]",
            "lineNumber": 175
          },
          {
            "text": "        :raises TypeError: If the input value is not a list.",
            "lineNumber": 176
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 177
          },
          {
            "text": "        if isinstance(value, list):",
            "lineNumber": 178
          },
          {
            "text": "            self._knownExpansions = [CaseInsensitiveStr(i) for i in value]",
            "lineNumber": 179
          },
          {
            "text": "        else:",
            "lineNumber": 180
          },
          {
            "text": "            raise TypeError(f\"Expected list, got {type(value)}\")",
            "lineNumber": 181
          },
          {
            "lineNumber": 182
          },
          {
            "text": "    def check_active_duplicates(self) -&gt; bool:",
            "lineNumber": 183
          },
          {
            "text": "        \"\"\"Check for duplicates in the active mods list.\"\"\"",
            "lineNumber": 184
          },
          {
            "text": "        return len(self.activeMods) != len(set(self.activeMods))",
            "lineNumber": 185
          },
          {
            "lineNumber": 186
          },
          {
            "text": "    def check_expansions_duplicates(self) -&gt; bool:",
            "lineNumber": 187
          },
          {
            "text": "        \"\"\"Check for duplicates in the known expansions list.\"\"\"",
            "lineNumber": 188
          },
          {
            "text": "        return len(self.knownExpansions) != len(set(self.knownExpansions))",
            "lineNumber": 189
          },
          {
            "lineNumber": 190
          },
          {
            "text": "    def to_dict(self) -&gt; dict[str, Any]:",
            "lineNumber": 191
          },
          {
            "text": "        return",
            "lineNumber": 192
          }
        ]
      },
      "score": 0.34036219120025635
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How are mods represented as data models or list items?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\models\\metadata\\metadata_structure.py",
        "range": {
          "startPosition": {
            "line": 231,
            "column": 81
          },
          "endPosition": {
            "line": 364
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "@dataclass",
            "lineNumber": 235
          },
          {
            "text": "class ListedMod(BaseMod):",
            "lineNumber": 236,
            "isSignature": true
          },
          {
            "text": "    \"\"\"A mod which can be displayed in a list.",
            "lineNumber": 237
          },
          {
            "lineNumber": 238
          },
          {
            "text": "    Includes the minimum required fields for a mod to be displayed in a list.",
            "lineNumber": 239
          },
          {
            "lineNumber": 240
          },
          {
            "text": "    Attributes:",
            "lineNumber": 241
          },
          {
            "text": "        valid (bool): Whether the mod is considered valid by RimSort.",
            "lineNumber": 242
          },
          {
            "text": "        description (str): A description of the mod.",
            "lineNumber": 243
          },
          {
            "text": "        supported_versions (set[str]): A set of supported RimWorld versions.",
            "lineNumber": 244
          },
          {
            "text": "        description (str): A description of the mod.",
            "lineNumber": 245
          },
          {
            "text": "        mod_path (Path | None): The path to the mod on disk.",
            "lineNumber": 246
          },
          {
            "text": "        mod_folder (str | None): The folder name of the mod path.",
            "lineNumber": 247
          },
          {
            "text": "        internal_time_touched (int): The last modified time of the mod's path. If the path does not exist, -1 is returned.",
            "lineNumber": 248
          },
          {
            "text": "        mod_type (ModType): The type of the mod.",
            "lineNumber": 249
          },
          {
            "text": "        uuid (str): The internal unique identifier for the mod.",
            "lineNumber": 250
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 251
          },
          {
            "lineNumber": 252
          },
          {
            "text": "    valid: bool = True",
            "lineNumber": 253
          },
          {
            "lineNumber": 254
          },
          {
            "text": "    supported_versions: set[str] = field(default_factory=set)",
            "lineNumber": 255
          },
          {
            "text": "    description: str = (",
            "lineNumber": 256
          },
          {
            "text": "        \"This mod is considered invalid by RimSort (and the RimWorld game).\"",
            "lineNumber": 257
          },
          {
            "text": "        + \"\\n\\nThis mod does NOT contain an ./About/About.xml and is likely leftover from previous usage.\"",
            "lineNumber": 258
          },
          {
            "text": "        + \"\\n\\nThis can happen sometimes with Steam mods if there are leftover .dds textures or unexpected data.\"",
            "lineNumber": 259
          },
          {
            "text": "    )",
            "lineNumber": 260
          },
          {
            "lineNumber": 261
          },
          {
            "text": "    _mod_path: Path | None = None",
            "lineNumber": 262
          },
          {
            "text": "    _mod_type: ModType = ModType.UNKNOWN",
            "lineNumber": 263
          },
          {
            "lineNumber": 264
          },
          {
            "text": "    @property",
            "lineNumber": 265
          },
          {
            "text": "    def mod_path(self) -&gt; Path | None:",
            "lineNumber": 266
          },
          {
            "text": "        return self._mod_path",
            "lineNumber": 267
          },
          {
            "lineNumber": 268
          },
          {
            "text": "    @mod_path.setter",
            "lineNumber": 269
          },
          {
            "text": "    def mod_path(self, path: Path) -&gt; None:",
            "lineNumber": 270
          },
          {
            "text": "        \"\"\"Set the mod path for the mod.",
            "lineNumber": 271
          },
          {
            "text": "        Can only be set once as this acts as the uuid when set.",
            "lineNumber": 272
          },
          {
            "text": "        Raises an exception if the path is already set.",
            "lineNumber": 273
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 274
          },
          {
            "text": "        if self._mod_path:",
            "lineNumber": 275
          },
          {
            "text": "            raise ValueError(\"Mod path already set. Cannot override.\")",
            "lineNumber": 276
          },
          {
            "text": "        self._mod_path = path",
            "lineNumber": 277
          },
          {
            "lineNumber": 278
          },
          {
            "text": "        if hasattr(self, \"published_file_id\"):",
            "lineNumber": 279
          },
          {
            "text": "            del self.published_file_id",
            "lineNumber": 280
          },
          {
            "lineNumber": 281
          },
          {
            "text": "    @property",
            "lineNumber": 282
          },
          {
            "text": "    def mod_folder(self) -&gt; str | None:",
            "lineNumber": 283
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 284
          }
        ]
      },
      "score": 0.43295496702194214
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\utils\\mod_info.py",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 203
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "from dataclasses import dataclass",
            "lineNumber": 1
          },
          {
            "text": "from typing import Any",
            "lineNumber": 2
          },
          {
            "lineNumber": 3
          },
          {
            "text": "from loguru import logger",
            "lineNumber": 4
          },
          {
            "lineNumber": 5
          },
          {
            "text": "from app.utils.generic import format_time_display",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "# Module-level constants for better access",
            "lineNumber": 8
          },
          {
            "text": "UNKNOWN = \"Unknown\"",
            "lineNumber": 9
          },
          {
            "text": "STEAM_CMD = \"SteamCMD\"",
            "lineNumber": 10
          },
          {
            "text": "STEAM = \"Steam\"",
            "lineNumber": 11
          },
          {
            "text": "LOCAL = \"Local\"",
            "lineNumber": 12
          },
          {
            "text": "DATABASE = \"database\"",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "lineNumber": 15
          },
          {
            "text": "@dataclass",
            "lineNumber": 16
          },
          {
            "text": "class ModInfo:",
            "lineNumber": 17,
            "isSignature": true
          },
          {
            "text": "    \"\"\"Standardized mod information structure.\"\"\"",
            "lineNumber": 18
          },
          {
            "lineNumber": 19
          },
          {
            "text": "    uuid: str | None",
            "lineNumber": 20
          },
          {
            "text": "    name: str",
            "lineNumber": 21
          },
          {
            "text": "    authors: str",
            "lineNumber": 22
          },
          {
            "text": "    packageid: str",
            "lineNumber": 23
          },
          {
            "text": "    published_file_id: str",
            "lineNumber": 24
          },
          {
            "text": "    supported_versions: str",
            "lineNumber": 25
          },
          {
            "text": "    source: str",
            "lineNumber": 26
          },
          {
            "text": "    path: str",
            "lineNumber": 27
          },
          {
            "text": "    downloaded_time_raw: float | None",
            "lineNumber": 28
          },
          {
            "text": "    updated_time_raw: float | None",
            "lineNumber": 29
          },
          {
            "text": "    workshop_url: str",
            "lineNumber": 30
          },
          {
            "text": "    type: str  # Type of mod (e.g., \"Original\", \"Replacement\")",
            "lineNumber": 31
          },
          {
            "text": "    installed_status: str  # Installation status (e.g., \"Installed\", \"Not Installed\")",
            "lineNumber": 32
          },
          {
            "lineNumber": 33
          },
          {
            "text": "    def __post_init__(self) -&gt; None:",
            "lineNumber": 34
          },
          {
            "text": "        \"\"\"Validate required fields after initialization.\"\"\"",
            "lineNumber": 35
          },
          {
            "text": "        if not self.packageid or not self.packageid.strip():",
            "lineNumber": 36
          },
          {
            "text": "            raise ValueError(\"packageid cannot be empty or whitespace-only\")",
            "lineNumber": 37
          },
          {
            "text": "        if not self.name or not self.name.strip():",
            "lineNumber": 38
          },
          {
            "text": "            self.name = UNKNOWN  # Set to UNKNOWN if empty, but allow it",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "    @classmethod",
            "lineNumber": 41
          },
          {
            "text": "    def from_metadata(cls, uuid: str | None, metadata: dict[str, Any]) -&gt; \"ModInfo\":",
            "lineNumber": 42
          },
          {
            "text": "        ",
            "lineNumber": 43
          }
        ]
      },
      "score": 0.42292964458465576
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "lineNumber": 812
          },
          {
            "lineNumber": 813
          },
          {
            "text": "    def __init__(self, list_type: str, settings_controller: SettingsController) -&gt; None:",
            "lineNumber": 814
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 815
          },
          {
            "text": "        Initialize the ListWidget with a dict of mods.",
            "lineNumber": 816
          },
          {
            "text": "        Keys are the package ids and values are a dict of",
            "lineNumber": 817
          },
          {
            "text": "        mod attributes. See tags:",
            "lineNumber": 818
          },
          {
            "text": "        https://rimworldwiki.com/wiki/About.xml",
            "lineNumber": 819
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 820
          },
          {
            "text": "        logger.debug(\"Initializing ModListWidget\")",
            "lineNumber": 821
          },
          {
            "lineNumber": 822
          },
          {
            "text": "        # Cache list_type for later use",
            "lineNumber": 823
          },
          {
            "text": "        self.list_type = list_type",
            "lineNumber": 824
          },
          {
            "lineNumber": 825
          },
          {
            "text": "        # Cache MetadataManager instance",
            "lineNumber": 826
          },
          {
            "text": "        self.metadata_manager = MetadataManager.instance()",
            "lineNumber": 827
          },
          {
            "lineNumber": 828
          },
          {
            "text": "        self.settings_controller = settings_controller",
            "lineNumber": 829
          },
          {
            "lineNumber": 830
          },
          {
            "text": "        super(ModListWidget, self).__init__()",
            "lineNumber": 831
          },
          {
            "lineNumber": 832
          },
          {
            "text": "        # Track when a custom widget (ModListItemInner) is selected/not selected",
            "lineNumber": 833
          },
          {
            "text": "        self.selectionModel().selectionChanged.connect(self.on_selection_changed)",
            "lineNumber": 834
          },
          {
            "lineNumber": 835
          },
          {
            "text": "        # Allow for dragging and dropping between lists",
            "lineNumber": 836
          },
          {
            "text": "        self.setDefaultDropAction(Qt.DropAction.MoveAction)",
            "lineNumber": 837
          },
          {
            "text": "        self.setDragDropMode(QAbstractItemView.DragDropMode.DragDrop)",
            "lineNumber": 838
          },
          {
            "lineNumber": 839
          },
          {
            "text": "        # Allow for selecting and moving multiple items",
            "lineNumber": 840
          },
          {
            "text": "        self.setSelectionMode(QAbstractItemView.SelectionMode.ExtendedSelection)",
            "lineNumber": 841
          },
          {
            "lineNumber": 842
          },
          {
            "text": "        # When an item is clicked, display the mod information",
            "lineNumber": 843
          },
          {
            "text": "        self.currentItemChanged.connect(self.mod_changed_to)",
            "lineNumber": 844
          },
          {
            "text": "        self.itemClicked.connect(self.mod_clicked)",
            "lineNumber": 845
          },
          {
            "lineNumber": 846
          },
          {
            "text": "        # When an item is double clicked, move it to the opposite list",
            "lineNumber": 847
          },
          {
            "text": "        self.itemDoubleClicked.connect(self.mod_double_clicked)",
            "lineNumber": 848
          },
          {
            "lineNumber": 849
          },
          {
            "text": "        # Add an eventFilter for per mod_list_item context menu",
            "lineNumber": 850
          },
          {
            "text": "        self.installEventFilter(self)",
            "lineNumber": 851
          },
          {
            "lineNumber": 852
          },
          {
            "text": "        # Disable horizontal scroll bar",
            "lineNumber": 853
          },
          {
            "text": "        self.horizontalScrollBar().setEnabled(False)",
            "lineNumber": 854
          },
          {
            "text": "        self.horizontalScrollBar().setVisible(False)",
            "lineNumber": 855
          },
          {
            "lineNumber": 856
          },
          {
            "text": "        # Optimizes performance",
            "lineNumber": 857
          },
          {
            "text": "        # self.setUniformItemSizes(True)",
            "lineNumber": 858
          },
          {
            "lineNumber": 859
          },
          {
            "text": "        # Slot to handle item widgets when itemChanged()",
            "lineNumber": 860
          },
          {
            "text": "        self.itemChanged.connect(self.handle_item_data_changed)",
            "lineNumber": 861
          },
          {
            "lineNumber": 862
          },
          {
            "text": "        # Allow inserting custom list items",
            "lineNumber": 863
          }
        ]
      },
      "score": 0.42144548892974854
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\windows\\base_mods_panel.py",
        "range": {
          "startPosition": {
            "line": 125
          },
          "endPosition": {
            "line": 1412
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 126,
                "column": 1
              },
              "endPosition": {
                "line": 127,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class BaseModsPanel(QWidget):",
            "lineNumber": 126,
            "isSignature": true
          },
          {
            "text": "def _add_combo_box_to_row(",
            "lineNumber": 1096
          },
          {
            "text": "        self,",
            "lineNumber": 1097
          },
          {
            "text": "        row_items: list[QStandardItem],",
            "lineNumber": 1098
          },
          {
            "text": "        combo_column: int,",
            "lineNumber": 1099
          },
          {
            "text": "        items: list[str] | None = None,",
            "lineNumber": 1100
          },
          {
            "text": "    ) -&gt; QComboBox:",
            "lineNumber": 1101
          },
          {
            "lineNumber": 1119
          },
          {
            "text": "        return combo_box",
            "lineNumber": 1120
          },
          {
            "lineNumber": 1121
          },
          {
            "text": "    # ===== NEW HELPER METHODS FOR REFACTORING =====",
            "lineNumber": 1122
          },
          {
            "lineNumber": 1123
          },
          {
            "text": "    def _add_mod_row(",
            "lineNumber": 1124
          },
          {
            "text": "        self,",
            "lineNumber": 1125
          },
          {
            "text": "        mod_info: \"ModInfo\",",
            "lineNumber": 1126
          },
          {
            "text": "        additional_items: list[QStandardItem] | None = None,",
            "lineNumber": 1127
          },
          {
            "text": "        default_checkbox_state: bool = False,",
            "lineNumber": 1128
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 1129
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 1130
          },
          {
            "text": "        Standardized method to add a mod row to the table.",
            "lineNumber": 1131
          },
          {
            "lineNumber": 1132
          },
          {
            "text": "        Args:",
            "lineNumber": 1133
          },
          {
            "text": "            mod_info: ModInfo object containing mod data",
            "lineNumber": 1134
          },
          {
            "text": "            additional_items: Optional additional QStandardItem objects for extra columns",
            "lineNumber": 1135
          },
          {
            "text": "            default_checkbox_state: Default state for the checkbox",
            "lineNumber": 1136
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 1137
          },
          {
            "text": "        # Base columns that all panels use",
            "lineNumber": 1138
          },
          {
            "text": "        base_items = [",
            "lineNumber": 1139
          },
          {
            "text": "            QStandardItem(mod_info.name),",
            "lineNumber": 1140
          },
          {
            "text": "            QStandardItem(mod_info.authors),",
            "lineNumber": 1141
          },
          {
            "text": "            QStandardItem(mod_info.packageid),",
            "lineNumber": 1142
          },
          {
            "text": "            QStandardItem(mod_info.published_file_id),",
            "lineNumber": 1143
          },
          {
            "text": "            QStandardItem(mod_info.supported_versions),",
            "lineNumber": 1144
          },
          {
            "text": "            QStandardItem(mod_info.downloaded_time),",
            "lineNumber": 1145
          },
          {
            "text": "            QStandardItem(mod_info.updated_on_workshop),",
            "lineNumber": 1146
          },
          {
            "text": "            QStandardItem(mod_info.source),",
            "lineNumber": 1147
          },
          {
            "text": "            QStandardItem(\"\"),  # Path will be displayed via widget",
            "lineNumber": 1148
          },
          {
            "text": "        ]",
            "lineNumber": 1149
          },
          {
            "lineNumber": 1150
          },
          {
            "text": "        # Add workshop page column",
            "lineNumber": 1151
          },
          {
            "text": "        workshop_item = QStandardItem()",
            "lineNumber": 1152
          },
          {
            "text": "        base_items.append(workshop_item)",
            "lineNumber": 1153
          },
          {
            "lineNumber": 1154
          },
          {
            "text": "        # Add any additional columns specific to the panel",
            "lineNumber": 1155
          },
          {
            "text": "        if additional_items:",
            "lineNumber": 1156
          },
          {
            "text": "            base_items.extend(additional_items)",
            "lineNumber": 1157
          },
          {
            "lineNumber": 1158
          },
          {
            "text": "        # Set UUID data on name item for metadata lookup",
            "lineNumber": 1159
          },
          {
            "text": "        if mod_info.uuid:",
            "lineNumber": 1160
          },
          {
            "text": "            base_items[0].setData(mod_info.uuid, Qt.ItemDataRole.UserRole)",
            "lineNumber": 1161
          },
          {
            "lineNumber": 1162
          },
          {
            "text": "        self._add_row(base_items, default_checkbox_state)",
            "lineNumber": 1163
          },
          {
            "lineNumber": 1164
          },
          {
            "text": "        # Add path link to the path column (index 9) only if path exists and row is not blank",
            "lineNumber": 1165
          },
          {
            "text": "        if mod_info.path and mod_info.path.strip():",
            "lineNumber": 1166
          },
          {
            "text": "            path_link = self._create_path_link(mod_info.path, \"pathLink\")",
            "lineNumber": 1167
          },
          {
            "text": "            self.editor_table_view.setIndexWidget(base_items[8].index(), path_link)",
            "lineNumber": 1168
          },
          {
            "lineNumber": 1169
          },
          {
            "text": "        # Add workshop button to the workshop column only if published_file_id exists",
            "lineNumber": 1170
          }
        ]
      },
      "score": 0.4073697328567505
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 101
          },
          "endPosition": {
            "line": 677
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 102,
                "column": 1
              },
              "endPosition": {
                "line": 103,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 111,
                "column": 5
              },
              "endPosition": {
                "line": 124,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListItemInner(QWidget):",
            "lineNumber": 102,
            "isSignature": true
          },
          {
            "text": "def __init__(",
            "lineNumber": 111
          },
          {
            "text": "        self,",
            "lineNumber": 112
          },
          {
            "text": "        errors_warnings: str,",
            "lineNumber": 113
          },
          {
            "text": "        errors: str,",
            "lineNumber": 114
          },
          {
            "text": "        warnings: str,",
            "lineNumber": 115
          },
          {
            "text": "        filtered: bool,",
            "lineNumber": 116
          },
          {
            "text": "        invalid: bool,",
            "lineNumber": 117
          },
          {
            "text": "        mismatch: bool,",
            "lineNumber": 118
          },
          {
            "text": "        alternative: bool,",
            "lineNumber": 119
          },
          {
            "text": "        settings_controller: SettingsController,",
            "lineNumber": 120
          },
          {
            "text": "        uuid: str,",
            "lineNumber": 121
          },
          {
            "text": "        mod_color: QColor,",
            "lineNumber": 122
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 123
          },
          {
            "text": "\"\"\"",
            "lineNumber": 141
          },
          {
            "lineNumber": 142
          },
          {
            "text": "        super(ModListItemInner, self).__init__()",
            "lineNumber": 143
          },
          {
            "lineNumber": 144
          },
          {
            "text": "        # Used to handle hover, select etc. behavior for this custom widget",
            "lineNumber": 145
          },
          {
            "text": "        self.setAttribute(Qt.WidgetAttribute.WA_Hover)",
            "lineNumber": 146
          },
          {
            "text": "        self._selected = False",
            "lineNumber": 147
          },
          {
            "text": "        self._hovered = False",
            "lineNumber": 148
          },
          {
            "lineNumber": 149
          },
          {
            "text": "        # Cache MetadataManager instance",
            "lineNumber": 150
          },
          {
            "text": "        self.metadata_manager = MetadataManager.instance()",
            "lineNumber": 151
          },
          {
            "lineNumber": 152
          },
          {
            "text": "        # Cache error and warning strings for tooltips",
            "lineNumber": 153
          },
          {
            "text": "        self.errors_warnings = errors_warnings",
            "lineNumber": 154
          },
          {
            "text": "        self.errors = errors",
            "lineNumber": 155
          },
          {
            "text": "        self.warnings = warnings",
            "lineNumber": 156
          },
          {
            "text": "        # Cache filtered state of widget's item - used to determine styling of widget",
            "lineNumber": 157
          },
          {
            "text": "        self.filtered = filtered",
            "lineNumber": 158
          },
          {
            "text": "        # Cache invalid state of widget's item - used to determine styling of widget",
            "lineNumber": 159
          },
          {
            "text": "        self.invalid = invalid",
            "lineNumber": 160
          },
          {
            "text": "        # Cache mismatch state of widget's item - used to determine warning icon visibility",
            "lineNumber": 161
          },
          {
            "text": "        self.mismatch = mismatch",
            "lineNumber": 162
          },
          {
            "text": "        # Cache alternative state of widget's item - used to determine warning icon visibility",
            "lineNumber": 163
          },
          {
            "text": "        self.alternative = alternative",
            "lineNumber": 164
          },
          {
            "text": "        # Cache SettingsManager instance",
            "lineNumber": 165
          },
          {
            "text": "        self.settings_controller = settings_controller",
            "lineNumber": 166
          },
          {
            "text": "        # Cache the mod color",
            "lineNumber": 167
          },
          {
            "text": "        self.mod_color: QColor | None = mod_color",
            "lineNumber": 168
          },
          {
            "lineNumber": 169
          },
          {
            "text": "        # All data, including name, author, package id, dependencies,",
            "lineNumber": 170
          },
          {
            "text": "        # whether the mod is a workshop mod or expansion, etc is encapsulated",
            "lineNumber": 171
          },
          {
            "text": "        # in this variable. This is exactly equal to the dict value of a",
            "lineNumber": 172
          },
          {
            "text": "        # single all_mods key-value",
            "lineNumber": 173
          },
          {
            "text": "        self.uuid = uuid",
            "lineNumber": 174
          },
          {
            "text": "        name_value = self.metadata_manager.internal_local_metadata.get(",
            "lineNumber": 175
          },
          {
            "text": "            self.uuid, {}",
            "lineNumber": 176
          },
          {
            "text": "        ).get(\"name\")",
            "lineNumber": 177
          },
          {
            "text": "        if not isinstance(name_value, str):",
            "lineNumber": 178
          },
          {
            "text": "            name_value = \"name error in mod about.xml\"",
            "lineNumber": 179
          },
          {
            "text": "        self.list_item_name = name_value",
            "lineNumber": 180
          },
          {
            "text": "        self.main_label = QLabel()",
            "lineNumber": 181
          },
          {
            "lineNumber": 182
          },
          {
            "text": "        # Visuals",
            "lineNumber": 183
          },
          {
            "text": "        self.setToolTip(self.get_tool_tip_text())",
            "lineNumber": 184
          },
          {
            "text": "        self.main_item_layout = QHBoxLayout()",
            "lineNumber": 185
          },
          {
            "text": "        self.main_item_layout.setContentsMargins(0, 0, 0, 0)",
            "lineNumber": 186
          },
          {
            "text": "        self.main_item_layout.setSpacing(0)",
            "lineNumber": 187
          },
          {
            "text": "        self.font_metrics = QFontMetrics(self.font())",
            "lineNumber": 188
          }
        ]
      },
      "score": 0.4054819345474243
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 81,
            "column": 40
          },
          "endPosition": {
            "line": 677
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "from app.utils.generic import (",
            "lineNumber": 83
          },
          {
            "text": "    copy_to_clipboard_safely,",
            "lineNumber": 84
          },
          {
            "text": "    delete_files_except_extension,",
            "lineNumber": 85
          },
          {
            "text": "    flatten_to_list,",
            "lineNumber": 86
          },
          {
            "text": "    format_file_size,",
            "lineNumber": 87
          },
          {
            "text": "    launch_process,",
            "lineNumber": 88
          },
          {
            "text": "    open_url_browser,",
            "lineNumber": 89
          },
          {
            "text": "    platform_specific_open,",
            "lineNumber": 90
          },
          {
            "text": "    sanitize_filename,",
            "lineNumber": 91
          },
          {
            "text": ")",
            "lineNumber": 92
          },
          {
            "text": "from app.utils.metadata import MetadataManager, ModMetadata",
            "lineNumber": 93
          },
          {
            "text": "from app.utils.xml import extract_xml_package_ids, fast_rimworld_xml_save_validation",
            "lineNumber": 94
          },
          {
            "text": "from app.views.deletion_menu import ModDeletionMenu",
            "lineNumber": 95
          },
          {
            "text": "from app.views.dialogue import (",
            "lineNumber": 96
          },
          {
            "text": "    show_dialogue_conditional,",
            "lineNumber": 97
          },
          {
            "text": "    show_warning,",
            "lineNumber": 98
          },
          {
            "text": ")",
            "lineNumber": 99
          },
          {
            "lineNumber": 100
          },
          {
            "lineNumber": 101
          },
          {
            "text": "class ModListItemInner(QWidget):",
            "lineNumber": 102,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 103
          },
          {
            "text": "    Subclass for QWidget. Used to store data for a single",
            "lineNumber": 104
          },
          {
            "text": "    mod and display relevant data on a mod list.",
            "lineNumber": 105
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 106
          },
          {
            "lineNumber": 107
          },
          {
            "text": "    toggle_warning_signal = Signal(str, str)",
            "lineNumber": 108
          },
          {
            "text": "    toggle_error_signal = Signal(str, str)",
            "lineNumber": 109
          },
          {
            "lineNumber": 110
          },
          {
            "text": "    def __init__(",
            "lineNumber": 111
          },
          {
            "text": "        self,",
            "lineNumber": 112
          },
          {
            "text": "        errors_warnings: str,",
            "lineNumber": 113
          },
          {
            "text": "        errors: str,",
            "lineNumber": 114
          },
          {
            "text": "        warnings: str,",
            "lineNumber": 115
          },
          {
            "text": "        filtered: bool,",
            "lineNumber": 116
          },
          {
            "text": "        invalid: bool,",
            "lineNumber": 117
          },
          {
            "text": "        mismatch: bool,",
            "lineNumber": 118
          },
          {
            "text": "        alternative: bool,",
            "lineNumber": 119
          },
          {
            "text": "        settings_controller: SettingsController,",
            "lineNumber": 120
          },
          {
            "text": "        uuid: str,",
            "lineNumber": 121
          },
          {
            "text": "        mod_color: QColor,",
            "lineNumber": 122
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 123
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 124
          },
          {
            "text": "        Initialize the QWidget with mod uuid. Metadata can be accessed via MetadataManager.",
            "lineNumber": 125
          },
          {
            "lineNumber": 126
          },
          {
            "text": "        All metadata tags are set to the corresponding field if it",
            "lineNumber": 127
          },
          {
            "text": "        exists in the metadata dict. See tags:",
            "lineNumber": 128
          },
          {
            "text": "        https://rimworldwiki.com/wiki/About.xml",
            "lineNumber": 129
          },
          {
            "lineNumber": 130
          },
          {
            "text": "        :param errors_warnings: a string of errors and warnings",
            "lineNumber": 131
          },
          {
            "text": "        :param errors: a string of errors for the notification tooltip",
            "lineNumber": 132
          },
          {
            "text": "        :param warnings: a string of warnings for the notification tooltip",
            "lineNumber": 133
          },
          {
            "text": "        :param filtered: a bool representing whether the widget's item is filtered",
            "lineNumber": 134
          },
          {
            "text": "        :param invalid: a bool representing whether the widget's item is an invalid mod",
            "lineNumber": 135
          },
          {
            "text": "        :param mismatch: a bool representing whether the widget's item has a version mismatch",
            "lineNumber": 136
          },
          {
            "text": "        :param alternative: a bool representing whether the widget's item has a recommended alternative mod",
            "lineNumber": 137
          },
          {
            "text": "        :param settings_controller: an instance of SettingsController for accessing settings",
            "lineNumber": 138
          },
          {
            "text": "        :param uuid: str, the uuid of the mod which corresponds to a mod's metadata",
            "lineNumber": 139
          },
          {
            "text": "        :param mod_color: QColor, the color of the mod's text/background in the modlist",
            "lineNumber": 140
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 141
          },
          {
            "lineNumber": 142
          },
          {
            "text": "        super(ModListItemInner, self).__init__()",
            "lineNumber": 143
          }
        ]
      },
      "score": 0.4017426073551178
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "lineNumber": 2261
          },
          {
            "lineNumber": 2262
          },
          {
            "text": "    def check_item_visible(self, item: CustomListWidgetItem) -&gt; bool:",
            "lineNumber": 2263
          },
          {
            "text": "        # Determines if the item is currently visible in the viewport.",
            "lineNumber": 2264
          },
          {
            "text": "        rect = self.visualItemRect(item)",
            "lineNumber": 2265
          },
          {
            "text": "        return rect.top() &lt; self.viewport().height() and rect.bottom() &gt; 0",
            "lineNumber": 2266
          },
          {
            "lineNumber": 2267
          },
          {
            "text": "    def create_widget_for_item(self, item: CustomListWidgetItem) -&gt; None:",
            "lineNumber": 2268
          },
          {
            "text": "        data = item.data(Qt.ItemDataRole.UserRole)",
            "lineNumber": 2269
          },
          {
            "text": "        if data is None:",
            "lineNumber": 2270
          },
          {
            "text": "            logger.debug(\"Attempted to create widget for item with None data\")",
            "lineNumber": 2271
          },
          {
            "text": "            return",
            "lineNumber": 2272
          },
          {
            "text": "        errors_warnings = data[\"errors_warnings\"]",
            "lineNumber": 2273
          },
          {
            "text": "        errors = data[\"errors\"]",
            "lineNumber": 2274
          },
          {
            "text": "        warnings = data[\"warnings\"]",
            "lineNumber": 2275
          },
          {
            "text": "        filtered = data[\"filtered\"]",
            "lineNumber": 2276
          },
          {
            "text": "        invalid = data[\"invalid\"]",
            "lineNumber": 2277
          },
          {
            "text": "        mismatch = data[\"mismatch\"]",
            "lineNumber": 2278
          },
          {
            "text": "        alternative = data[\"alternative\"]",
            "lineNumber": 2279
          },
          {
            "text": "        uuid = data[\"uuid\"]",
            "lineNumber": 2280
          },
          {
            "text": "        mod_color = data[\"mod_color\"]",
            "lineNumber": 2281
          },
          {
            "text": "        if uuid:",
            "lineNumber": 2282
          },
          {
            "text": "            widget = ModListItemInner(",
            "lineNumber": 2283
          },
          {
            "text": "                errors_warnings=errors_warnings,",
            "lineNumber": 2284
          },
          {
            "text": "                errors=errors,",
            "lineNumber": 2285
          },
          {
            "text": "                warnings=warnings,",
            "lineNumber": 2286
          },
          {
            "text": "                filtered=filtered,",
            "lineNumber": 2287
          },
          {
            "text": "                invalid=invalid,",
            "lineNumber": 2288
          },
          {
            "text": "                mismatch=mismatch,",
            "lineNumber": 2289
          },
          {
            "text": "                alternative=alternative,",
            "lineNumber": 2290
          },
          {
            "text": "                settings_controller=self.settings_controller,",
            "lineNumber": 2291
          },
          {
            "text": "                uuid=uuid,",
            "lineNumber": 2292
          },
          {
            "text": "                mod_color=mod_color,",
            "lineNumber": 2293
          },
          {
            "text": "            )",
            "lineNumber": 2294
          },
          {
            "text": "            widget.toggle_warning_signal.connect(self.toggle_warning)",
            "lineNumber": 2295
          },
          {
            "text": "            widget.toggle_error_signal.connect(self.toggle_warning)",
            "lineNumber": 2296
          },
          {
            "text": "            item.setSizeHint(widget.sizeHint())",
            "lineNumber": 2297
          },
          {
            "text": "            self.setItemWidget(item, widget)",
            "lineNumber": 2298
          },
          {
            "text": "            ",
            "lineNumber": 2299
          },
          {
            "text": "            # Apply translation status if enabled",
            "lineNumber": 2300
          },
          {
            "text": "            if self.show_translation_status:",
            "lineNumber": 2301
          },
          {
            "text": "                pkg_id = self.metadata_manager.internal_local_metadata[uuid].get(\"packageid\")",
            "lineNumber": 2302
          },
          {
            "text": "                has_translation = pkg_id in self.translation_lookup",
            "lineNumber": 2303
          },
          {
            "text": "                widget.update_translation_status(has_translation)",
            "lineNumber": 2304
          },
          {
            "lineNumber": 2305
          },
          {
            "text": "            # Ensure initial icon states reflect current item data",
            "lineNumber": 2306
          },
          {
            "text": "            widget.repolish(item)",
            "lineNumber": 2307
          },
          {
            "lineNumber": 2308
          },
          {
            "text": "    def check_widgets_visible(self) -&gt; None:",
            "lineNumber": 2309
          },
          {
            "text": "        # This function checks the visibility of each item and creates a widget if the item is visible and not already setup.",
            "lineNumber": 2310
          },
          {
            "text": "        ",
            "lineNumber": 2311
          }
        ]
      },
      "score": 0.3962157070636749
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\models\\metadata\\metadata_structure.py",
        "range": {
          "startPosition": {
            "line": 97,
            "column": 36
          },
          "endPosition": {
            "line": 195
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "class ModsConfig:",
            "lineNumber": 101,
            "isSignature": true
          },
          {
            "text": "    \"\"\"A class to store the mods configuration.",
            "lineNumber": 102
          },
          {
            "lineNumber": 103
          },
          {
            "text": "    Note that activeMods and knownExpansions are set up such that they are NOT mutable.",
            "lineNumber": 104
          },
          {
            "text": "    To modify them, use the provided methods which will create a new list and set it.",
            "lineNumber": 105
          },
          {
            "lineNumber": 106
          },
          {
            "text": "    This is more performance heavy but ensures that the lists are not modified outside of the class,",
            "lineNumber": 107
          },
          {
            "text": "    preventing weird issues with the lists being modified in place, especially with threading.",
            "lineNumber": 108
          },
          {
            "lineNumber": 109
          },
          {
            "text": "    Attributes:",
            "lineNumber": 110
          },
          {
            "text": "        version (str): The version of the mods configuration.",
            "lineNumber": 111
          },
          {
            "text": "        activeMods (list[CaseInsensitiveStr]): A list of active mods.",
            "lineNumber": 112
          },
          {
            "text": "        knownExpansions (list[CaseInsensitiveStr]): A list of known expansions.",
            "lineNumber": 113
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 114
          },
          {
            "lineNumber": 115
          },
          {
            "text": "    version: str",
            "lineNumber": 116
          },
          {
            "text": "    _activeMods: list[CaseInsensitiveStr]",
            "lineNumber": 117
          },
          {
            "text": "    _knownExpansions: list[CaseInsensitiveStr]",
            "lineNumber": 118
          },
          {
            "lineNumber": 119
          },
          {
            "text": "    def __init__(",
            "lineNumber": 120
          },
          {
            "text": "        self,",
            "lineNumber": 121
          },
          {
            "text": "        version: str,",
            "lineNumber": 122
          },
          {
            "text": "        activeMods: list[CaseInsensitiveStr],",
            "lineNumber": 123
          },
          {
            "text": "        knownExpansions: list[CaseInsensitiveStr],",
            "lineNumber": 124
          },
          {
            "text": "    ):",
            "lineNumber": 125
          },
          {
            "text": "        self.version = version",
            "lineNumber": 126
          },
          {
            "text": "        self.activeMods = activeMods",
            "lineNumber": 127
          },
          {
            "text": "        self.knownExpansions = knownExpansions",
            "lineNumber": 128
          },
          {
            "lineNumber": 129
          },
          {
            "text": "    def clear_active_mods(self) -&gt; None:",
            "lineNumber": 130
          },
          {
            "text": "        \"\"\"Clear the active mods list.\"\"\"",
            "lineNumber": 131
          },
          {
            "text": "        self.activeMods.clear()",
            "lineNumber": 132
          },
          {
            "lineNumber": 133
          },
          {
            "text": "    def clear_all(self) -&gt; None:",
            "lineNumber": 134
          },
          {
            "text": "        \"\"\"Clear the active mods and known expansions lists.\"\"\"",
            "lineNumber": 135
          },
          {
            "text": "        self.clear_active_mods()",
            "lineNumber": 136
          },
          {
            "text": "        self.knownExpansions.clear()",
            "lineNumber": 137
          },
          {
            "lineNumber": 138
          },
          {
            "text": "    @property",
            "lineNumber": 139
          },
          {
            "text": "    def activeMods(self) -&gt; list[CaseInsensitiveStr]:",
            "lineNumber": 140
          },
          {
            "text": "        \"\"\"Copy of the active mods list.",
            "lineNumber": 141
          },
          {
            "lineNumber": 142
          },
          {
            "text": "        :return: A copy of the active mods list.",
            "lineNumber": 143
          },
          {
            "text": "        :rtype: list[CaseInsensitiveStr]",
            "lineNumber": 144
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 145
          },
          {
            "text": "        return self._activeMods[:]",
            "lineNumber": 146
          },
          {
            "lineNumber": 147
          },
          {
            "text": "    @activeMods.setter",
            "lineNumber": 148
          },
          {
            "text": "    def activeMods(self, value: list[CaseInsensitiveStr] | list[str]) -&gt; None:",
            "lineNumber": 149
          },
          {
            "text": "        ",
            "lineNumber": 150
          }
        ]
      },
      "score": 0.3908484876155853
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\windows\\use_this_instead_panel.py",
        "range": {
          "startPosition": {
            "line": 46,
            "column": 15
          },
          "endPosition": {
            "line": 743
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "@dataclass",
            "lineNumber": 50
          },
          {
            "text": "class ModGroupItem:",
            "lineNumber": 51,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 52
          },
          {
            "text": "    Represents a mod item in a group, containing metadata and identifiers.",
            "lineNumber": 53
          },
          {
            "lineNumber": 54
          },
          {
            "text": "    Attributes:",
            "lineNumber": 55
          },
          {
            "text": "        mod_id: Unique identifier for the mod.",
            "lineNumber": 56
          },
          {
            "text": "        metadata: Dictionary containing mod metadata.",
            "lineNumber": 57
          },
          {
            "text": "        replacement: Optional replacement mod information.",
            "lineNumber": 58
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 59
          },
          {
            "lineNumber": 60
          },
          {
            "text": "    mod_id: str",
            "lineNumber": 61
          },
          {
            "text": "    metadata: dict[str, Any]",
            "lineNumber": 62
          },
          {
            "text": "    replacement: Optional[ReplacementInfo] = None",
            "lineNumber": 63,
            "isSignature": true
          },
          {
            "lineNumber": 64
          },
          {
            "lineNumber": 65
          },
          {
            "text": "class UseThisInsteadPanel(BaseModsPanel):",
            "lineNumber": 66,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 67
          }
        ]
      },
      "score": 0.38835200667381287
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 2820,
                "column": 5
              },
              "endPosition": {
                "line": 2821,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "text": "def recreate_mod_list(",
            "lineNumber": 2920
          },
          {
            "text": "        self, list_type: str, uuids: list[str], filtering: bool = False",
            "lineNumber": 2921
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 2922
          },
          {
            "lineNumber": 2964
          },
          {
            "text": "        try:",
            "lineNumber": 2965
          },
          {
            "text": "            self.model().rowsAboutToBeRemoved.disconnect(self.handle_rows_removed)",
            "lineNumber": 2966
          },
          {
            "text": "        except TypeError:",
            "lineNumber": 2967
          },
          {
            "text": "            pass  # Signal not connected",
            "lineNumber": 2968
          },
          {
            "lineNumber": 2969
          },
          {
            "text": "        self.clear()",
            "lineNumber": 2970
          },
          {
            "text": "        self.uuids = list()",
            "lineNumber": 2971
          },
          {
            "text": "        if uuids:  # Insert data...",
            "lineNumber": 2972
          },
          {
            "text": "            for uuid_key in uuids:",
            "lineNumber": 2973
          },
          {
            "text": "                mod_path = self.metadata_manager.internal_local_metadata[uuid_key][",
            "lineNumber": 2974
          },
          {
            "text": "                    \"path\"",
            "lineNumber": 2975
          },
          {
            "text": "                ]",
            "lineNumber": 2976
          },
          {
            "text": "                aux_metadata_controller = (",
            "lineNumber": 2977
          },
          {
            "text": "                    AuxMetadataController.get_or_create_cached_instance(",
            "lineNumber": 2978
          },
          {
            "text": "                        self.settings_controller.settings.aux_db_path",
            "lineNumber": 2979
          },
          {
            "text": "                    )",
            "lineNumber": 2980
          },
          {
            "text": "                )",
            "lineNumber": 2981
          },
          {
            "text": "                with aux_metadata_controller.Session() as aux_metadata_session:",
            "lineNumber": 2982
          },
          {
            "text": "                    aux_metadata_controller.get_or_create(",
            "lineNumber": 2983
          },
          {
            "text": "                        aux_metadata_session, mod_path",
            "lineNumber": 2984
          },
          {
            "text": "                    )",
            "lineNumber": 2985
          },
          {
            "text": "                    aux_metadata_controller.update(",
            "lineNumber": 2986
          },
          {
            "text": "                        aux_metadata_session, mod_path, outdated=False",
            "lineNumber": 2987
          },
          {
            "text": "                    )",
            "lineNumber": 2988
          },
          {
            "text": "                    list_item = CustomListWidgetItem(self)",
            "lineNumber": 2989
          },
          {
            "text": "                    data = CustomListWidgetItemMetadata(",
            "lineNumber": 2990
          },
          {
            "text": "                        uuid=uuid_key,",
            "lineNumber": 2991
          },
          {
            "text": "                        list_type=self.list_type,",
            "lineNumber": 2992
          },
          {
            "text": "                        aux_metadata_controller=aux_metadata_controller,",
            "lineNumber": 2993
          },
          {
            "text": "                        aux_metadata_session=aux_metadata_session,",
            "lineNumber": 2994
          },
          {
            "text": "                        settings_controller=self.settings_controller,",
            "lineNumber": 2995
          },
          {
            "text": "                    )",
            "lineNumber": 2996
          },
          {
            "text": "                list_item.setData(Qt.ItemDataRole.UserRole, data)",
            "lineNumber": 2997
          },
          {
            "text": "                self.addItem(list_item)",
            "lineNumber": 2998
          },
          {
            "text": "                # When refreshing, update entry if needed?",
            "lineNumber": 2999
          },
          {
            "text": "            # Set uuids list to match the widget after all items are added",
            "lineNumber": 3000
          },
          {
            "text": "            self.uuids = uuids",
            "lineNumber": 3001
          },
          {
            "lineNumber": 3002
          },
          {
            "text": "        else:  # ...unless we don't have mods, at which point reenable updates and exit",
            "lineNumber": 3003
          }
        ]
      },
      "score": 0.3790974020957947
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\utils\\metadata.py",
        "range": {
          "startPosition": {
            "line": 2237,
            "column": 17
          },
          "endPosition": {
            "line": 2379
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "def get_mods_from_list(",
            "lineNumber": 2241,
            "isSignature": true
          },
          {
            "text": "    mod_list: Union[str, list[str]],",
            "lineNumber": 2242,
            "isSignature": true
          },
          {
            "text": ") -&gt; tuple[list[str], list[str], dict[str, Any], list[str]]:",
            "lineNumber": 2243,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 2244
          },
          {
            "text": "    Given a RimWorld mods list containing a complete list of mods,",
            "lineNumber": 2245
          },
          {
            "text": "    including base game and DLC, as well as their dependencies in order,",
            "lineNumber": 2246
          },
          {
            "text": "    return a list of mods for the active list widget and a list of",
            "lineNumber": 2247
          },
          {
            "text": "    mods for the inactive list widget.",
            "lineNumber": 2248
          },
          {
            "lineNumber": 2249
          },
          {
            "text": "    :param mod_list:",
            "lineNumber": 2250
          },
          {
            "text": "        A path to an .rws/.xml style list, or a list of package ids",
            "lineNumber": 2251
          },
          {
            "text": "        OR a list of mod uuids",
            "lineNumber": 2252
          },
          {
            "text": "    :return: a tuple which contains the active mods dict, inactive mods dict,",
            "lineNumber": 2253
          },
          {
            "text": "    duplicate mods dict, and missing mods list",
            "lineNumber": 2254
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 2255
          },
          {
            "text": "    all_mods = MetadataManager.instance().internal_local_metadata",
            "lineNumber": 2256
          },
          {
            "lineNumber": 2257
          },
          {
            "text": "    active_mods_uuids: list[str] = []",
            "lineNumber": 2258
          },
          {
            "text": "    inactive_mods_uuids: list[str] = []",
            "lineNumber": 2259
          },
          {
            "text": "    duplicate_mods: dict[str, Any] = {}",
            "lineNumber": 2260
          },
          {
            "text": "    duplicates_processed = []",
            "lineNumber": 2261
          },
          {
            "text": "    missing_mods: list[str] = []",
            "lineNumber": 2262
          },
          {
            "text": "    populated_mods = []",
            "lineNumber": 2263
          },
          {
            "text": "    to_populate = []",
            "lineNumber": 2264
          },
          {
            "text": "    logger.debug(\"Started generating active and inactive mods\")",
            "lineNumber": 2265
          },
          {
            "text": "    # Calculate duplicate mods (SCHEMA: {str packageid: list[str duplicate uuids]})",
            "lineNumber": 2266
          },
          {
            "text": "    for mod_uuid, mod_data in all_mods.items():",
            "lineNumber": 2267
          },
          {
            "text": "        # Using setdefault() to initialize the dictionary and then assigning the value",
            "lineNumber": 2268
          },
          {
            "text": "        duplicate_mods.setdefault(mod_data[\"packageid\"], []).append(mod_uuid)",
            "lineNumber": 2269
          },
          {
            "text": "    # Filter out non-duplicate mods",
            "lineNumber": 2270
          },
          {
            "text": "    duplicate_mods = {k: v for k, v in duplicate_mods.items() if len(v) &gt; 1}",
            "lineNumber": 2271
          },
          {
            "text": "    # Calculate mod lists",
            "lineNumber": 2272
          },
          {
            "text": "    if isinstance(mod_list, str):",
            "lineNumber": 2273
          }
        ]
      },
      "score": 0.3786514103412628
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\models\\metadata\\metadata_structure.py",
        "range": {
          "startPosition": {
            "line": 399,
            "column": 27
          },
          "endPosition": {
            "line": 507
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "@dataclass",
            "lineNumber": 403
          },
          {
            "text": "class AboutXmlMod(ListedMod, PackageIdMod):",
            "lineNumber": 404,
            "isSignature": true
          },
          {
            "text": "    \"\"\"A listed mod with rules for load order and dependencies.",
            "lineNumber": 405
          },
          {
            "lineNumber": 406
          },
          {
            "text": "    Attributes:",
            "lineNumber": 407
          },
          {
            "text": "        authors (list[str]): A list of authors for the mod.",
            "lineNumber": 408
          },
          {
            "text": "        mod_version (str): The version of the mod.",
            "lineNumber": 409
          },
          {
            "text": "        mod_icon_path (Path | None): The path to the mod icon.",
            "lineNumber": 410
          },
          {
            "text": "        steam_app_id (int): The Steam app ID for the mod.",
            "lineNumber": 411
          },
          {
            "text": "        url (str): A URL for the mod.",
            "lineNumber": 412
          },
          {
            "text": "        about_rules (BaseRules): The rules for the About section of the mod.",
            "lineNumber": 413
          },
          {
            "text": "        community_rules (Rules): The rules for the Community section of the mod.",
            "lineNumber": 414
          },
          {
            "text": "        user_rules (Rules): The rules for the User section of the mod.",
            "lineNumber": 415
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 416
          },
          {
            "lineNumber": 417
          },
          {
            "text": "    authors: list[str] = field(default_factory=list)",
            "lineNumber": 418
          },
          {
            "text": "    mod_version: str = \"\"",
            "lineNumber": 419
          },
          {
            "text": "    mod_icon_path: Path | None = None",
            "lineNumber": 420
          },
          {
            "text": "    steam_app_id: int = -1",
            "lineNumber": 421
          },
          {
            "text": "    url: str = \"\"",
            "lineNumber": 422
          },
          {
            "lineNumber": 423
          },
          {
            "text": "    about_rules: BaseRules = field(default_factory=BaseRules)",
            "lineNumber": 424
          },
          {
            "text": "    community_rules: Rules = field(default_factory=Rules)",
            "lineNumber": 425
          },
          {
            "text": "    user_rules: Rules = field(default_factory=Rules)",
            "lineNumber": 426
          },
          {
            "lineNumber": 427
          },
          {
            "text": "    @functools.cached_property",
            "lineNumber": 428
          },
          {
            "text": "    def overall_rules(self) -&gt; Rules:",
            "lineNumber": 429
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 430
          }
        ]
      },
      "score": 0.37420523166656494
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\models\\metadata\\metadata_structure.py",
        "range": {
          "startPosition": {
            "line": 195,
            "column": 9
          },
          "endPosition": {
            "line": 222,
            "column": 70
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "@dataclass",
            "lineNumber": 199
          },
          {
            "text": "class BaseMod:",
            "lineNumber": 200,
            "isSignature": true
          },
          {
            "text": "    \"\"\"Base class for a mod.",
            "lineNumber": 201
          },
          {
            "lineNumber": 202
          },
          {
            "text": "    Attributes:",
            "lineNumber": 203
          },
          {
            "text": "        package_id (CaseInsensitiveStr): The package id of the mod.",
            "lineNumber": 204
          },
          {
            "text": "        name (str): The name of the mod.",
            "lineNumber": 205
          },
          {
            "text": "        uuid (str): The internal unique identifier for the mod.",
            "lineNumber": 206
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 207
          },
          {
            "lineNumber": 208
          },
          {
            "text": "    name: str = \"Unknown Mod Name\"",
            "lineNumber": 209
          },
          {
            "lineNumber": 210
          },
          {
            "text": "    _uuid: str = str(uuid4())",
            "lineNumber": 211
          },
          {
            "lineNumber": 212
          },
          {
            "text": "    @property",
            "lineNumber": 213
          },
          {
            "text": "    def uuid(self) -&gt; str:",
            "lineNumber": 214
          },
          {
            "text": "        return self._uuid",
            "lineNumber": 215
          },
          {
            "lineNumber": 216
          },
          {
            "text": "    def __hash__(self) -&gt; int:",
            "lineNumber": 217
          },
          {
            "text": "        return hash(self.uuid)",
            "lineNumber": 218,
            "isSignature": true
          },
          {
            "lineNumber": 219
          },
          {
            "lineNumber": 220
          },
          {
            "text": "@dataclass",
            "lineNumber": 221
          },
          {
            "text": "class PackageIdMod:",
            "lineNumber": 222,
            "isSignature": true
          },
          {
            "text": "    package_id: CaseInsensitiveStr = CaseInsensitiveStr(\"invalid.mod\")",
            "lineNumber": 223,
            "isSignature": true
          }
        ]
      },
      "score": 0.3715435862541199
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 779,
            "column": 30
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 784
          },
          {
            "text": "    Subclass for QListWidget. Used to store lists for",
            "lineNumber": 785
          },
          {
            "text": "    active and inactive mods. Mods can be rearranged within",
            "lineNumber": 786
          },
          {
            "text": "    their own lists or moved from one list to another.",
            "lineNumber": 787
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 788
          },
          {
            "lineNumber": 789
          },
          {
            "text": "    SORT_TEXT_TO_KEY_MAP = {",
            "lineNumber": 790
          },
          {
            "text": "        \"Name\": ModsPanelSortKey.MODNAME,",
            "lineNumber": 791
          },
          {
            "text": "        \"Author\": ModsPanelSortKey.AUTHOR,",
            "lineNumber": 792
          },
          {
            "text": "        \"Modified Time\": ModsPanelSortKey.FILESYSTEM_MODIFIED_TIME,",
            "lineNumber": 793
          },
          {
            "text": "        \"Folder Size\": ModsPanelSortKey.FOLDER_SIZE,",
            "lineNumber": 794
          },
          {
            "text": "        \"Version\": ModsPanelSortKey.VERSION,",
            "lineNumber": 795
          },
          {
            "text": "        \"PackageId\": ModsPanelSortKey.PACKAGEID,",
            "lineNumber": 796
          },
          {
            "text": "        \"Color\": ModsPanelSortKey.MOD_COLOR,",
            "lineNumber": 797
          },
          {
            "text": "    }",
            "lineNumber": 798
          },
          {
            "lineNumber": 799
          },
          {
            "text": "    @staticmethod",
            "lineNumber": 800
          },
          {
            "text": "    def _text_to_sort_key(text: str) -&gt; ModsPanelSortKey:",
            "lineNumber": 801
          },
          {
            "text": "        return ModListWidget.SORT_TEXT_TO_KEY_MAP.get(text, ModsPanelSortKey.MODNAME)",
            "lineNumber": 802
          },
          {
            "lineNumber": 803
          },
          {
            "text": "    edit_rules_signal = Signal(bool, str, str)",
            "lineNumber": 804
          },
          {
            "text": "    item_added_signal = Signal(str)",
            "lineNumber": 805
          },
          {
            "text": "    key_press_signal = Signal(str)",
            "lineNumber": 806
          },
          {
            "text": "    list_update_signal = Signal(str)",
            "lineNumber": 807
          },
          {
            "text": "    mod_info_signal = Signal(str, CustomListWidgetItem)",
            "lineNumber": 808
          },
          {
            "text": "    recalculate_warnings_signal = Signal()",
            "lineNumber": 809
          },
          {
            "text": "    refresh_signal = Signal()",
            "lineNumber": 810
          },
          {
            "text": "    update_git_mods_signal = Signal(list)",
            "lineNumber": 811
          },
          {
            "text": "    steamdb_blacklist_signal = Signal(list)",
            "lineNumber": 812
          },
          {
            "lineNumber": 813
          },
          {
            "text": "    def __init__(self, list_type: str, settings_controller: SettingsController) -&gt; None:",
            "lineNumber": 814
          },
          {
            "text": "        ",
            "lineNumber": 815
          }
        ]
      },
      "score": 0.3686535358428955
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "lineNumber": 2169
          },
          {
            "lineNumber": 2170
          },
          {
            "text": "    def SaveUserCustomColors(self, color_dlg: QColorDialog) -&gt; None:",
            "lineNumber": 2171
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2172
          },
          {
            "text": "        Saves the user's custom colors from the QColorDialog to settings.json as list of hex strings.",
            "lineNumber": 2173
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2174
          },
          {
            "text": "        settings = self.settings_controller.settings",
            "lineNumber": 2175
          },
          {
            "text": "        colors = []",
            "lineNumber": 2176
          },
          {
            "text": "        for i in range(16):",
            "lineNumber": 2177
          },
          {
            "text": "            color = color_dlg.customColor(i)",
            "lineNumber": 2178
          },
          {
            "text": "            colors.append(color.name())  # Store as hex string",
            "lineNumber": 2179
          },
          {
            "text": "        settings.color_picker_custom_colors = colors",
            "lineNumber": 2180
          },
          {
            "text": "        settings.save()",
            "lineNumber": 2181
          },
          {
            "lineNumber": 2182
          },
          {
            "text": "    def append_new_item(self, uuid: str) -&gt; None:",
            "lineNumber": 2183
          },
          {
            "text": "        mod_path = self.metadata_manager.internal_local_metadata[uuid][\"path\"]",
            "lineNumber": 2184
          },
          {
            "text": "        aux_metadata_controller = AuxMetadataController.get_or_create_cached_instance(",
            "lineNumber": 2185
          },
          {
            "text": "            self.settings_controller.settings.aux_db_path",
            "lineNumber": 2186
          },
          {
            "text": "        )",
            "lineNumber": 2187
          },
          {
            "text": "        with aux_metadata_controller.Session() as aux_metadata_session:",
            "lineNumber": 2188
          },
          {
            "text": "            aux_metadata_controller.get_or_create(aux_metadata_session, mod_path)",
            "lineNumber": 2189
          },
          {
            "text": "            aux_metadata_controller.update(",
            "lineNumber": 2190
          },
          {
            "text": "                aux_metadata_session, mod_path, outdated=False",
            "lineNumber": 2191
          },
          {
            "text": "            )",
            "lineNumber": 2192
          },
          {
            "text": "            data = CustomListWidgetItemMetadata(",
            "lineNumber": 2193
          },
          {
            "text": "                uuid=uuid,",
            "lineNumber": 2194
          },
          {
            "text": "                list_type=self.list_type,",
            "lineNumber": 2195
          },
          {
            "text": "                aux_metadata_controller=aux_metadata_controller,",
            "lineNumber": 2196
          },
          {
            "text": "                aux_metadata_session=aux_metadata_session,",
            "lineNumber": 2197
          },
          {
            "text": "                settings_controller=self.settings_controller,",
            "lineNumber": 2198
          },
          {
            "text": "            )",
            "lineNumber": 2199
          },
          {
            "text": "        item = CustomListWidgetItem(self)",
            "lineNumber": 2200
          },
          {
            "text": "        item.setData(Qt.ItemDataRole.UserRole, data)",
            "lineNumber": 2201
          },
          {
            "text": "        self.addItem(item)",
            "lineNumber": 2202
          },
          {
            "text": "        self.uuids.append(uuid)  # Append for new item",
            "lineNumber": 2203
          },
          {
            "lineNumber": 2204
          },
          {
            "text": "    def get_all_mod_list_items(self) -&gt; list[CustomListWidgetItem]:",
            "lineNumber": 2205
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2206
          },
          {
            "text": "        This gets all modlist items.",
            "lineNumber": 2207
          },
          {
            "lineNumber": 2208
          },
          {
            "text": "        :return: List of all modlist items as CustomListWidgetItem",
            "lineNumber": 2209
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2210
          },
          {
            "text": "        mod_list_items = []",
            "lineNumber": 2211
          },
          {
            "text": "        for index in range(self.count()):",
            "lineNumber": 2212
          },
          {
            "text": "            item = self.item(index)",
            "lineNumber": 2213
          },
          {
            "text": "            mod_list_items.append(item)",
            "lineNumber": 2214
          },
          {
            "text": "        return mod_list_items",
            "lineNumber": 2215
          },
          {
            "lineNumber": 2216
          },
          {
            "text": "    def get_all_loaded_mod_list_items(self) -&gt; list[ModListItemInner]:",
            "lineNumber": 2217
          },
          {
            "text": "        ",
            "lineNumber": 2218
          }
        ]
      },
      "score": 0.3650425970554352
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\models\\metadata\\metadata_factory.py",
        "range": {
          "startPosition": {
            "line": 518,
            "column": 16
          },
          "endPosition": {
            "line": 572
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "def create_mod_dependency(input_dict: dict[str, str]) -&gt; DependencyMod:",
            "lineNumber": 522,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 523
          },
          {
            "text": "    Create a DependencyMod object from the input dictionary.",
            "lineNumber": 524
          },
          {
            "lineNumber": 525
          },
          {
            "text": "    :param input_dict: The dictionary containing the mod data.",
            "lineNumber": 526
          },
          {
            "text": "    :return: The DependencyMod object.",
            "lineNumber": 527
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 528
          },
          {
            "text": "    mod = DependencyMod()",
            "lineNumber": 529
          },
          {
            "text": "    package_id = input_dict.get(\"packageId\", False)",
            "lineNumber": 530
          },
          {
            "text": "    if isinstance(package_id, str):",
            "lineNumber": 531
          },
          {
            "text": "        mod.package_id = CaseInsensitiveStr(package_id)",
            "lineNumber": 532
          },
          {
            "lineNumber": 533
          },
          {
            "text": "    name = input_dict.get(\"displayName\", False)",
            "lineNumber": 534
          },
          {
            "text": "    if isinstance(name, str):",
            "lineNumber": 535
          },
          {
            "text": "        mod.name = name",
            "lineNumber": 536
          },
          {
            "lineNumber": 537
          },
          {
            "text": "    workshop_url = input_dict.get(\"workshopUrl\", False)",
            "lineNumber": 538
          },
          {
            "text": "    if isinstance(workshop_url, str):",
            "lineNumber": 539
          },
          {
            "text": "        mod.workshop_url = workshop_url",
            "lineNumber": 540
          },
          {
            "lineNumber": 541
          },
          {
            "text": "    # New: alternativePackageIds support",
            "lineNumber": 542
          },
          {
            "text": "    alts = input_dict.get(\"alternativePackageIds\", False)",
            "lineNumber": 543
          },
          {
            "text": "    if isinstance(alts, list):",
            "lineNumber": 544
          },
          {
            "text": "        for a in alts:",
            "lineNumber": 545
          },
          {
            "text": "            if isinstance(a, str) and a.strip():",
            "lineNumber": 546
          },
          {
            "text": "                mod.alternative_package_ids.add(CaseInsensitiveStr(a))",
            "lineNumber": 547
          },
          {
            "lineNumber": 548
          },
          {
            "text": "    return mod",
            "lineNumber": 549,
            "isSignature": true
          },
          {
            "lineNumber": 550
          },
          {
            "lineNumber": 551
          },
          {
            "text": "def _create_about_mod_from_xml(",
            "lineNumber": 552,
            "isSignature": true
          },
          {
            "text": "    base_path: Path, mod_xml_path: Path, target_version: str",
            "lineNumber": 553,
            "isSignature": true
          },
          {
            "text": ") -&gt; tuple[bool, AboutXmlMod]:",
            "lineNumber": 554,
            "isSignature": true
          },
          {
            "text": "    ",
            "lineNumber": 555
          }
        ]
      },
      "score": 0.35759925842285156
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 814,
                "column": 5
              },
              "endPosition": {
                "line": 815,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "text": "def __init__(self, list_type: str, settings_controller: SettingsController) -&gt; None:",
            "lineNumber": 814
          },
          {
            "lineNumber": 861
          },
          {
            "lineNumber": 862
          },
          {
            "text": "        # Allow inserting custom list items",
            "lineNumber": 863
          },
          {
            "text": "        self.model().rowsInserted.connect(self.handle_rows_inserted, Qt.ConnectionType.QueuedConnection)",
            "lineNumber": 864
          },
          {
            "lineNumber": 865
          },
          {
            "text": "        # Handle removing items to update count",
            "lineNumber": 866
          },
          {
            "text": "        self.model().rowsAboutToBeRemoved.connect(self.handle_rows_removed, Qt.ConnectionType.QueuedConnection)",
            "lineNumber": 867
          },
          {
            "lineNumber": 868
          },
          {
            "text": "        # Lazy load ModListItemInner",
            "lineNumber": 869
          },
          {
            "text": "        self.verticalScrollBar().valueChanged.connect(self.check_widgets_visible)",
            "lineNumber": 870
          },
          {
            "lineNumber": 871
          },
          {
            "text": "        # This set is used to keep track of mods that have been loaded",
            "lineNumber": 872
          },
          {
            "text": "        # into widgets. Used for an optimization strategy for &#96;handle_rows_inserted&#96;",
            "lineNumber": 873
          },
          {
            "text": "        self.uuids: list[str] = []",
            "lineNumber": 874
          },
          {
            "text": "        self.ignore_warning_list: list[str] = []",
            "lineNumber": 875
          },
          {
            "text": "        # Cache of latest save package ids to check new mods",
            "lineNumber": 876
          },
          {
            "text": "        self._latest_save_package_ids: set[str] | None = None",
            "lineNumber": 877
          },
          {
            "text": "        ",
            "lineNumber": 878
          },
          {
            "text": "        # Translation status",
            "lineNumber": 879
          },
          {
            "text": "        self.show_translation_status: bool = False",
            "lineNumber": 880
          },
          {
            "text": "        self.translation_lookup: set[str] = set()",
            "lineNumber": 881
          },
          {
            "lineNumber": 882
          },
          {
            "text": "        self.deletion_sub_menu = ModDeletionMenu(",
            "lineNumber": 883
          },
          {
            "text": "            self.settings_controller,",
            "lineNumber": 884
          },
          {
            "text": "            self._get_selected_metadata,",
            "lineNumber": 885
          },
          {
            "text": "            self.uuids,",
            "lineNumber": 886
          },
          {
            "text": "        )  # TODO: should we enable items conditionally? For now use all",
            "lineNumber": 887
          },
          {
            "text": "        logger.debug(\"Finished ModListW&#96;idget initialization\")",
            "lineNumber": 888
          },
          {
            "lineNumber": 889
          },
          {
            "text": "    def on_selection_changed(",
            "lineNumber": 890
          },
          {
            "text": "        self, selected: QItemSelection, deselected: QItemSelection",
            "lineNumber": 891
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 892
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 893
          },
          {
            "text": "        Used to indicate when the custom widget is selected/not selected.",
            "lineNumber": 894
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 895
          },
          {
            "text": "        for index in selected.indexes():",
            "lineNumber": 896
          },
          {
            "text": "            item = self.item(index.row())",
            "lineNumber": 897
          },
          {
            "text": "            widget = self.itemWidget(item)",
            "lineNumber": 898
          },
          {
            "text": "            if widget:",
            "lineNumber": 899
          },
          {
            "text": "                widget.set_selected(True)  # type: ignore",
            "lineNumber": 900
          },
          {
            "lineNumber": 901
          },
          {
            "text": "        for index in deselected.indexes():",
            "lineNumber": 902
          },
          {
            "text": "            item = self.item(index.row())",
            "lineNumber": 903
          },
          {
            "text": "            widget = self.itemWidget(item)",
            "lineNumber": 904
          },
          {
            "text": "            if widget:",
            "lineNumber": 905
          },
          {
            "text": "                widget.set_selected(False)  # type: ignore",
            "lineNumber": 906
          },
          {
            "lineNumber": 907
          },
          {
            "text": "    def item(self, row: int) -&gt; CustomListWidgetItem:",
            "lineNumber": 908
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 909
          }
        ]
      },
      "score": 0.3557812571525574
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "lineNumber": 2463
          },
          {
            "lineNumber": 2464
          },
          {
            "text": "    def mod_clicked(self, current: CustomListWidgetItem) -&gt; None:",
            "lineNumber": 2465
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2466
          },
          {
            "text": "        Method to handle clicking on a row. Necessary because &#96;mod_changed_to&#96; does not",
            "lineNumber": 2467
          },
          {
            "text": "        properly handle clicking on a previous selected item after clicking on an item",
            "lineNumber": 2468
          },
          {
            "text": "        in another list. For example, clicking on item 1 in the inactive list, then on item 2",
            "lineNumber": 2469
          },
          {
            "text": "        in the active list, then back to item 1 in the inactive list-- this method makes",
            "lineNumber": 2470
          },
          {
            "text": "        it so that mod info is updated as expected.",
            "lineNumber": 2471
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2472
          },
          {
            "text": "        if current is not None:",
            "lineNumber": 2473
          },
          {
            "text": "            data = current.data(Qt.ItemDataRole.UserRole)",
            "lineNumber": 2474
          },
          {
            "text": "            self.mod_info_signal.emit(data[\"uuid\"], current)",
            "lineNumber": 2475
          },
          {
            "text": "            mod_info = self.metadata_manager.internal_local_metadata[data[\"uuid\"]]",
            "lineNumber": 2476
          },
          {
            "text": "            mod_info = flatten_to_list(mod_info)",
            "lineNumber": 2477
          },
          {
            "text": "            mod_info_pretty = json.dumps(mod_info, indent=4)",
            "lineNumber": 2478
          },
          {
            "text": "            logger.debug(",
            "lineNumber": 2479
          },
          {
            "text": "                f\"USER ACTION: mod was clicked: [{data['uuid']}] {mod_info_pretty}\"",
            "lineNumber": 2480
          },
          {
            "text": "            )",
            "lineNumber": 2481
          },
          {
            "lineNumber": 2482
          },
          {
            "text": "    def mod_double_clicked(self, item: CustomListWidgetItem) -&gt; None:",
            "lineNumber": 2483
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2484
          },
          {
            "text": "        Method to handle double clicking on a row.",
            "lineNumber": 2485
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2486
          },
          {
            "text": "        # widget = ModListItemInner = self.itemWidget(item)",
            "lineNumber": 2487
          },
          {
            "text": "        self.key_press_signal.emit(\"DoubleClick\")",
            "lineNumber": 2488
          },
          {
            "lineNumber": 2489
          },
          {
            "text": "    def rebuild_item_widget_from_uuid(self, uuid: str) -&gt; None:",
            "lineNumber": 2490
          },
          {
            "text": "        item_index = self.uuids.index(uuid)",
            "lineNumber": 2491
          }
        ]
      },
      "score": 0.34646961092948914
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\utils\\custom_list_widget_item_metadata.py",
        "range": {
          "startPosition": {
            "line": 16
          },
          "endPosition": {
            "line": 169
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 17,
                "column": 1
              },
              "endPosition": {
                "line": 18,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 22,
                "column": 5
              },
              "endPosition": {
                "line": 41,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class CustomListWidgetItemMetadata:",
            "lineNumber": 17,
            "isSignature": true
          },
          {
            "text": "def __init__(",
            "lineNumber": 22
          },
          {
            "text": "        self,",
            "lineNumber": 23
          },
          {
            "text": "        uuid: str,",
            "lineNumber": 24
          },
          {
            "text": "        settings_controller: SettingsController,",
            "lineNumber": 25
          },
          {
            "text": "        errors_warnings: str = \"\",",
            "lineNumber": 26
          },
          {
            "text": "        errors: str = \"\",",
            "lineNumber": 27
          },
          {
            "text": "        warnings: str = \"\",",
            "lineNumber": 28
          },
          {
            "text": "        warning_toggled: bool = False,",
            "lineNumber": 29
          },
          {
            "text": "        filtered: bool = False,",
            "lineNumber": 30
          },
          {
            "text": "        hidden_by_filter: bool = False,",
            "lineNumber": 31
          },
          {
            "text": "        user_notes: str = \"\",",
            "lineNumber": 32
          },
          {
            "text": "        invalid: bool | None = None,",
            "lineNumber": 33
          },
          {
            "text": "        mismatch: bool | None = None,",
            "lineNumber": 34
          },
          {
            "text": "        mod_color: QColor | None = None,",
            "lineNumber": 35
          },
          {
            "text": "        alternative: Optional[str] = None,",
            "lineNumber": 36
          },
          {
            "text": "        list_type: str | None = None,",
            "lineNumber": 37
          },
          {
            "text": "        aux_metadata_controller: AuxMetadataController | None = None,",
            "lineNumber": 38
          },
          {
            "text": "        aux_metadata_session: Session | None = None,",
            "lineNumber": 39
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 40
          },
          {
            "text": "\"\"\"",
            "lineNumber": 41
          },
          {
            "text": "        Must provide a uuid, the rest is optional.",
            "lineNumber": 42
          },
          {
            "lineNumber": 43
          },
          {
            "text": "        Unless explicitly provided, invalid and mismatch are automatically set based on the uuid using metadata manager.",
            "lineNumber": 44
          },
          {
            "lineNumber": 45
          },
          {
            "text": "        :param uuid: str, the uuid of the mod which corresponds to a mod's metadata",
            "lineNumber": 46
          },
          {
            "text": "        :param settings_controller: SettingsController, instance of settings controller",
            "lineNumber": 47
          },
          {
            "text": "        :param errors_warnings: a string of errors and warnings",
            "lineNumber": 48
          },
          {
            "text": "        :param errors: a string of errors for the notification tooltip",
            "lineNumber": 49
          },
          {
            "text": "        :param warnings: a string of warnings for the notification tooltip",
            "lineNumber": 50
          },
          {
            "text": "        :param warning_toggled: a bool representing if the warning/error icons are toggled off",
            "lineNumber": 51
          },
          {
            "text": "        :param filtered: a bool representing whether the widget's item is filtered",
            "lineNumber": 52
          },
          {
            "text": "        :param hidden_by_filter: a bool representing whether the widget's item is hidden because of a filter (Search, or Mod Type (C#, Xml, Local Mod, Steam Mod etc.)",
            "lineNumber": 53
          },
          {
            "text": "        :param invalid: a bool representing whether the widget's item is an invalid mod",
            "lineNumber": 54
          },
          {
            "text": "        :param user_notes: str, representing the users own notes for this mod",
            "lineNumber": 55
          },
          {
            "text": "        :param mismatch: a bool representing whether the widget's item has a version mismatch",
            "lineNumber": 56
          },
          {
            "text": "        :param mod_color: QColor, the color of the mod's text/background in the modlist",
            "lineNumber": 57
          },
          {
            "text": "        :param alternative: a bool representing whether the widget's item has an alternative mod in the \"Use This Instead\" database",
            "lineNumber": 58
          },
          {
            "text": "        :param aux_metadata_controller: AuxMetadataController, an instance of the controller used for fetching mod color",
            "lineNumber": 59
          },
          {
            "text": "        :param aux_metadata_session: Session, an instance of the session used for fetching mod color",
            "lineNumber": 60
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 61
          },
          {
            "text": "        # Do not cache the metadata manager, aux metadata controller or settings controller",
            "lineNumber": 62
          },
          {
            "text": "        # They will cause freezes/crashes when dragging mods from inactive-&gt;active or vice versa",
            "lineNumber": 63
          },
          {
            "lineNumber": 64
          },
          {
            "text": "        # Metadata attributes",
            "lineNumber": 65
          },
          {
            "text": "        self.uuid = uuid",
            "lineNumber": 66
          },
          {
            "text": "        self.errors_warnings = errors_warnings",
            "lineNumber": 67
          },
          {
            "text": "        self.errors = errors",
            "lineNumber": 68
          },
          {
            "text": "        self.warnings = warnings",
            "lineNumber": 69
          },
          {
            "text": "        self.filtered = filtered",
            "lineNumber": 70
          },
          {
            "text": "        self.hidden_by_filter = hidden_by_filter",
            "lineNumber": 71
          }
        ]
      },
      "score": 0.3459339141845703
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 3129
          },
          "endPosition": {
            "line": 4800
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 3130,
                "column": 1
              },
              "endPosition": {
                "line": 3131,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 3706,
                "column": 5
              },
              "endPosition": {
                "line": 3707,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 3707,
                "column": 5
              },
              "endPosition": {
                "line": 3708,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModsPanel(QWidget):",
            "lineNumber": 3130,
            "isSignature": true
          },
          {
            "text": "@Slot(dict)",
            "lineNumber": 3706
          },
          {
            "text": "def _on_folder_size_finished(self, sizes: dict[str, int]) -&gt; None:",
            "lineNumber": 3707
          },
          {
            "lineNumber": 3749
          },
          {
            "text": "                )",
            "lineNumber": 3750
          },
          {
            "text": "            )",
            "lineNumber": 3751
          },
          {
            "lineNumber": 3752
          },
          {
            "text": "            # OPTIMIZATION 1: Single DB session for all mods instead of per-mod",
            "lineNumber": 3753
          },
          {
            "text": "            with aux_metadata_controller.Session() as aux_metadata_session:",
            "lineNumber": 3754
          },
          {
            "text": "                for idx, uuid_key in enumerate(sorted_uuids, start=1):",
            "lineNumber": 3755
          },
          {
            "text": "                    list_item = CustomListWidgetItem(lw)",
            "lineNumber": 3756
          },
          {
            "text": "                    # Create metadata with aux controller to reduce lookups",
            "lineNumber": 3757
          },
          {
            "text": "                    data = CustomListWidgetItemMetadata(",
            "lineNumber": 3758
          },
          {
            "text": "                        uuid=uuid_key,",
            "lineNumber": 3759
          },
          {
            "text": "                        list_type=lw.list_type,",
            "lineNumber": 3760
          },
          {
            "text": "                        settings_controller=self.settings_controller,",
            "lineNumber": 3761
          },
          {
            "text": "                        aux_metadata_controller=aux_metadata_controller,",
            "lineNumber": 3762
          },
          {
            "text": "                        aux_metadata_session=aux_metadata_session,",
            "lineNumber": 3763
          },
          {
            "text": "                    )",
            "lineNumber": 3764
          },
          {
            "text": "                    list_item.setData(Qt.ItemDataRole.UserRole, data)",
            "lineNumber": 3765
          },
          {
            "text": "                    lw.addItem(list_item)",
            "lineNumber": 3766
          },
          {
            "text": "                    if (",
            "lineNumber": 3767
          },
          {
            "text": "                        hasattr(self, \"_size_progress_dialog\")",
            "lineNumber": 3768
          },
          {
            "text": "                        and self._size_progress_dialog",
            "lineNumber": 3769
          },
          {
            "text": "                    ):",
            "lineNumber": 3770
          },
          {
            "text": "                        self._size_progress_dialog.setValue(idx)",
            "lineNumber": 3771
          },
          {
            "text": "            lw.uuids = sorted_uuids",
            "lineNumber": 3772
          },
          {
            "lineNumber": 3773
          },
          {
            "text": "            # Reconnect model signals",
            "lineNumber": 3774
          },
          {
            "text": "            lw.model().rowsInserted.connect(",
            "lineNumber": 3775
          },
          {
            "text": "                lw.handle_rows_inserted, Qt.ConnectionType.QueuedConnection",
            "lineNumber": 3776
          },
          {
            "text": "            )",
            "lineNumber": 3777
          },
          {
            "text": "            lw.model().rowsAboutToBeRemoved.connect(",
            "lineNumber": 3778
          },
          {
            "text": "                lw.handle_rows_removed, Qt.ConnectionType.QueuedConnection",
            "lineNumber": 3779
          },
          {
            "text": "            )",
            "lineNumber": 3780
          },
          {
            "text": "            lw.setUpdatesEnabled(True)",
            "lineNumber": 3781
          },
          {
            "text": "            lw.repaint()",
            "lineNumber": 3782
          },
          {
            "text": "            # Load visible widgets after rebuild completes",
            "lineNumber": 3783
          },
          {
            "text": "            lw.check_widgets_visible()",
            "lineNumber": 3784
          },
          {
            "text": "            # Emit signal to update counts and errors/warnings",
            "lineNumber": 3785
          },
          {
            "text": "            lw.list_update_signal.emit(str(lw.count()))",
            "lineNumber": 3786
          },
          {
            "text": "        finally:",
            "lineNumber": 3787
          },
          {
            "text": "            if hasattr(self, \"_size_progress_dialog\") and",
            "lineNumber": 3788
          }
        ]
      },
      "score": 0.34181639552116394
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 3129
          },
          "endPosition": {
            "line": 4800
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 3130,
                "column": 1
              },
              "endPosition": {
                "line": 3131,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 3983,
                "column": 5
              },
              "endPosition": {
                "line": 3985,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModsPanel(QWidget):",
            "lineNumber": 3130,
            "isSignature": true
          },
          {
            "text": "def apply_mods_filter_type(self, list_type: str) -&gt; None:",
            "lineNumber": 3983
          },
          {
            "text": "        # Define the mod types",
            "lineNumber": 3984
          },
          {
            "lineNumber": 4025
          },
          {
            "lineNumber": 4026
          },
          {
            "text": "        # Apply filtering based on the selected type",
            "lineNumber": 4027
          },
          {
            "text": "        for uuid in mod_list.uuids:",
            "lineNumber": 4028
          },
          {
            "text": "            item = mod_list.item(mod_list.uuids.index(uuid))",
            "lineNumber": 4029
          },
          {
            "text": "            item_data = item.data(Qt.ItemDataRole.UserRole)",
            "lineNumber": 4030
          },
          {
            "lineNumber": 4031
          },
          {
            "text": "            # Determine the mod type",
            "lineNumber": 4032
          },
          {
            "text": "            mod_type = (",
            "lineNumber": 4033
          },
          {
            "text": "                \"csharp\"",
            "lineNumber": 4034
          },
          {
            "text": "                if self.metadata_manager.internal_local_metadata.get(uuid, {}).get(",
            "lineNumber": 4035
          },
          {
            "text": "                    \"csharp\"",
            "lineNumber": 4036
          },
          {
            "text": "                )",
            "lineNumber": 4037
          },
          {
            "text": "                else \"xml\"",
            "lineNumber": 4038
          },
          {
            "text": "            )",
            "lineNumber": 4039
          },
          {
            "text": "            if mod_type and mod_types:",
            "lineNumber": 4040
          },
          {
            "text": "                item.setData(Qt.ItemDataRole.UserRole, item_data)",
            "lineNumber": 4041
          },
          {
            "lineNumber": 4042
          },
          {
            "text": "        if source_index == 0:",
            "lineNumber": 4043
          },
          {
            "text": "            filters_active = False",
            "lineNumber": 4044
          },
          {
            "text": "        else:",
            "lineNumber": 4045
          },
          {
            "text": "            filters_active = True",
            "lineNumber": 4046
          },
          {
            "text": "        # Trigger search and filters",
            "lineNumber": 4047
          },
          {
            "text": "        self.signal_search_and_filters(",
            "lineNumber": 4048
          },
          {
            "text": "            list_type=list_type,",
            "lineNumber": 4049
          },
          {
            "text": "            pattern=search.text(),",
            "lineNumber": 4050
          },
          {
            "text": "            filters_active=filters_active,",
            "lineNumber": 4051
          },
          {
            "text": "        )",
            "lineNumber": 4052
          },
          {
            "lineNumber": 4053
          },
          {
            "text": "    def on_mod_deleted(self, uuid: str) -&gt; None:",
            "lineNumber": 4054
          },
          {
            "text": "        if uuid in self.active_mods_list.uuids:",
            "lineNumber": 4055
          },
          {
            "text": "            index = self.active_mods_list.uuids.index(uuid)",
            "lineNumber": 4056
          },
          {
            "text": "            self.active_mods_list.takeItem(index)",
            "lineNumber": 4057
          },
          {
            "text": "            self.active_mods_list.uuids.pop(index)",
            "lineNumber": 4058
          },
          {
            "text": "            self.update_count(list_type=\"Active\")",
            "lineNumber": 4059
          },
          {
            "text": "        elif uuid in self.inactive_mods_list.uuids:",
            "lineNumber": 4060
          },
          {
            "text": "            index = self.inactive_mods_list.uuids.index(uuid)",
            "lineNumber": 4061
          },
          {
            "text": "            self.inactive_mods_list.takeItem(index)",
            "lineNumber": 4062
          },
          {
            "text": "            self.inactive_mods_list.uuids.pop(index)",
            "lineNumber": 4063
          },
          {
            "text": "            self.update_count(list_type=\"Inactive\")",
            "lineNumber": 4064
          },
          {
            "lineNumber": 4065
          },
          {
            "text": "    def on_mod_metadata_updated(self, uuid: str) -&gt; None:",
            "lineNumber": 4066
          },
          {
            "text": "        if uuid in self.active_mods_list.uuids:",
            "lineNumber": 4067
          },
          {
            "text": "            self.active_mods_list.rebuild_item_widget_from_uuid(uuid=uuid)",
            "lineNumber": 4068
          },
          {
            "text": "        elif uuid in self.inactive_mods_list.uuids:",
            "lineNumber": 4069
          },
          {
            "text": "            self.inactive_mods_list.rebuild_item_widget_from_uuid(uuid=uuid)",
            "lineNumber": 4070
          },
          {
            "lineNumber": 4071
          },
          {
            "text": "    def recalculate_list_errors_warnings(self, list_type: str) -&gt; None:",
            "lineNumber": 4072
          },
          {
            "text": "        ",
            "lineNumber": 4073
          }
        ]
      },
      "score": 0.3415471315383911
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\windows\\base_mods_panel.py",
        "range": {
          "startPosition": {
            "line": 122,
            "column": 53
          },
          "endPosition": {
            "line": 1412
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "class BaseModsPanel(QWidget):",
            "lineNumber": 126,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 127
          },
          {
            "text": "    Base class used for multiple panels that display a list of mods.",
            "lineNumber": 128
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 129
          },
          {
            "lineNumber": 130
          },
          {
            "text": "    # Type hints for instance variables",
            "lineNumber": 131
          },
          {
            "text": "    metadata_manager: MetadataManager",
            "lineNumber": 132
          },
          {
            "text": "    settings_controller: Any",
            "lineNumber": 133
          },
          {
            "text": "    editor_model: QStandardItemModel",
            "lineNumber": 134
          },
          {
            "text": "    editor_table_view: QTableView",
            "lineNumber": 135
          },
          {
            "text": "    ui_elements: UIElements",
            "lineNumber": 136
          },
          {
            "text": "    layouts: Layouts",
            "lineNumber": 137
          },
          {
            "lineNumber": 138
          },
          {
            "text": "    # Common column definitions for standardization",
            "lineNumber": 139
          },
          {
            "text": "    COL_MOD_NAME = \"Name\"",
            "lineNumber": 140
          },
          {
            "text": "    COL_AUTHOR = \"Author\"",
            "lineNumber": 141
          },
          {
            "text": "    COL_PACKAGE_ID = \"Package ID\"",
            "lineNumber": 142
          },
          {
            "text": "    COL_PUBLISHED_FILE_ID = \"Published File Id\"",
            "lineNumber": 143
          },
          {
            "text": "    COL_SUPPORTED_VERSIONS = \"Supported Versions\"",
            "lineNumber": 144
          },
          {
            "text": "    COL_MOD_DOWNLOADED = \"Mod Downloaded\"",
            "lineNumber": 145
          },
          {
            "text": "    COL_UPDATED_ON_WORKSHOP = \"Updated on Workshop\"",
            "lineNumber": 146
          },
          {
            "text": "    COL_SOURCE = \"Source\"",
            "lineNumber": 147
          },
          {
            "text": "    COL_PATH = \"Path\"",
            "lineNumber": 148
          },
          {
            "text": "    COL_WORKSHOP_PAGE = \"Workshop Page\"",
            "lineNumber": 149
          },
          {
            "lineNumber": 150
          },
          {
            "text": "    def _setup_metadata(self) -&gt; None:",
            "lineNumber": 151
          },
          {
            "text": "        \"\"\"Set up metadata manager and settings controller.\"\"\"",
            "lineNumber": 152
          },
          {
            "text": "        self.metadata_manager = MetadataManager.instance()",
            "lineNumber": 153
          },
          {
            "text": "        self.settings_controller = self.metadata_manager.settings_controller",
            "lineNumber": 154
          },
          {
            "lineNumber": 155
          },
          {
            "text": "    def _get_steam_client_integration_enabled(self) -&gt; bool:",
            "lineNumber": 156
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 157
          },
          {
            "text": "        Get whether Steam client integration is enabled.",
            "lineNumber": 158
          },
          {
            "lineNumber": 159
          },
          {
            "text": "        Returns:",
            "lineNumber": 160
          },
          {
            "text": "            True if Steam client integration is enabled, False otherwise.",
            "lineNumber": 161
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 162
          },
          {
            "text": "        return self.settings_controller.settings.instances[",
            "lineNumber": 163
          },
          {
            "text": "            self.settings_controller.settings.current_instance",
            "lineNumber": 164
          },
          {
            "text": "        ].steam_client_integration",
            "lineNumber": 165
          },
          {
            "lineNumber": 166
          },
          {
            "text": "    def _setup_ui_elements(",
            "lineNumber": 167
          },
          {
            "text": "        self,",
            "lineNumber": 168
          },
          {
            "text": "        object_name: str,",
            "lineNumber": 169
          },
          {
            "text": "        window_title: str,",
            "lineNumber": 170
          },
          {
            "text": "        title_text: str,",
            "lineNumber": 171
          },
          {
            "text": "        details_text: str,",
            "lineNumber": 172
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 173
          },
          {
            "text": "        ",
            "lineNumber": 174
          }
        ]
      },
      "score": 0.33706873655319214
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 101
          },
          "endPosition": {
            "line": 677
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 102,
                "column": 1
              },
              "endPosition": {
                "line": 103,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 111,
                "column": 5
              },
              "endPosition": {
                "line": 124,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListItemInner(QWidget):",
            "lineNumber": 102,
            "isSignature": true
          },
          {
            "text": "def __init__(",
            "lineNumber": 111
          },
          {
            "text": "        self,",
            "lineNumber": 112
          },
          {
            "text": "        errors_warnings: str,",
            "lineNumber": 113
          },
          {
            "text": "        errors: str,",
            "lineNumber": 114
          },
          {
            "text": "        warnings: str,",
            "lineNumber": 115
          },
          {
            "text": "        filtered: bool,",
            "lineNumber": 116
          },
          {
            "text": "        invalid: bool,",
            "lineNumber": 117
          },
          {
            "text": "        mismatch: bool,",
            "lineNumber": 118
          },
          {
            "text": "        alternative: bool,",
            "lineNumber": 119
          },
          {
            "text": "        settings_controller: SettingsController,",
            "lineNumber": 120
          },
          {
            "text": "        uuid: str,",
            "lineNumber": 121
          },
          {
            "text": "        mod_color: QColor,",
            "lineNumber": 122
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 123
          },
          {
            "lineNumber": 186
          },
          {
            "text": "        self.main_item_layout.setSpacing(0)",
            "lineNumber": 187
          },
          {
            "text": "        self.font_metrics = QFontMetrics(self.font())",
            "lineNumber": 188
          },
          {
            "lineNumber": 189
          },
          {
            "text": "        # Icons that are conditional",
            "lineNumber": 190
          },
          {
            "text": "        self.csharp_icon = None",
            "lineNumber": 191
          },
          {
            "text": "        self.xml_icon = None",
            "lineNumber": 192
          },
          {
            "text": "        if self.settings_controller.settings.mod_type_filter:",
            "lineNumber": 193
          },
          {
            "text": "            if (",
            "lineNumber": 194
          },
          {
            "text": "                self.metadata_manager.internal_local_metadata.get(self.uuid, {}).get(",
            "lineNumber": 195
          },
          {
            "text": "                    \"csharp\"",
            "lineNumber": 196
          },
          {
            "text": "                )",
            "lineNumber": 197
          },
          {
            "text": "            ) is not None:",
            "lineNumber": 198
          },
          {
            "text": "                self.csharp_icon = QLabel()",
            "lineNumber": 199
          },
          {
            "text": "                self.csharp_icon.setPixmap(",
            "lineNumber": 200
          },
          {
            "text": "                    ModListIcons.csharp_icon().pixmap(QSize(20, 20))",
            "lineNumber": 201
          },
          {
            "text": "                )",
            "lineNumber": 202
          },
          {
            "text": "                self.csharp_icon.setToolTip(",
            "lineNumber": 203
          },
          {
            "text": "                    self.tr(\"Contains custom C# assemblies (custom code)\")",
            "lineNumber": 204
          },
          {
            "text": "                )",
            "lineNumber": 205
          },
          {
            "text": "            else:",
            "lineNumber": 206
          },
          {
            "text": "                self.xml_icon = QLabel()",
            "lineNumber": 207
          },
          {
            "text": "                self.xml_icon.setPixmap(ModListIcons.xml_icon().pixmap(QSize(20, 20)))",
            "lineNumber": 208
          },
          {
            "text": "                self.xml_icon.setToolTip(",
            "lineNumber": 209
          },
          {
            "text": "                    self.tr(\"Contains custom content (textures / XML)\")",
            "lineNumber": 210
          },
          {
            "text": "                )",
            "lineNumber": 211
          },
          {
            "text": "        self.git_icon = None",
            "lineNumber": 212
          },
          {
            "text": "        if (",
            "lineNumber": 213
          },
          {
            "text": "            self.metadata_manager.internal_local_metadata[self.uuid][\"data_source\"]",
            "lineNumber": 214
          },
          {
            "text": "            == \"local\"",
            "lineNumber": 215
          },
          {
            "text": "            and self.metadata_manager.internal_local_metadata[self.uuid].get(\"git_repo\")",
            "lineNumber": 216
          },
          {
            "text": "            and not self.metadata_manager.internal_local_metadata[self.uuid].get(",
            "lineNumber": 217
          },
          {
            "text": "                \"steamcmd\"",
            "lineNumber": 218
          },
          {
            "text": "            )",
            "lineNumber": 219
          },
          {
            "text": "        ):",
            "lineNumber": 220
          },
          {
            "text": "            self.git_icon = QLabel()",
            "lineNumber": 221
          },
          {
            "text": "            self.git_icon.setPixmap(ModListIcons.git_icon().pixmap(QSize(20, 20)))",
            "lineNumber": 222
          },
          {
            "text": "            self.git_icon.setToolTip(",
            "lineNumber": 223
          },
          {
            "text": "                self.tr(\"Local mod that contains a git repository\")",
            "lineNumber": 224
          },
          {
            "text": "            )",
            "lineNumber": 225
          },
          {
            "text": "        self.steamcmd_icon = None",
            "lineNumber": 226
          },
          {
            "text": "        if self.metadata_manager.internal_local_metadata[self.uuid][",
            "lineNumber": 227
          },
          {
            "text": "            \"data_source\"",
            "lineNumber": 228
          }
        ]
      },
      "score": 0.33487486839294434
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\utils\\schema.py",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 102
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "from typing import Any",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "from loguru import logger",
            "lineNumber": 3
          },
          {
            "text": "from PySide6.QtCore import QCoreApplication",
            "lineNumber": 4
          },
          {
            "lineNumber": 5
          },
          {
            "text": "from app.utils.constants import RIMWORLD_PACKAGE_IDS",
            "lineNumber": 6
          },
          {
            "text": "from app.views.dialogue import show_warning",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "translate = QCoreApplication.translate",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "def generate_rimworld_mods_list(",
            "lineNumber": 12,
            "isSignature": true
          },
          {
            "text": "    game_version: str, packageids: list[str], dlc_ids: list[str] = RIMWORLD_PACKAGE_IDS",
            "lineNumber": 13,
            "isSignature": true
          },
          {
            "text": ") -&gt; dict[str, Any]:",
            "lineNumber": 14,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 15
          },
          {
            "text": "    Generate the default Rimworld mods list",
            "lineNumber": 16
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 17
          },
          {
            "text": "    return {",
            "lineNumber": 18
          },
          {
            "text": "        \"ModsConfigData\": {",
            "lineNumber": 19
          },
          {
            "text": "            \"version\": game_version,",
            "lineNumber": 20
          },
          {
            "text": "            \"activeMods\": {",
            "lineNumber": 21
          },
          {
            "text": "                \"li\": packageids,",
            "lineNumber": 22
          },
          {
            "text": "            },",
            "lineNumber": 23
          },
          {
            "text": "            \"knownExpansions\": {",
            "lineNumber": 24
          },
          {
            "text": "                \"li\": [",
            "lineNumber": 25
          },
          {
            "text": "                    packageid",
            "lineNumber": 26
          },
          {
            "text": "                    for packageid in dlc_ids",
            "lineNumber": 27
          },
          {
            "text": "                    if packageid.lower() in RIMWORLD_PACKAGE_IDS",
            "lineNumber": 28
          },
          {
            "text": "                    and packageid.lower() != \"ludeon.rimworld\"",
            "lineNumber": 29
          },
          {
            "text": "                ],",
            "lineNumber": 30
          },
          {
            "text": "            },",
            "lineNumber": 31
          },
          {
            "text": "        },",
            "lineNumber": 32
          },
          {
            "text": "    }",
            "lineNumber": 33,
            "isSignature": true
          },
          {
            "lineNumber": 34
          },
          {
            "lineNumber": 35
          },
          {
            "text": "def validate_rimworld_mods_list(",
            "lineNumber": 36,
            "isSignature": true
          },
          {
            "text": "    mods_config_data: dict[str, Any],",
            "lineNumber": 37,
            "isSignature": true
          },
          {
            "text": ") -&gt; list[str]:",
            "lineNumber": 38,
            "isSignature": true
          },
          {
            "text": "    ",
            "lineNumber": 39
          }
        ]
      },
      "score": 0.33444398641586304
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 2587,
                "column": 5
              },
              "endPosition": {
                "line": 2588,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "text": "def recalculate_internal_errors_warnings(self) -&gt; tuple[str, str, int, int]:",
            "lineNumber": 2587
          },
          {
            "lineNumber": 2630
          },
          {
            "text": "        if save_compare_enabled:",
            "lineNumber": 2631
          },
          {
            "text": "            latest_save_ids = self._get_latest_save_package_ids()",
            "lineNumber": 2632
          },
          {
            "text": "        else:",
            "lineNumber": 2633
          },
          {
            "text": "            latest_save_ids = None",
            "lineNumber": 2634
          },
          {
            "lineNumber": 2635
          },
          {
            "text": "        for uuid, mod_errors in package_id_to_errors.items():",
            "lineNumber": 2636
          },
          {
            "text": "            current_mod_index = self.uuids.index(uuid)",
            "lineNumber": 2637
          },
          {
            "text": "            current_item = self.item(current_mod_index)",
            "lineNumber": 2638
          },
          {
            "text": "            if current_item is None:",
            "lineNumber": 2639
          },
          {
            "text": "                continue",
            "lineNumber": 2640
          },
          {
            "text": "            current_item_data = current_item.data(Qt.ItemDataRole.UserRole)",
            "lineNumber": 2641
          },
          {
            "text": "            current_item_data[\"mismatch\"] = False",
            "lineNumber": 2642
          },
          {
            "text": "            current_item_data[\"errors\"] = \"\"",
            "lineNumber": 2643
          },
          {
            "text": "            current_item_data[\"warnings\"] = \"\"",
            "lineNumber": 2644
          },
          {
            "text": "            # Mark active as new if not present in latest save; mark inactive as in_save if present in save",
            "lineNumber": 2645
          },
          {
            "text": "            if save_compare_enabled:",
            "lineNumber": 2646
          },
          {
            "text": "                try:",
            "lineNumber": 2647
          },
          {
            "text": "                    pkg_id = internal_local_metadata[uuid][\"packageid\"]",
            "lineNumber": 2648
          },
          {
            "text": "                    is_in_save = (",
            "lineNumber": 2649
          },
          {
            "text": "                        pkg_id in latest_save_ids",
            "lineNumber": 2650
          },
          {
            "text": "                        if latest_save_ids is not None",
            "lineNumber": 2651
          },
          {
            "text": "                        else False",
            "lineNumber": 2652
          },
          {
            "text": "                    )",
            "lineNumber": 2653
          },
          {
            "text": "                    if self.list_type == \"Active\":",
            "lineNumber": 2654
          },
          {
            "text": "                        current_item_data.__dict__[\"is_new\"] = not is_in_save",
            "lineNumber": 2655
          },
          {
            "text": "                        current_item_data.__dict__[\"in_save\"] = False",
            "lineNumber": 2656
          },
          {
            "text": "                    else:",
            "lineNumber": 2657
          },
          {
            "text": "                        current_item_data.__dict__[\"is_new\"] = False",
            "lineNumber": 2658
          },
          {
            "text": "                        current_item_data.__dict__[\"in_save\"] = is_in_save",
            "lineNumber": 2659
          },
          {
            "text": "                except Exception:",
            "lineNumber": 2660
          },
          {
            "text": "                    current_item_data.__dict__[\"is_new\"] = False",
            "lineNumber": 2661
          },
          {
            "text": "                    current_item_data.__dict__[\"in_save\"] = False",
            "lineNumber": 2662
          },
          {
            "text": "            else:",
            "lineNumber": 2663
          },
          {
            "text": "                current_item_data.__dict__[\"is_new\"] = False",
            "lineNumber": 2664
          },
          {
            "text": "                current_item_data.__dict__[\"in_save\"] = False",
            "lineNumber": 2665
          },
          {
            "text": "            mod_data = internal_local_metadata[uuid]",
            "lineNumber": 2666
          },
          {
            "text": "            # Check mod supportedversions against currently loaded version of game",
            "lineNumber": 2667
          },
          {
            "text": "            mod_errors[\"version_mismatch\"] = self._check_version_mismatch(uuid)",
            "lineNumber": 2668
          },
          {
            "text": "            # Set an item's validity dynamically based on the version mismatch value",
            "lineNumber": 2669
          },
          {
            "text": "            if (",
            "lineNumber": 2670
          },
          {
            "text": "                mod_data[\"packageid\"] not in self.ignore_warning_list",
            "lineNumber": 2671
          }
        ]
      },
      "score": 0.33394119143486023
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "separator divider category functionality in mod list",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\main_content_panel.py",
        "range": {
          "startPosition": {
            "line": 94
          },
          "endPosition": {
            "line": 3647
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 95,
                "column": 1
              },
              "endPosition": {
                "line": 96,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 115,
                "column": 5
              },
              "endPosition": {
                "line": 116,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainContent(QObject):",
            "lineNumber": 95,
            "isSignature": true
          },
          {
            "text": "def __init__(self, settings_controller: SettingsController) -&gt; None:",
            "lineNumber": 115
          },
          {
            "text": "  # Space between mod lists and action buttons",
            "lineNumber": 246
          },
          {
            "lineNumber": 247
          },
          {
            "text": "            self.main_splitter = QSplitter(Qt.Orientation.Horizontal)",
            "lineNumber": 248
          },
          {
            "text": "            self.main_splitter.setChildrenCollapsible(False)",
            "lineNumber": 249
          },
          {
            "lineNumber": 250
          },
          {
            "text": "            # FRAME REQUIRED - to allow for styling",
            "lineNumber": 251
          },
          {
            "text": "            self.main_layout_frame = QFrame()",
            "lineNumber": 252
          },
          {
            "text": "            self.main_layout_frame.setObjectName(\"MainPanel\")",
            "lineNumber": 253
          },
          {
            "text": "            self.main_layout_frame.setLayout(self.main_layout)",
            "lineNumber": 254
          },
          {
            "lineNumber": 255
          },
          {
            "text": "            # INSTANTIATE WIDGETS",
            "lineNumber": 256
          },
          {
            "text": "            self.mod_info_panel = ModInfoPanel(",
            "lineNumber": 257
          },
          {
            "text": "                settings_controller=self.settings_controller,",
            "lineNumber": 258
          },
          {
            "text": "            )",
            "lineNumber": 259
          },
          {
            "text": "            self.mods_panel = ModsPanel(",
            "lineNumber": 260
          },
          {
            "text": "                settings_controller=self.settings_controller,",
            "lineNumber": 261
          },
          {
            "text": "            )",
            "lineNumber": 262
          },
          {
            "lineNumber": 263
          },
          {
            "text": "            self.mod_info_container = QWidget()",
            "lineNumber": 264
          },
          {
            "text": "            self.mod_info_container.setLayout(self.mod_info_panel.panel)",
            "lineNumber": 265
          },
          {
            "lineNumber": 266
          },
          {
            "text": "            self.mods_panel_container = QWidget()",
            "lineNumber": 267
          },
          {
            "text": "            self.mods_panel_container.setLayout(self.mods_panel.panel)",
            "lineNumber": 268
          },
          {
            "lineNumber": 269
          },
          {
            "text": "            self.main_splitter.addWidget(self.mod_info_container)",
            "lineNumber": 270
          },
          {
            "text": "            self.main_splitter.addWidget(self.mods_panel_container)",
            "lineNumber": 271
          },
          {
            "lineNumber": 272
          },
          {
            "text": "            self.main_splitter.setHandleWidth(1)",
            "lineNumber": 273
          },
          {
            "lineNumber": 274
          },
          {
            "text": "            self.mod_info_container.setMinimumWidth(280)",
            "lineNumber": 275
          },
          {
            "text": "            # WIDGETS INTO BASE LAYOUT",
            "lineNumber": 276
          },
          {
            "text": "            self.main_layout.addWidget(self.main_splitter)",
            "lineNumber": 277
          },
          {
            "lineNumber": 278
          },
          {
            "text": "            # SIGNALS AND SLOTS",
            "lineNumber": 279
          },
          {
            "text": "            self.metadata_manager.mod_created_signal.connect(",
            "lineNumber": 280
          },
          {
            "text": "                self.mods_panel.on_mod_created  # Connect MetadataManager to ModPanel for mod creation",
            "lineNumber": 281
          },
          {
            "text": "            )",
            "lineNumber": 282
          },
          {
            "text": "            self.metadata_manager.mod_deleted_signal.connect(",
            "lineNumber": 283
          },
          {
            "text": "                self.mods_panel.on_mod_deleted  # Connect MetadataManager to ModPanel for mod deletion",
            "lineNumber": 284
          },
          {
            "text": "            )",
            "lineNumber": 285
          },
          {
            "text": "            self.metadata_manager.mod_metadata_updated_signal.connect(",
            "lineNumber": 286
          },
          {
            "text": "                self.mods_panel.on_mod_metadata_updated  # Connect MetadataManager to ModPanel for mod metadata updates",
            "lineNumber": 287
          },
          {
            "text": "            )",
            "lineNumber": 288
          },
          {
            "text": "            self.mods_panel.active_mods_list.key_press_signal.connect(",
            "lineNumber": 289
          },
          {
            "text": "                self.__handle_active_mod_key_press",
            "lineNumber": 290
          },
          {
            "text": "            )",
            "lineNumber": 291
          }
        ]
      },
      "score": 0.27793848514556885
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 3129
          },
          "endPosition": {
            "line": 4800
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 3130,
                "column": 1
              },
              "endPosition": {
                "line": 3131,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 3152,
                "column": 5
              },
              "endPosition": {
                "line": 3153,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModsPanel(QWidget):",
            "lineNumber": 3130,
            "isSignature": true
          },
          {
            "text": "def __init__(self, settings_controller: SettingsController) -&gt; None:",
            "lineNumber": 3183
          },
          {
            "lineNumber": 3220
          },
          {
            "text": "        self._pending_sort_params: Optional[",
            "lineNumber": 3221
          },
          {
            "text": "            tuple[str, list[str], ModsPanelSortKey, bool]",
            "lineNumber": 3222
          },
          {
            "text": "        ] = None",
            "lineNumber": 3223
          },
          {
            "lineNumber": 3224
          },
          {
            "text": "        # Base layout with a splitter for resizable mod lists",
            "lineNumber": 3225
          },
          {
            "text": "        self.panel = QVBoxLayout()",
            "lineNumber": 3226
          },
          {
            "text": "        self.lists_splitter = QSplitter(Qt.Orientation.Horizontal)",
            "lineNumber": 3227
          },
          {
            "text": "        self.lists_splitter.setChildrenCollapsible(False)",
            "lineNumber": 3228
          },
          {
            "text": "        self.lists_splitter.setHandleWidth(4)",
            "lineNumber": 3229
          },
          {
            "text": "        self.active_panel = QVBoxLayout()",
            "lineNumber": 3230
          },
          {
            "text": "        self.inactive_panel = QVBoxLayout()",
            "lineNumber": 3231
          },
          {
            "text": "        self.inactive_container = QWidget()",
            "lineNumber": 3232
          },
          {
            "text": "        self.inactive_container.setLayout(self.inactive_panel)",
            "lineNumber": 3233
          },
          {
            "text": "        self.active_container = QWidget()",
            "lineNumber": 3234
          },
          {
            "text": "        self.active_container.setLayout(self.active_panel)",
            "lineNumber": 3235
          },
          {
            "text": "        self.lists_splitter.addWidget(self.inactive_container)",
            "lineNumber": 3236
          },
          {
            "text": "        self.lists_splitter.addWidget(self.active_container)",
            "lineNumber": 3237
          },
          {
            "text": "        self.lists_splitter.setStretchFactor(0, 1)",
            "lineNumber": 3238
          },
          {
            "text": "        self.lists_splitter.setStretchFactor(1, 1)",
            "lineNumber": 3239
          },
          {
            "text": "        self.panel.addWidget(self.lists_splitter, 1)",
            "lineNumber": 3240
          },
          {
            "lineNumber": 3241
          },
          {
            "text": "        # Create the buttons layout",
            "lineNumber": 3242
          },
          {
            "text": "        self.button_panel = QHBoxLayout()",
            "lineNumber": 3243
          },
          {
            "text": "        # Create buttons frame",
            "lineNumber": 3244
          },
          {
            "text": "        self.button_panel_frame: QFrame = QFrame()",
            "lineNumber": 3245
          },
          {
            "text": "        self.button_panel_frame.setObjectName(\"MainWindowButtons\")",
            "lineNumber": 3246
          },
          {
            "lineNumber": 3247
          },
          {
            "text": "        # Create and add Use This Instead button",
            "lineNumber": 3248
          },
          {
            "text": "        self.use_this_instead_button = QPushButton(",
            "lineNumber": 3249
          },
          {
            "text": "            self.tr('Check \"Use This Instead\" Database')",
            "lineNumber": 3250
          },
          {
            "text": "        )",
            "lineNumber": 3251
          },
          {
            "text": "        self.use_this_instead_button.setObjectName(\"UseThisInsteadButton\")",
            "lineNumber": 3252
          },
          {
            "text": "        self.use_this_instead_button.clicked.connect(",
            "lineNumber": 3253
          },
          {
            "text": "            EventBus().use_this_instead_clicked.emit",
            "lineNumber": 3254
          },
          {
            "text": "        )",
            "lineNumber": 3255
          },
          {
            "text": "        self.button_panel.addWidget(self.use_this_instead_button)",
            "lineNumber": 3256
          },
          {
            "lineNumber": 3257
          },
          {
            "text": "        # Create and add Check Dependencies button",
            "lineNumber": 3258
          },
          {
            "text": "        self.check_dependencies_button: QPushButton = QPushButton(",
            "lineNumber": 3259
          },
          {
            "text": "            self.tr(\"Check Dependencies\")",
            "lineNumber": 3260
          },
          {
            "text": "        )",
            "lineNumber": 3261
          },
          {
            "text": "        self.check_dependencies_button.setObjectName(\"CheckDependenciesButton\")",
            "lineNumber": 3262
          },
          {
            "text": "        self.button_panel.addWidget(self.check_dependencies_button)",
            "lineNumber": 3263
          },
          {
            "text": "        self.check_dependencies_button.clicked.connect(",
            "lineNumber": 3264
          },
          {
            "text": "            self.check_dependencies_signal.emit",
            "lineNumber": 3265
          },
          {
            "text": "        )",
            "lineNumber": 3266
          }
        ]
      },
      "score": 0.274007111787796
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "lineNumber": 812
          },
          {
            "lineNumber": 813
          },
          {
            "text": "    def __init__(self, list_type: str, settings_controller: SettingsController) -&gt; None:",
            "lineNumber": 814
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 815
          },
          {
            "text": "        Initialize the ListWidget with a dict of mods.",
            "lineNumber": 816
          },
          {
            "text": "        Keys are the package ids and values are a dict of",
            "lineNumber": 817
          },
          {
            "text": "        mod attributes. See tags:",
            "lineNumber": 818
          },
          {
            "text": "        https://rimworldwiki.com/wiki/About.xml",
            "lineNumber": 819
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 820
          },
          {
            "text": "        logger.debug(\"Initializing ModListWidget\")",
            "lineNumber": 821
          },
          {
            "lineNumber": 822
          },
          {
            "text": "        # Cache list_type for later use",
            "lineNumber": 823
          },
          {
            "text": "        self.list_type = list_type",
            "lineNumber": 824
          },
          {
            "lineNumber": 825
          },
          {
            "text": "        # Cache MetadataManager instance",
            "lineNumber": 826
          },
          {
            "text": "        self.metadata_manager = MetadataManager.instance()",
            "lineNumber": 827
          },
          {
            "lineNumber": 828
          },
          {
            "text": "        self.settings_controller = settings_controller",
            "lineNumber": 829
          },
          {
            "lineNumber": 830
          },
          {
            "text": "        super(ModListWidget, self).__init__()",
            "lineNumber": 831
          },
          {
            "lineNumber": 832
          },
          {
            "text": "        # Track when a custom widget (ModListItemInner) is selected/not selected",
            "lineNumber": 833
          },
          {
            "text": "        self.selectionModel().selectionChanged.connect(self.on_selection_changed)",
            "lineNumber": 834
          },
          {
            "lineNumber": 835
          },
          {
            "text": "        # Allow for dragging and dropping between lists",
            "lineNumber": 836
          },
          {
            "text": "        self.setDefaultDropAction(Qt.DropAction.MoveAction)",
            "lineNumber": 837
          },
          {
            "text": "        self.setDragDropMode(QAbstractItemView.DragDropMode.DragDrop)",
            "lineNumber": 838
          },
          {
            "lineNumber": 839
          },
          {
            "text": "        # Allow for selecting and moving multiple items",
            "lineNumber": 840
          },
          {
            "text": "        self.setSelectionMode(QAbstractItemView.SelectionMode.ExtendedSelection)",
            "lineNumber": 841
          },
          {
            "lineNumber": 842
          },
          {
            "text": "        # When an item is clicked, display the mod information",
            "lineNumber": 843
          },
          {
            "text": "        self.currentItemChanged.connect(self.mod_changed_to)",
            "lineNumber": 844
          },
          {
            "text": "        self.itemClicked.connect(self.mod_clicked)",
            "lineNumber": 845
          },
          {
            "lineNumber": 846
          },
          {
            "text": "        # When an item is double clicked, move it to the opposite list",
            "lineNumber": 847
          },
          {
            "text": "        self.itemDoubleClicked.connect(self.mod_double_clicked)",
            "lineNumber": 848
          },
          {
            "lineNumber": 849
          },
          {
            "text": "        # Add an eventFilter for per mod_list_item context menu",
            "lineNumber": 850
          },
          {
            "text": "        self.installEventFilter(self)",
            "lineNumber": 851
          },
          {
            "lineNumber": 852
          },
          {
            "text": "        # Disable horizontal scroll bar",
            "lineNumber": 853
          },
          {
            "text": "        self.horizontalScrollBar().setEnabled(False)",
            "lineNumber": 854
          },
          {
            "text": "        self.horizontalScrollBar().setVisible(False)",
            "lineNumber": 855
          },
          {
            "lineNumber": 856
          },
          {
            "text": "        # Optimizes performance",
            "lineNumber": 857
          },
          {
            "text": "        # self.setUniformItemSizes(True)",
            "lineNumber": 858
          },
          {
            "lineNumber": 859
          },
          {
            "text": "        # Slot to handle item widgets when itemChanged()",
            "lineNumber": 860
          },
          {
            "text": "        self.itemChanged.connect(self.handle_item_data_changed)",
            "lineNumber": 861
          },
          {
            "lineNumber": 862
          },
          {
            "text": "        # Allow inserting custom list items",
            "lineNumber": 863
          }
        ]
      },
      "score": 0.2478000968694687
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 779,
            "column": 30
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 784
          },
          {
            "text": "    Subclass for QListWidget. Used to store lists for",
            "lineNumber": 785
          },
          {
            "text": "    active and inactive mods. Mods can be rearranged within",
            "lineNumber": 786
          },
          {
            "text": "    their own lists or moved from one list to another.",
            "lineNumber": 787
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 788
          },
          {
            "lineNumber": 789
          },
          {
            "text": "    SORT_TEXT_TO_KEY_MAP = {",
            "lineNumber": 790
          },
          {
            "text": "        \"Name\": ModsPanelSortKey.MODNAME,",
            "lineNumber": 791
          },
          {
            "text": "        \"Author\": ModsPanelSortKey.AUTHOR,",
            "lineNumber": 792
          },
          {
            "text": "        \"Modified Time\": ModsPanelSortKey.FILESYSTEM_MODIFIED_TIME,",
            "lineNumber": 793
          },
          {
            "text": "        \"Folder Size\": ModsPanelSortKey.FOLDER_SIZE,",
            "lineNumber": 794
          },
          {
            "text": "        \"Version\": ModsPanelSortKey.VERSION,",
            "lineNumber": 795
          },
          {
            "text": "        \"PackageId\": ModsPanelSortKey.PACKAGEID,",
            "lineNumber": 796
          },
          {
            "text": "        \"Color\": ModsPanelSortKey.MOD_COLOR,",
            "lineNumber": 797
          },
          {
            "text": "    }",
            "lineNumber": 798
          },
          {
            "lineNumber": 799
          },
          {
            "text": "    @staticmethod",
            "lineNumber": 800
          },
          {
            "text": "    def _text_to_sort_key(text: str) -&gt; ModsPanelSortKey:",
            "lineNumber": 801
          },
          {
            "text": "        return ModListWidget.SORT_TEXT_TO_KEY_MAP.get(text, ModsPanelSortKey.MODNAME)",
            "lineNumber": 802
          },
          {
            "lineNumber": 803
          },
          {
            "text": "    edit_rules_signal = Signal(bool, str, str)",
            "lineNumber": 804
          },
          {
            "text": "    item_added_signal = Signal(str)",
            "lineNumber": 805
          },
          {
            "text": "    key_press_signal = Signal(str)",
            "lineNumber": 806
          },
          {
            "text": "    list_update_signal = Signal(str)",
            "lineNumber": 807
          },
          {
            "text": "    mod_info_signal = Signal(str, CustomListWidgetItem)",
            "lineNumber": 808
          },
          {
            "text": "    recalculate_warnings_signal = Signal()",
            "lineNumber": 809
          },
          {
            "text": "    refresh_signal = Signal()",
            "lineNumber": 810
          },
          {
            "text": "    update_git_mods_signal = Signal(list)",
            "lineNumber": 811
          },
          {
            "text": "    steamdb_blacklist_signal = Signal(list)",
            "lineNumber": 812
          },
          {
            "lineNumber": 813
          },
          {
            "text": "    def __init__(self, list_type: str, settings_controller: SettingsController) -&gt; None:",
            "lineNumber": 814
          },
          {
            "text": "        ",
            "lineNumber": 815
          }
        ]
      },
      "score": 0.2350344955921173
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 814,
                "column": 5
              },
              "endPosition": {
                "line": 815,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "text": "def __init__(self, list_type: str, settings_controller: SettingsController) -&gt; None:",
            "lineNumber": 814
          },
          {
            "lineNumber": 861
          },
          {
            "lineNumber": 862
          },
          {
            "text": "        # Allow inserting custom list items",
            "lineNumber": 863
          },
          {
            "text": "        self.model().rowsInserted.connect(self.handle_rows_inserted, Qt.ConnectionType.QueuedConnection)",
            "lineNumber": 864
          },
          {
            "lineNumber": 865
          },
          {
            "text": "        # Handle removing items to update count",
            "lineNumber": 866
          },
          {
            "text": "        self.model().rowsAboutToBeRemoved.connect(self.handle_rows_removed, Qt.ConnectionType.QueuedConnection)",
            "lineNumber": 867
          },
          {
            "lineNumber": 868
          },
          {
            "text": "        # Lazy load ModListItemInner",
            "lineNumber": 869
          },
          {
            "text": "        self.verticalScrollBar().valueChanged.connect(self.check_widgets_visible)",
            "lineNumber": 870
          },
          {
            "lineNumber": 871
          },
          {
            "text": "        # This set is used to keep track of mods that have been loaded",
            "lineNumber": 872
          },
          {
            "text": "        # into widgets. Used for an optimization strategy for &#96;handle_rows_inserted&#96;",
            "lineNumber": 873
          },
          {
            "text": "        self.uuids: list[str] = []",
            "lineNumber": 874
          },
          {
            "text": "        self.ignore_warning_list: list[str] = []",
            "lineNumber": 875
          },
          {
            "text": "        # Cache of latest save package ids to check new mods",
            "lineNumber": 876
          },
          {
            "text": "        self._latest_save_package_ids: set[str] | None = None",
            "lineNumber": 877
          },
          {
            "text": "        ",
            "lineNumber": 878
          },
          {
            "text": "        # Translation status",
            "lineNumber": 879
          },
          {
            "text": "        self.show_translation_status: bool = False",
            "lineNumber": 880
          },
          {
            "text": "        self.translation_lookup: set[str] = set()",
            "lineNumber": 881
          },
          {
            "lineNumber": 882
          },
          {
            "text": "        self.deletion_sub_menu = ModDeletionMenu(",
            "lineNumber": 883
          },
          {
            "text": "            self.settings_controller,",
            "lineNumber": 884
          },
          {
            "text": "            self._get_selected_metadata,",
            "lineNumber": 885
          },
          {
            "text": "            self.uuids,",
            "lineNumber": 886
          },
          {
            "text": "        )  # TODO: should we enable items conditionally? For now use all",
            "lineNumber": 887
          },
          {
            "text": "        logger.debug(\"Finished ModListW&#96;idget initialization\")",
            "lineNumber": 888
          },
          {
            "lineNumber": 889
          },
          {
            "text": "    def on_selection_changed(",
            "lineNumber": 890
          },
          {
            "text": "        self, selected: QItemSelection, deselected: QItemSelection",
            "lineNumber": 891
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 892
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 893
          },
          {
            "text": "        Used to indicate when the custom widget is selected/not selected.",
            "lineNumber": 894
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 895
          },
          {
            "text": "        for index in selected.indexes():",
            "lineNumber": 896
          },
          {
            "text": "            item = self.item(index.row())",
            "lineNumber": 897
          },
          {
            "text": "            widget = self.itemWidget(item)",
            "lineNumber": 898
          },
          {
            "text": "            if widget:",
            "lineNumber": 899
          },
          {
            "text": "                widget.set_selected(True)  # type: ignore",
            "lineNumber": 900
          },
          {
            "lineNumber": 901
          },
          {
            "text": "        for index in deselected.indexes():",
            "lineNumber": 902
          },
          {
            "text": "            item = self.item(index.row())",
            "lineNumber": 903
          },
          {
            "text": "            widget = self.itemWidget(item)",
            "lineNumber": 904
          },
          {
            "text": "            if widget:",
            "lineNumber": 905
          },
          {
            "text": "                widget.set_selected(False)  # type: ignore",
            "lineNumber": 906
          },
          {
            "lineNumber": 907
          },
          {
            "text": "    def item(self, row: int) -&gt; CustomListWidgetItem:",
            "lineNumber": 908
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 909
          }
        ]
      },
      "score": 0.23262730240821838
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\models\\metadata\\metadata_structure.py",
        "range": {
          "startPosition": {
            "line": 231,
            "column": 81
          },
          "endPosition": {
            "line": 364
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "@dataclass",
            "lineNumber": 235
          },
          {
            "text": "class ListedMod(BaseMod):",
            "lineNumber": 236,
            "isSignature": true
          },
          {
            "text": "    \"\"\"A mod which can be displayed in a list.",
            "lineNumber": 237
          },
          {
            "lineNumber": 238
          },
          {
            "text": "    Includes the minimum required fields for a mod to be displayed in a list.",
            "lineNumber": 239
          },
          {
            "lineNumber": 240
          },
          {
            "text": "    Attributes:",
            "lineNumber": 241
          },
          {
            "text": "        valid (bool): Whether the mod is considered valid by RimSort.",
            "lineNumber": 242
          },
          {
            "text": "        description (str): A description of the mod.",
            "lineNumber": 243
          },
          {
            "text": "        supported_versions (set[str]): A set of supported RimWorld versions.",
            "lineNumber": 244
          },
          {
            "text": "        description (str): A description of the mod.",
            "lineNumber": 245
          },
          {
            "text": "        mod_path (Path | None): The path to the mod on disk.",
            "lineNumber": 246
          },
          {
            "text": "        mod_folder (str | None): The folder name of the mod path.",
            "lineNumber": 247
          },
          {
            "text": "        internal_time_touched (int): The last modified time of the mod's path. If the path does not exist, -1 is returned.",
            "lineNumber": 248
          },
          {
            "text": "        mod_type (ModType): The type of the mod.",
            "lineNumber": 249
          },
          {
            "text": "        uuid (str): The internal unique identifier for the mod.",
            "lineNumber": 250
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 251
          },
          {
            "lineNumber": 252
          },
          {
            "text": "    valid: bool = True",
            "lineNumber": 253
          },
          {
            "lineNumber": 254
          },
          {
            "text": "    supported_versions: set[str] = field(default_factory=set)",
            "lineNumber": 255
          },
          {
            "text": "    description: str = (",
            "lineNumber": 256
          },
          {
            "text": "        \"This mod is considered invalid by RimSort (and the RimWorld game).\"",
            "lineNumber": 257
          },
          {
            "text": "        + \"\\n\\nThis mod does NOT contain an ./About/About.xml and is likely leftover from previous usage.\"",
            "lineNumber": 258
          },
          {
            "text": "        + \"\\n\\nThis can happen sometimes with Steam mods if there are leftover .dds textures or unexpected data.\"",
            "lineNumber": 259
          },
          {
            "text": "    )",
            "lineNumber": 260
          },
          {
            "lineNumber": 261
          },
          {
            "text": "    _mod_path: Path | None = None",
            "lineNumber": 262
          },
          {
            "text": "    _mod_type: ModType = ModType.UNKNOWN",
            "lineNumber": 263
          },
          {
            "lineNumber": 264
          },
          {
            "text": "    @property",
            "lineNumber": 265
          },
          {
            "text": "    def mod_path(self) -&gt; Path | None:",
            "lineNumber": 266
          },
          {
            "text": "        return self._mod_path",
            "lineNumber": 267
          },
          {
            "lineNumber": 268
          },
          {
            "text": "    @mod_path.setter",
            "lineNumber": 269
          },
          {
            "text": "    def mod_path(self, path: Path) -&gt; None:",
            "lineNumber": 270
          },
          {
            "text": "        \"\"\"Set the mod path for the mod.",
            "lineNumber": 271
          },
          {
            "text": "        Can only be set once as this acts as the uuid when set.",
            "lineNumber": 272
          },
          {
            "text": "        Raises an exception if the path is already set.",
            "lineNumber": 273
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 274
          },
          {
            "text": "        if self._mod_path:",
            "lineNumber": 275
          },
          {
            "text": "            raise ValueError(\"Mod path already set. Cannot override.\")",
            "lineNumber": 276
          },
          {
            "text": "        self._mod_path = path",
            "lineNumber": 277
          },
          {
            "lineNumber": 278
          },
          {
            "text": "        if hasattr(self, \"published_file_id\"):",
            "lineNumber": 279
          },
          {
            "text": "            del self.published_file_id",
            "lineNumber": 280
          },
          {
            "lineNumber": 281
          },
          {
            "text": "    @property",
            "lineNumber": 282
          },
          {
            "text": "    def mod_folder(self) -&gt; str | None:",
            "lineNumber": 283
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 284
          }
        ]
      },
      "score": 0.22199329733848572
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mod_info_panel.py",
        "range": {
          "startPosition": {
            "line": 86,
            "column": 38
          },
          "endPosition": {
            "line": 745
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 40,
                "column": 1
              },
              "endPosition": {
                "line": 41,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModInfoPanel:",
            "lineNumber": 90,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 91
          },
          {
            "text": "    This class controls the layout and functionality for the",
            "lineNumber": 92
          },
          {
            "text": "    mod information panel on the GUI.",
            "lineNumber": 93
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 94
          },
          {
            "lineNumber": 95
          },
          {
            "text": "    def __init__(self, settings_controller: SettingsController) -&gt; None:",
            "lineNumber": 96
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 97
          },
          {
            "text": "        Initialize the class.",
            "lineNumber": 98
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 99
          },
          {
            "text": "        logger.debug(\"Initializing ModInfo\")",
            "lineNumber": 100
          },
          {
            "lineNumber": 101
          },
          {
            "text": "        # Cache MetadataManager instance",
            "lineNumber": 102
          },
          {
            "text": "        self.metadata_manager = MetadataManager.instance()",
            "lineNumber": 103
          },
          {
            "text": "        self.settings_controller = settings_controller",
            "lineNumber": 104
          },
          {
            "lineNumber": 105
          },
          {
            "text": "        # Used to keep track of which mod items notes we are viewing/editing",
            "lineNumber": 106
          },
          {
            "text": "        # This is set when a mod is clicked on",
            "lineNumber": 107
          },
          {
            "text": "        self.current_mod_item: CustomListWidgetItem | None = None",
            "lineNumber": 108
          },
          {
            "lineNumber": 109
          },
          {
            "text": "        # Base layout type",
            "lineNumber": 110
          },
          {
            "text": "        self.panel = QVBoxLayout()",
            "lineNumber": 111
          },
          {
            "text": "        self.info_panel_frame = QFrame()",
            "lineNumber": 112
          },
          {
            "lineNumber": 113
          },
          {
            "text": "        # Child layouts",
            "lineNumber": 114
          },
          {
            "text": "        self.info_layout = QVBoxLayout()",
            "lineNumber": 115
          },
          {
            "text": "        self.image_layout = QHBoxLayout()",
            "lineNumber": 116
          },
          {
            "text": "        self.image_layout.setAlignment(Qt.AlignmentFlag.AlignCenter)",
            "lineNumber": 117
          },
          {
            "text": "        self.mod_info_layout = QVBoxLayout()",
            "lineNumber": 118
          },
          {
            "text": "        self.mod_info_name = QHBoxLayout()",
            "lineNumber": 119
          },
          {
            "text": "        self.scenario_info_summary = QHBoxLayout()",
            "lineNumber": 120
          },
          {
            "text": "        self.mod_info_package_id = QHBoxLayout()",
            "lineNumber": 121
          },
          {
            "text": "        self.mod_info_authors = QHBoxLayout()",
            "lineNumber": 122
          },
          {
            "text": "        self.mod_info_mod_version = QHBoxLayout()",
            "lineNumber": 123
          },
          {
            "text": "        self.mod_info_supported_versions = QHBoxLayout()",
            "lineNumber": 124
          },
          {
            "text": "        self.mod_info_folder_size = QHBoxLayout()",
            "lineNumber": 125
          },
          {
            "text": "        self.mod_info_path = QHBoxLayout()",
            "lineNumber": 126
          },
          {
            "text": "        self.mod_info_last_touched = QHBoxLayout()",
            "lineNumber": 127
          },
          {
            "text": "        self.mod_info_filesystem_time = QHBoxLayout()",
            "lineNumber": 128
          },
          {
            "text": "        self.mod_info_external_times = QHBoxLayout()",
            "lineNumber": 129
          },
          {
            "text": "        self.description_layout = QHBoxLayout()",
            "lineNumber": 130
          },
          {
            "text": "        self.notes_layout = QHBoxLayout()",
            "lineNumber": 131
          },
          {
            "lineNumber": 132
          },
          {
            "text": "        # Add child layouts to base",
            "lineNumber": 133
          },
          {
            "text": "        self.info_layout.addLayout(self.image_layout, 35)",
            "lineNumber": 134
          },
          {
            "text": "        self.info_layout.addLayout(self.mod_info_layout, 20)",
            "lineNumber": 135
          },
          {
            "text": "        self.info_layout.addLayout(self.notes_layout, 15)",
            "lineNumber": 136
          },
          {
            "text": "        self.info_layout.addLayout(self.description_layout, 30)",
            "lineNumber": 137
          },
          {
            "text": "        self.info_panel_frame.setLayout(self.info_layout)",
            "lineNumber": 138
          },
          {
            "text": "        self.panel.addWidget(self.info_panel_frame)",
            "lineNumber": 139
          },
          {
            "lineNumber": 140
          },
          {
            "text": "        # Create widgets",
            "lineNumber": 141
          },
          {
            "text": "        self.missing_image_path =",
            "lineNumber": 142
          }
        ]
      },
      "score": 0.21775704622268677
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\windows\\rule_editor_panel.py",
        "range": {
          "startPosition": {
            "line": 105
          },
          "endPosition": {
            "line": 1411
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 106,
                "column": 1
              },
              "endPosition": {
                "line": 107,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 119,
                "column": 5
              },
              "endPosition": {
                "line": 125,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class RuleEditor(QWidget):",
            "lineNumber": 106,
            "isSignature": true
          },
          {
            "text": "def __init__(",
            "lineNumber": 119
          },
          {
            "text": "        self,",
            "lineNumber": 120
          },
          {
            "text": "        initial_mode: str,",
            "lineNumber": 121
          },
          {
            "text": "        compact: bool | None = None,",
            "lineNumber": 122
          },
          {
            "text": "        edit_packageid: str | None = None,",
            "lineNumber": 123
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 124
          },
          {
            "lineNumber": 407
          },
          {
            "text": "        self.editor_save_user_rules_button.clicked.connect(",
            "lineNumber": 408
          },
          {
            "text": "            partial(self._save_editor_rules, rules_source=\"User Rules\")",
            "lineNumber": 409
          },
          {
            "text": "        )",
            "lineNumber": 410
          },
          {
            "text": "        # MODS WIDGETS",
            "lineNumber": 411
          },
          {
            "text": "        # Mods search",
            "lineNumber": 412
          },
          {
            "text": "        self.mods_search = QLineEdit()",
            "lineNumber": 413
          },
          {
            "text": "        self.mods_search.setClearButtonEnabled(True)",
            "lineNumber": 414
          },
          {
            "text": "        self.mods_search.textChanged.connect(self.signal_mods_search)",
            "lineNumber": 415
          },
          {
            "text": "        self.mods_search.setPlaceholderText(self.tr(\"Search mods by name\"))",
            "lineNumber": 416
          },
          {
            "text": "        self.mods_search_clear_button: object | QToolButton | None = (",
            "lineNumber": 417
          },
          {
            "text": "            self.mods_search.findChild(QToolButton)",
            "lineNumber": 418
          },
          {
            "text": "        )",
            "lineNumber": 419
          },
          {
            "text": "        if type(self.mods_search_clear_button) is not QToolButton:",
            "lineNumber": 420
          },
          {
            "text": "            raise Exception(\"Failed to find clear button in QLineEdit\")",
            "lineNumber": 421
          },
          {
            "text": "        if self.mods_search_clear_button is not None:",
            "lineNumber": 422
          },
          {
            "text": "            self.mods_search_clear_button.setEnabled(True)",
            "lineNumber": 423
          },
          {
            "text": "            self.mods_search_clear_button.clicked.connect(self.clear_mods_search)",
            "lineNumber": 424
          },
          {
            "text": "        # Mods list",
            "lineNumber": 425
          },
          {
            "text": "        self.mods_list = QListWidget()",
            "lineNumber": 426
          },
          {
            "text": "        self.mods_list.setContextMenuPolicy(Qt.ContextMenuPolicy.CustomContextMenu)",
            "lineNumber": 427
          },
          {
            "text": "        self.mods_list.customContextMenuRequested.connect(self.modItemContextMenuEvent)",
            "lineNumber": 428
          },
          {
            "text": "        self.mods_list.setDragEnabled(True)",
            "lineNumber": 429
          },
          {
            "lineNumber": 430
          },
          {
            "text": "        # Actions",
            "lineNumber": 431
          },
          {
            "text": "        self.local_metadata_button = QPushButton()",
            "lineNumber": 432
          },
          {
            "text": "        self.local_metadata_button.clicked.connect(",
            "lineNumber": 433
          },
          {
            "text": "            partial(",
            "lineNumber": 434
          },
          {
            "text": "                self._toggle_details_layout_widgets,",
            "lineNumber": 435
          },
          {
            "text": "                self.internal_local_metadata_layout,",
            "lineNumber": 436
          },
          {
            "text": "            )",
            "lineNumber": 437
          },
          {
            "text": "        )",
            "lineNumber": 438
          },
          {
            "text": "        self.community_rules_button = QPushButton()",
            "lineNumber": 439
          },
          {
            "text": "        self.community_rules_button.clicked.connect(",
            "lineNumber": 440
          },
          {
            "text": "            partial(",
            "lineNumber": 441
          },
          {
            "text": "                self._toggle_details_layout_widgets,",
            "lineNumber": 442
          },
          {
            "text": "                self.external_community_rules_layout,",
            "lineNumber": 443
          },
          {
            "text": "            )",
            "lineNumber": 444
          },
          {
            "text": "        )",
            "lineNumber": 445
          },
          {
            "text": "        self.user_rules_button = QPushButton()",
            "lineNumber": 446
          },
          {
            "text": "        self.user_rules_button.clicked.connect(",
            "lineNumber": 447
          },
          {
            "text": "            partial(",
            "lineNumber": 448
          },
          {
            "text": "                self._toggle_details_layout_widgets,",
            "lineNumber": 449
          },
          {
            "text": "                self.external_user_rules_layout,",
            "lineNumber": 450
          },
          {
            "text": "            )",
            "lineNumber": 451
          },
          {
            "text": "        )",
            "lineNumber": 452
          },
          {
            "text": "        # Build the details layout",
            "lineNumber": 453
          },
          {
            "text": "        self.internal_local_metadata_layout.addWidget",
            "lineNumber": 454
          }
        ]
      },
      "score": 0.217330202460289
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\models\\metadata\\metadata_structure.py",
        "range": {
          "startPosition": {
            "line": 402
          },
          "endPosition": {
            "line": 507
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 403,
                "column": 1
              },
              "endPosition": {
                "line": 404,
                "column": 1
              }
            },
            {
              "startPosition": {
                "line": 404,
                "column": 1
              },
              "endPosition": {
                "line": 405,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "@dataclass",
            "lineNumber": 403
          },
          {
            "text": "class AboutXmlMod(ListedMod, PackageIdMod):",
            "lineNumber": 404,
            "isSignature": true
          },
          {
            "lineNumber": 426
          },
          {
            "lineNumber": 427
          },
          {
            "text": "    @functools.cached_property",
            "lineNumber": 428
          },
          {
            "text": "    def overall_rules(self) -&gt; Rules:",
            "lineNumber": 429
          },
          {
            "text": "        \"\"\"Return the overall rules for the mod which properly merges the rules from the About, Community, and User sections.",
            "lineNumber": 430
          },
          {
            "lineNumber": 431
          },
          {
            "text": "        About has lowest priority, followed by Community, and User has the highest priority.",
            "lineNumber": 432
          },
          {
            "text": "        Conflicting order rules are not resolved and may cause issue at sort.",
            "lineNumber": 433
          },
          {
            "text": "        Load top and bottom rules will be true of any one of the rules type has it set to true.",
            "lineNumber": 434
          },
          {
            "lineNumber": 435
          },
          {
            "text": "        Cached property",
            "lineNumber": 436
          },
          {
            "lineNumber": 437
          },
          {
            "text": "        Returns:",
            "lineNumber": 438
          },
          {
            "text": "            BaseRules: The overall rules for the mod.",
            "lineNumber": 439
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 440
          },
          {
            "text": "        overall_rules = Rules()",
            "lineNumber": 441
          },
          {
            "lineNumber": 442
          },
          {
            "text": "        # Load before",
            "lineNumber": 443
          },
          {
            "text": "        overall_rules.load_before = (",
            "lineNumber": 444
          },
          {
            "text": "            self.about_rules.load_before",
            "lineNumber": 445
          },
          {
            "text": "            | self.community_rules.load_before",
            "lineNumber": 446
          },
          {
            "text": "            | self.user_rules.load_before",
            "lineNumber": 447
          },
          {
            "text": "        )",
            "lineNumber": 448
          },
          {
            "lineNumber": 449
          },
          {
            "text": "        # Load after",
            "lineNumber": 450
          },
          {
            "text": "        overall_rules.load_after = (",
            "lineNumber": 451
          },
          {
            "text": "            self.about_rules.load_after",
            "lineNumber": 452
          },
          {
            "text": "            | self.community_rules.load_after",
            "lineNumber": 453
          },
          {
            "text": "            | self.user_rules.load_after",
            "lineNumber": 454
          },
          {
            "text": "        )",
            "lineNumber": 455
          },
          {
            "lineNumber": 456
          },
          {
            "text": "        # Incompatible with",
            "lineNumber": 457
          },
          {
            "text": "        overall_rules.incompatible_with = (",
            "lineNumber": 458
          },
          {
            "text": "            self.about_rules.incompatible_with",
            "lineNumber": 459
          },
          {
            "text": "            | self.community_rules.incompatible_with",
            "lineNumber": 460
          },
          {
            "text": "            | self.user_rules.incompatible_with",
            "lineNumber": 461
          },
          {
            "text": "        )",
            "lineNumber": 462
          },
          {
            "lineNumber": 463
          },
          {
            "text": "        # Dependencies",
            "lineNumber": 464
          },
          {
            "text": "        overall_rules.dependencies = {",
            "lineNumber": 465
          },
          {
            "text": "            **self.about_rules.dependencies,",
            "lineNumber": 466
          },
          {
            "text": "            **self.community_rules.dependencies,",
            "lineNumber": 467
          },
          {
            "text": "            **self.user_rules.dependencies,",
            "lineNumber": 468
          },
          {
            "text": "        }",
            "lineNumber": 469
          },
          {
            "lineNumber": 470
          },
          {
            "text": "        # Load first / last",
            "lineNumber": 471
          },
          {
            "text": "        overall_rules.load_first = (",
            "lineNumber": 472
          },
          {
            "text": "            self.community_rules.load_first or self.user_rules.load_first",
            "lineNumber": 473
          },
          {
            "text": "        )",
            "lineNumber": 474
          },
          {
            "text": "        overall_rules.load_last = (",
            "lineNumber": 475
          },
          {
            "text": "            self.community_rules.load_last or self.user_rules.load_last",
            "lineNumber": 476
          },
          {
            "text": "        )",
            "lineNumber": 477
          },
          {
            "lineNumber": 478
          },
          {
            "text": "        return overall_rules",
            "lineNumber": 479
          },
          {
            "lineNumber": 480
          },
          {
            "text": "    @functools.cached_property",
            "lineNumber": 481
          },
          {
            "text": "    def overall_rules_with_deps(self) -&gt; Rules:",
            "lineNumber": 482
          },
          {
            "text": "        ",
            "lineNumber": 483
          }
        ]
      },
      "score": 0.2133186012506485
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\windows\\missing_mod_properties_panel.py",
        "range": {
          "startPosition": {
            "line": 13
          },
          "endPosition": {
            "line": 330,
            "column": 27
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 14,
                "column": 1
              },
              "endPosition": {
                "line": 15,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MissingModPropertiesPanel(BaseModsPanel):",
            "lineNumber": 14,
            "isSignature": true
          },
          {
            "lineNumber": 298
          },
          {
            "lineNumber": 299
          },
          {
            "text": "    def _build_grouped_mods(",
            "lineNumber": 300
          },
          {
            "text": "        self,",
            "lineNumber": 301
          },
          {
            "text": "    ) -&gt; dict[str, list[tuple[str, dict[str, Any]]]]:",
            "lineNumber": 302
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 303
          },
          {
            "text": "        Build dictionary of grouped mods from UUID lists.",
            "lineNumber": 304
          },
          {
            "lineNumber": 305
          },
          {
            "text": "        Returns:",
            "lineNumber": 306
          },
          {
            "text": "            Dictionary mapping category names to list of (uuid, metadata) tuples",
            "lineNumber": 307
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 308
          },
          {
            "text": "        grouped_mods: dict[str, list[tuple[str, dict[str, Any]]]] = {}",
            "lineNumber": 309
          },
          {
            "lineNumber": 310
          },
          {
            "text": "        categories = [",
            "lineNumber": 311
          },
          {
            "text": "            (\"Mods with Missing Package ID\", self.missing_packageid_mods),",
            "lineNumber": 312
          },
          {
            "text": "            (\"Mods with Missing Publish Field ID\", self.missing_publishfieldid_mods),",
            "lineNumber": 313
          },
          {
            "text": "        ]",
            "lineNumber": 314
          },
          {
            "lineNumber": 315
          },
          {
            "text": "        for category_name, uuids in categories:",
            "lineNumber": 316
          },
          {
            "text": "            if not uuids:",
            "lineNumber": 317
          },
          {
            "text": "                continue",
            "lineNumber": 318
          },
          {
            "lineNumber": 319
          },
          {
            "text": "            category_mods: list[tuple[str, dict[str, Any]]] = []",
            "lineNumber": 320
          },
          {
            "text": "            for uuid in uuids:",
            "lineNumber": 321
          },
          {
            "text": "                mod_metadata = self.metadata_manager.internal_local_metadata.get(uuid)",
            "lineNumber": 322
          },
          {
            "text": "                if mod_metadata:",
            "lineNumber": 323
          },
          {
            "text": "                    category_mods.append((uuid, mod_metadata))",
            "lineNumber": 324
          },
          {
            "text": "                else:",
            "lineNumber": 325
          },
          {
            "text": "                    logger.warning(f\"Metadata not found for UUID: {uuid}\")",
            "lineNumber": 326
          },
          {
            "lineNumber": 327
          },
          {
            "text": "            if category_mods:",
            "lineNumber": 328
          },
          {
            "text": "                grouped_mods[category_name] = category_mods",
            "lineNumber": 329
          },
          {
            "lineNumber": 330
          },
          {
            "text": "        return grouped_mods",
            "lineNumber": 331,
            "isSignature": true
          }
        ]
      },
      "score": 0.21170419454574585
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\models\\metadata\\metadata_structure.py",
        "range": {
          "startPosition": {
            "line": 399,
            "column": 27
          },
          "endPosition": {
            "line": 507
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "@dataclass",
            "lineNumber": 403
          },
          {
            "text": "class AboutXmlMod(ListedMod, PackageIdMod):",
            "lineNumber": 404,
            "isSignature": true
          },
          {
            "text": "    \"\"\"A listed mod with rules for load order and dependencies.",
            "lineNumber": 405
          },
          {
            "lineNumber": 406
          },
          {
            "text": "    Attributes:",
            "lineNumber": 407
          },
          {
            "text": "        authors (list[str]): A list of authors for the mod.",
            "lineNumber": 408
          },
          {
            "text": "        mod_version (str): The version of the mod.",
            "lineNumber": 409
          },
          {
            "text": "        mod_icon_path (Path | None): The path to the mod icon.",
            "lineNumber": 410
          },
          {
            "text": "        steam_app_id (int): The Steam app ID for the mod.",
            "lineNumber": 411
          },
          {
            "text": "        url (str): A URL for the mod.",
            "lineNumber": 412
          },
          {
            "text": "        about_rules (BaseRules): The rules for the About section of the mod.",
            "lineNumber": 413
          },
          {
            "text": "        community_rules (Rules): The rules for the Community section of the mod.",
            "lineNumber": 414
          },
          {
            "text": "        user_rules (Rules): The rules for the User section of the mod.",
            "lineNumber": 415
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 416
          },
          {
            "lineNumber": 417
          },
          {
            "text": "    authors: list[str] = field(default_factory=list)",
            "lineNumber": 418
          },
          {
            "text": "    mod_version: str = \"\"",
            "lineNumber": 419
          },
          {
            "text": "    mod_icon_path: Path | None = None",
            "lineNumber": 420
          },
          {
            "text": "    steam_app_id: int = -1",
            "lineNumber": 421
          },
          {
            "text": "    url: str = \"\"",
            "lineNumber": 422
          },
          {
            "lineNumber": 423
          },
          {
            "text": "    about_rules: BaseRules = field(default_factory=BaseRules)",
            "lineNumber": 424
          },
          {
            "text": "    community_rules: Rules = field(default_factory=Rules)",
            "lineNumber": 425
          },
          {
            "text": "    user_rules: Rules = field(default_factory=Rules)",
            "lineNumber": 426
          },
          {
            "lineNumber": 427
          },
          {
            "text": "    @functools.cached_property",
            "lineNumber": 428
          },
          {
            "text": "    def overall_rules(self) -&gt; Rules:",
            "lineNumber": 429
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 430
          }
        ]
      },
      "score": 0.21057724952697754
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\user-guide\\rule-editor.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 50
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "---",
            "lineNumber": 1
          },
          {
            "text": "title: Rule Editor",
            "lineNumber": 2
          },
          {
            "text": "nav_order: 4",
            "lineNumber": 3
          },
          {
            "text": "parent: User Guide",
            "lineNumber": 4
          },
          {
            "text": "permalink: user-guide/rule-editor",
            "lineNumber": 5
          },
          {
            "text": "---",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "# Rule Editor",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "To access the rule editor either navigate to &#96;Edit &gt; Rule Editor...&#96; in the main menu bar, or open the context menu for the mod you wish to edit and navigate to &#96;Miscellaneous Options &gt; Edit mod with Rule Editor&#96;.",
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "![Rule Editor Preview](../assets/images/previews/rule_editor.png)",
            "lineNumber": 12
          },
          {
            "lineNumber": 13
          },
          {
            "text": "## Overview",
            "lineNumber": 14
          },
          {
            "lineNumber": 15
          },
          {
            "text": "The Rule Editor is a powerful tool in RimSort that allows you to view, create, and modify load order rules for mods. These rules determine how mods are sorted and loaded in RimWorld, ensuring compatibility and proper functionality. The editor supports three types of rules:",
            "lineNumber": 16
          },
          {
            "lineNumber": 17
          },
          {
            "text": "- **About.xml Rules**: Rules defined directly in a mod's &#96;About.xml&#96; file (read-only)",
            "lineNumber": 18
          },
          {
            "text": "- **Community Rules**: Shared rules contributed by the community",
            "lineNumber": 19
          },
          {
            "text": "- **User Rules**: Personal rules you create for your own use",
            "lineNumber": 20
          },
          {
            "lineNumber": 21
          },
          {
            "text": "## Accessing the Rule Editor",
            "lineNumber": 22
          },
          {
            "lineNumber": 23
          },
          {
            "text": "### From the Main Menu",
            "lineNumber": 24
          },
          {
            "text": "1. Click on &#96;Edit&#96; in the main menu bar",
            "lineNumber": 25
          },
          {
            "text": "2. Select &#96;Rule Editor...&#96;",
            "lineNumber": 26
          },
          {
            "lineNumber": 27
          },
          {
            "text": "### From a Mod's Context Menu",
            "lineNumber": 28
          },
          {
            "text": "1. Right-click on a mod in the active or inactive mods list",
            "lineNumber": 29
          },
          {
            "text": "2. Navigate to &#96;Miscellaneous Options &gt; Edit mod with Rule Editor&#96;",
            "lineNumber": 30
          },
          {
            "lineNumber": 31
          },
          {
            "text": "## Interface Layout",
            "lineNumber": 32
          },
          {
            "lineNumber": 33
          },
          {
            "text": "The Rule Editor window is divided into several sections:",
            "lineNumber": 34
          },
          {
            "lineNumber": 35
          },
          {
            "text": "### Mod Details Panel (Left Side)",
            "lineNumber": 36
          },
          {
            "text": "This panel shows the rules for the currently selected mod, organized by rule type:",
            "lineNumber": 37
          },
          {
            "lineNumber": 38
          },
          {
            "text": "- **About.xml (loadAfter)**: Mods that must load after this mod",
            "lineNumber": 39
          },
          {
            "text": "- **About.xml (loadBefore)**: Mods that must load before this mod",
            "lineNumber": 40
          },
          {
            "text": "- **About.xml (incompatibilitiesWith)**: Mods that are incompatible with this mod",
            "lineNumber": 41
          },
          {
            "lineNumber": 42
          },
          {
            "text": "- **Community Rules (loadAfter/loadBefore/incompatibilitiesWith)**: Community-defined rules",
            "lineNumber": 43
          },
          {
            "text": "- **Force load at top/bottom**: Checkboxes to force the mod to load at the top or bottom of the list",
            "lineNumber": 44
          },
          {
            "lineNumber": 45
          },
          {
            "text": "### Mods List (Top Right)",
            "lineNumber": 46
          },
          {
            "text": "- A searchable list of all available mods",
            "lineNumber": 47
          },
          {
            "text": "- Use the search bar to filter mods by name",
            "lineNumber": 48
          },
          {
            "text": "- Drag mods from this list to the rule panels to create new rules",
            "lineNumber": 49
          }
        ]
      },
      "score": 0.2072892040014267
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\themes\\Modern\\style.qss",
        "range": {
          "startPosition": {
            "line": 422
          },
          "endPosition": {
            "line": 502
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "}",
            "lineNumber": 423
          },
          {
            "text": "QTableView::indicator {",
            "lineNumber": 424
          },
          {
            "text": "    width: 13px;",
            "lineNumber": 425
          },
          {
            "text": "    height: 13px;",
            "lineNumber": 426
          },
          {
            "text": "}",
            "lineNumber": 427
          },
          {
            "text": "QTableView::indicator:checked {",
            "lineNumber": 428
          },
          {
            "text": "    background: #2d6aa3;",
            "lineNumber": 429
          },
          {
            "text": "}",
            "lineNumber": 430
          },
          {
            "text": "QTableView::indicator:unchecked {",
            "lineNumber": 431
          },
          {
            "text": "    background: #3b4a64;",
            "lineNumber": 432
          },
          {
            "text": "}",
            "lineNumber": 433
          },
          {
            "text": "/* Styling for tool buttons */",
            "lineNumber": 434
          },
          {
            "text": "QToolButton {",
            "lineNumber": 435
          },
          {
            "text": "    background-color: #3b4a64;",
            "lineNumber": 436
          },
          {
            "text": "    border-style: solid;",
            "lineNumber": 437
          },
          {
            "text": "    border-width: 0px;",
            "lineNumber": 438
          },
          {
            "text": "    border-radius: 5px;",
            "lineNumber": 439
          },
          {
            "text": "    color: #d6e0f3;",
            "lineNumber": 440
          },
          {
            "text": "    padding: 1px;",
            "lineNumber": 441
          },
          {
            "text": "}",
            "lineNumber": 442
          },
          {
            "text": "QToolButton:hover {",
            "lineNumber": 443
          },
          {
            "text": "    background-color: #4a5a7a;",
            "lineNumber": 444
          },
          {
            "text": "}",
            "lineNumber": 445
          },
          {
            "text": "QToolButton:pressed {",
            "lineNumber": 446
          },
          {
            "text": "    background-color: #354a52;",
            "lineNumber": 447
          },
          {
            "text": "    border-style: inset;",
            "lineNumber": 448
          },
          {
            "text": "}",
            "lineNumber": 449
          },
          {
            "text": "QToolButton:disabled {",
            "lineNumber": 450
          },
          {
            "text": "    color: #888888;",
            "lineNumber": 451
          },
          {
            "text": "}",
            "lineNumber": 452
          },
          {
            "lineNumber": 453
          },
          {
            "text": "/* ===== Browser (util/steam/browser.py) ===== */",
            "lineNumber": 454
          },
          {
            "text": "QWidget#browserPanel {",
            "lineNumber": 455
          },
          {
            "text": "    background-color: #101820;",
            "lineNumber": 456
          },
          {
            "text": "}",
            "lineNumber": 457
          },
          {
            "text": "QLabel#browserPaneldownloader_label {",
            "lineNumber": 458
          },
          {
            "text": "    color: #d6e0f3;",
            "lineNumber": 459
          },
          {
            "text": "}",
            "lineNumber": 460
          },
          {
            "lineNumber": 461
          },
          {
            "text": "/* ======= MainWindow (view/main_content_panel.py) ======= */",
            "lineNumber": 462
          },
          {
            "text": "QMainWindow {",
            "lineNumber": 463
          },
          {
            "text": "    background-color: #101820;",
            "lineNumber": 464
          },
          {
            "text": "}",
            "lineNumber": 465
          },
          {
            "text": "QWidget#MainPanel {",
            "lineNumber": 466
          },
          {
            "text": "    border-style: solid;",
            "lineNumber": 467
          },
          {
            "text": "    border-color: #3b4a64;",
            "lineNumber": 468
          },
          {
            "text": "    border-width: 1px;",
            "lineNumber": 469
          },
          {
            "text": "    border-radius: 3px;",
            "lineNumber": 470
          },
          {
            "text": "    margin: 7px; /* Space between frame and app edge */",
            "lineNumber": 471
          },
          {
            "text": "}",
            "lineNumber": 472
          },
          {
            "text": "/* Styling for the mod item text */",
            "lineNumber": 473
          },
          {
            "text": "QLabel#ListItemLabel {",
            "lineNumber": 474
          },
          {
            "text": "    color: #d6e0f3;",
            "lineNumber": 475
          },
          {
            "text": "}",
            "lineNumber": 476
          },
          {
            "text": "QLabel#ListItemLabelFiltered { ",
            "lineNumber": 477
          },
          {
            "text": "    color: grey; ",
            "lineNumber": 478
          },
          {
            "text": "}",
            "lineNumber": 479
          },
          {
            "text": "QLabel#ListItemLabelInvalid {",
            "lineNumber": 480
          },
          {
            "text": "    color: red;",
            "lineNumber": 481
          },
          {
            "text": "}",
            "lineNumber": 482
          },
          {
            "text": "/* Styling for the errors summary frame */",
            "lineNumber": 483
          },
          {
            "text": "QWidget#errorFrame { /* Outer-most encapsulator */",
            "lineNumber": 484
          },
          {
            "text": "    background-color: #101820;",
            "lineNumber": 485
          },
          {
            "text": "    border-style: solid;",
            "lineNumber": 486
          },
          {
            "text": "    border-color: #3b4a64;",
            "lineNumber": 487
          },
          {
            "text": "    border-width: 1px;",
            "lineNumber": 488
          },
          {
            "text": "    border-radius: 3px;",
            "lineNumber": 489
          },
          {
            "text": "}",
            "lineNumber": 490
          },
          {
            "lineNumber": 491
          },
          {
            "text": "/* ===== GameConfiguration (view/game_configuration_panel.py) ===== */",
            "lineNumber": 492
          },
          {
            "text": "QLabel#gameVersion {",
            "lineNumber": 493
          },
          {
            "text": "    color: #d6e0f3;",
            "lineNumber": 494
          },
          {
            "text": "    margin-right: 4px;",
            "lineNumber": 495
          },
          {
            "text": "}",
            "lineNumber": 496
          },
          {
            "lineNumber": 497
          },
          {
            "text": "/* ===== Mod info panel (sub_view/mod_info_panel.py) ===== */",
            "lineNumber": 498
          },
          {
            "text": "/* Outer-most encapsulator */",
            "lineNumber": 499
          },
          {
            "text": "/* Contains QScrollArea for mod description */",
            "lineNumber": 500
          },
          {
            "text": "QWidget#descriptionWidget {",
            "lineNumber": 501
          },
          {
            "text": "    background-color: #101820;",
            "lineNumber": 502
          }
        ]
      },
      "score": 0.2052132934331894
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\windows\\base_mods_panel.py",
        "range": {
          "startPosition": {
            "line": 125
          },
          "endPosition": {
            "line": 1412
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 126,
                "column": 1
              },
              "endPosition": {
                "line": 127,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class BaseModsPanel(QWidget):",
            "lineNumber": 126,
            "isSignature": true
          },
          {
            "text": "def _add_combo_box_to_row(",
            "lineNumber": 1096
          },
          {
            "text": "        self,",
            "lineNumber": 1097
          },
          {
            "text": "        row_items: list[QStandardItem],",
            "lineNumber": 1098
          },
          {
            "text": "        combo_column: int,",
            "lineNumber": 1099
          },
          {
            "text": "        items: list[str] | None = None,",
            "lineNumber": 1100
          },
          {
            "text": "    ) -&gt; QComboBox:",
            "lineNumber": 1101
          },
          {
            "lineNumber": 1119
          },
          {
            "text": "        return combo_box",
            "lineNumber": 1120
          },
          {
            "lineNumber": 1121
          },
          {
            "text": "    # ===== NEW HELPER METHODS FOR REFACTORING =====",
            "lineNumber": 1122
          },
          {
            "lineNumber": 1123
          },
          {
            "text": "    def _add_mod_row(",
            "lineNumber": 1124
          },
          {
            "text": "        self,",
            "lineNumber": 1125
          },
          {
            "text": "        mod_info: \"ModInfo\",",
            "lineNumber": 1126
          },
          {
            "text": "        additional_items: list[QStandardItem] | None = None,",
            "lineNumber": 1127
          },
          {
            "text": "        default_checkbox_state: bool = False,",
            "lineNumber": 1128
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 1129
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 1130
          },
          {
            "text": "        Standardized method to add a mod row to the table.",
            "lineNumber": 1131
          },
          {
            "lineNumber": 1132
          },
          {
            "text": "        Args:",
            "lineNumber": 1133
          },
          {
            "text": "            mod_info: ModInfo object containing mod data",
            "lineNumber": 1134
          },
          {
            "text": "            additional_items: Optional additional QStandardItem objects for extra columns",
            "lineNumber": 1135
          },
          {
            "text": "            default_checkbox_state: Default state for the checkbox",
            "lineNumber": 1136
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 1137
          },
          {
            "text": "        # Base columns that all panels use",
            "lineNumber": 1138
          },
          {
            "text": "        base_items = [",
            "lineNumber": 1139
          },
          {
            "text": "            QStandardItem(mod_info.name),",
            "lineNumber": 1140
          },
          {
            "text": "            QStandardItem(mod_info.authors),",
            "lineNumber": 1141
          },
          {
            "text": "            QStandardItem(mod_info.packageid),",
            "lineNumber": 1142
          },
          {
            "text": "            QStandardItem(mod_info.published_file_id),",
            "lineNumber": 1143
          },
          {
            "text": "            QStandardItem(mod_info.supported_versions),",
            "lineNumber": 1144
          },
          {
            "text": "            QStandardItem(mod_info.downloaded_time),",
            "lineNumber": 1145
          },
          {
            "text": "            QStandardItem(mod_info.updated_on_workshop),",
            "lineNumber": 1146
          },
          {
            "text": "            QStandardItem(mod_info.source),",
            "lineNumber": 1147
          },
          {
            "text": "            QStandardItem(\"\"),  # Path will be displayed via widget",
            "lineNumber": 1148
          },
          {
            "text": "        ]",
            "lineNumber": 1149
          },
          {
            "lineNumber": 1150
          },
          {
            "text": "        # Add workshop page column",
            "lineNumber": 1151
          },
          {
            "text": "        workshop_item = QStandardItem()",
            "lineNumber": 1152
          },
          {
            "text": "        base_items.append(workshop_item)",
            "lineNumber": 1153
          },
          {
            "lineNumber": 1154
          },
          {
            "text": "        # Add any additional columns specific to the panel",
            "lineNumber": 1155
          },
          {
            "text": "        if additional_items:",
            "lineNumber": 1156
          },
          {
            "text": "            base_items.extend(additional_items)",
            "lineNumber": 1157
          },
          {
            "lineNumber": 1158
          },
          {
            "text": "        # Set UUID data on name item for metadata lookup",
            "lineNumber": 1159
          },
          {
            "text": "        if mod_info.uuid:",
            "lineNumber": 1160
          },
          {
            "text": "            base_items[0].setData(mod_info.uuid, Qt.ItemDataRole.UserRole)",
            "lineNumber": 1161
          },
          {
            "lineNumber": 1162
          },
          {
            "text": "        self._add_row(base_items, default_checkbox_state)",
            "lineNumber": 1163
          },
          {
            "lineNumber": 1164
          },
          {
            "text": "        # Add path link to the path column (index 9) only if path exists and row is not blank",
            "lineNumber": 1165
          },
          {
            "text": "        if mod_info.path and mod_info.path.strip():",
            "lineNumber": 1166
          },
          {
            "text": "            path_link = self._create_path_link(mod_info.path, \"pathLink\")",
            "lineNumber": 1167
          },
          {
            "text": "            self.editor_table_view.setIndexWidget(base_items[8].index(), path_link)",
            "lineNumber": 1168
          },
          {
            "lineNumber": 1169
          },
          {
            "text": "        # Add workshop button to the workshop column only if published_file_id exists",
            "lineNumber": 1170
          }
        ]
      },
      "score": 0.2031145691871643
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\themes\\Modern\\style.qss",
        "range": {
          "startPosition": {
            "line": 85
          },
          "endPosition": {
            "line": 186
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "QLabel#summaryHeader {",
            "lineNumber": 86
          },
          {
            "text": "    color: #d6e0f3;",
            "lineNumber": 87
          },
          {
            "text": "    font-weight: bold;",
            "lineNumber": 88
          },
          {
            "text": "}",
            "lineNumber": 89
          },
          {
            "text": "/* LoadingAnimation text label */",
            "lineNumber": 90
          },
          {
            "text": "QLabel#loadingAnimationString {",
            "lineNumber": 91
          },
          {
            "text": "    font-size: 18 px;",
            "lineNumber": 92
          },
          {
            "text": "}",
            "lineNumber": 93
          },
          {
            "text": "/* Metadata value labels + text */",
            "lineNumber": 94
          },
          {
            "text": "QLabel#summaryLabel {",
            "lineNumber": 95
          },
          {
            "text": "    color: #d6e0f3;",
            "lineNumber": 96
          },
          {
            "text": "    font-weight: 500;",
            "lineNumber": 97
          },
          {
            "text": "}",
            "lineNumber": 98
          },
          {
            "text": "QLabel#summaryValue {",
            "lineNumber": 99
          },
          {
            "text": "    color: #d6e0f3;",
            "lineNumber": 100
          },
          {
            "text": "}",
            "lineNumber": 101
          },
          {
            "text": "QLabel#summaryValueInvalid {",
            "lineNumber": 102
          },
          {
            "text": "    color: red;",
            "lineNumber": 103
          },
          {
            "text": "}",
            "lineNumber": 104
          },
          {
            "text": "/* Styling for line edit widgets */",
            "lineNumber": 105
          },
          {
            "text": "QLineEdit {",
            "lineNumber": 106
          },
          {
            "text": "    color: #bfbfbf;",
            "lineNumber": 107
          },
          {
            "text": "    background-color: #101820;",
            "lineNumber": 108
          },
          {
            "text": "    border-style: solid;",
            "lineNumber": 109
          },
          {
            "text": "    border-color: #3b4a64;",
            "lineNumber": 110
          },
          {
            "text": "    border-width: 1px;",
            "lineNumber": 111
          },
          {
            "text": "    border-radius: 3px;",
            "lineNumber": 112
          },
          {
            "text": "}",
            "lineNumber": 113
          },
          {
            "text": "QLineEdit:disabled {",
            "lineNumber": 114
          },
          {
            "text": "    color: #888888;",
            "lineNumber": 115
          },
          {
            "text": "    background-color: #1f2e38;",
            "lineNumber": 116
          },
          {
            "text": "}",
            "lineNumber": 117
          },
          {
            "text": "/* Styling for list widgets (mod list and rule editor lists) */",
            "lineNumber": 118
          },
          {
            "text": "QListWidget {",
            "lineNumber": 119
          },
          {
            "text": "    background-color: #101820;",
            "lineNumber": 120
          },
          {
            "text": "    border-style: solid;",
            "lineNumber": 121
          },
          {
            "text": "    border-color: #3b4a64;",
            "lineNumber": 122
          },
          {
            "text": "    border-width: 1px;",
            "lineNumber": 123
          },
          {
            "text": "    border-radius: 3px;",
            "lineNumber": 124
          },
          {
            "text": "    padding-right: 5px;",
            "lineNumber": 125
          },
          {
            "text": "}",
            "lineNumber": 126
          },
          {
            "text": "QListWidget::item {",
            "lineNumber": 127
          },
          {
            "text": "    border: 0px;",
            "lineNumber": 128
          },
          {
            "text": "    /* padding-right: 20px; */",
            "lineNumber": 129
          },
          {
            "text": "    margin-right: 12px;",
            "lineNumber": 130
          },
          {
            "text": "}",
            "lineNumber": 131
          },
          {
            "lineNumber": 132
          },
          {
            "text": "/* Styling for a selected mod item */",
            "lineNumber": 133
          },
          {
            "text": "QListWidget::item:selected:!active {",
            "lineNumber": 134
          },
          {
            "text": "    background: #2e3a4f;",
            "lineNumber": 135
          },
          {
            "text": "}",
            "lineNumber": 136
          },
          {
            "text": "QListWidget::item:selected:active {",
            "lineNumber": 137
          },
          {
            "text": "    background: #4a5a7a;",
            "lineNumber": 138
          },
          {
            "text": "}",
            "lineNumber": 139
          },
          {
            "text": "QListWidget::item:hover {",
            "lineNumber": 140
          },
          {
            "text": "    background: #1f2e38;",
            "lineNumber": 141
          },
          {
            "text": "}",
            "lineNumber": 142
          },
          {
            "text": "/* Default context menu style */",
            "lineNumber": 143
          },
          {
            "text": "QMenu {",
            "lineNumber": 144
          },
          {
            "text": "    background-color: #101820;",
            "lineNumber": 145
          },
          {
            "text": "    border: 1px solid #3b4a64;",
            "lineNumber": 146
          },
          {
            "text": "    padding: 4px;",
            "lineNumber": 147
          },
          {
            "text": "}",
            "lineNumber": 148
          },
          {
            "text": "QMenu::item {",
            "lineNumber": 149
          },
          {
            "text": "    background-color: transparent;",
            "lineNumber": 150
          },
          {
            "text": "    color: #d6e0f3;",
            "lineNumber": 151
          },
          {
            "text": "    padding: 8px 16px;",
            "lineNumber": 152
          },
          {
            "text": "}",
            "lineNumber": 153
          },
          {
            "text": "QMenu::item:selected {",
            "lineNumber": 154
          },
          {
            "text": "    background-color: #4a5a7a;",
            "lineNumber": 155
          },
          {
            "text": "}",
            "lineNumber": 156
          },
          {
            "text": "QMenu::separator {",
            "lineNumber": 157
          },
          {
            "text": "    height: 1px;",
            "lineNumber": 158
          },
          {
            "text": "    background-color: #3b4a64;",
            "lineNumber": 159
          },
          {
            "text": "    margin: 4px 0;",
            "lineNumber": 160
          },
          {
            "text": "}",
            "lineNumber": 161
          },
          {
            "text": "QMenu::indicator {",
            "lineNumber": 162
          },
          {
            "text": "    width: 13px;",
            "lineNumber": 163
          },
          {
            "text": "    height: 13px;",
            "lineNumber": 164
          },
          {
            "text": "}",
            "lineNumber": 165
          },
          {
            "text": "QMenu::icon {",
            "lineNumber": 166
          },
          {
            "text": "    margin-right: 8px;",
            "lineNumber": 167
          },
          {
            "text": "}",
            "lineNumber": 168
          },
          {
            "text": "QMenu::item:disabled {",
            "lineNumber": 169
          },
          {
            "text": "    color: #888888;",
            "lineNumber": 170
          },
          {
            "text": "}",
            "lineNumber": 171
          },
          {
            "text": "QMenu::item:disabled:selected {",
            "lineNumber": 172
          },
          {
            "text": "    background-color: transparent;",
            "lineNumber": 173
          },
          {
            "text": "}",
            "lineNumber": 174
          },
          {
            "text": "QMenu::item:selected:disabled {",
            "lineNumber": 175
          },
          {
            "text": "    color: #888888;",
            "lineNumber": 176
          },
          {
            "text": "}",
            "lineNumber": 177
          },
          {
            "text": "QMenu::item:hover {",
            "lineNumber": 178
          },
          {
            "text": "    background-color: #2e3a4f;",
            "lineNumber": 179
          },
          {
            "text": "}",
            "lineNumber": 180
          },
          {
            "text": "QMenu::item:checked {",
            "lineNumber": 181
          },
          {
            "text": "    background-color: #4a5a7a;",
            "lineNumber": 182
          },
          {
            "text": "}",
            "lineNumber": 183
          },
          {
            "text": "QMenu::item:checked:selected {",
            "lineNumber": 184
          },
          {
            "text": "    background-color: #4a5a7a;",
            "lineNumber": 185
          },
          {
            "text": "}",
            "lineNumber": 186
          }
        ]
      },
      "score": 0.20236194133758545
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 3129
          },
          "endPosition": {
            "line": 4800
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 3130,
                "column": 1
              },
              "endPosition": {
                "line": 3131,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModsPanel(QWidget):",
            "lineNumber": 3130,
            "isSignature": true
          },
          {
            "lineNumber": 3981
          },
          {
            "lineNumber": 3982
          },
          {
            "text": "    def apply_mods_filter_type(self, list_type: str) -&gt; None:",
            "lineNumber": 3983
          },
          {
            "text": "        # Define the mod types",
            "lineNumber": 3984
          },
          {
            "text": "        mod_types = [\"csharp\", \"xml\"]",
            "lineNumber": 3985
          },
          {
            "text": "        source_filter_index: int = (",
            "lineNumber": 3986
          },
          {
            "text": "            self.active_data_source_filter_type_index",
            "lineNumber": 3987
          },
          {
            "text": "            or self.inactive_data_source_filter_type_index",
            "lineNumber": 3988
          },
          {
            "text": "        )",
            "lineNumber": 3989
          },
          {
            "lineNumber": 3990
          },
          {
            "text": "        if list_type == \"Active\":",
            "lineNumber": 3991
          },
          {
            "text": "            button = self.active_data_source_filter_type_button",
            "lineNumber": 3992
          },
          {
            "text": "            search = self.active_mods_search",
            "lineNumber": 3993
          },
          {
            "text": "            source_index = source_filter_index",
            "lineNumber": 3994
          },
          {
            "text": "        elif list_type == \"Inactive\":",
            "lineNumber": 3995
          },
          {
            "text": "            button = self.inactive_data_source_filter_type_button",
            "lineNumber": 3996
          },
          {
            "text": "            search = self.inactive_mods_search",
            "lineNumber": 3997
          },
          {
            "text": "            source_index = source_filter_index",
            "lineNumber": 3998
          },
          {
            "text": "        else:",
            "lineNumber": 3999
          },
          {
            "text": "            raise NotImplementedError(f\"Unknown list type: {list_type}\")",
            "lineNumber": 4000
          },
          {
            "lineNumber": 4001
          },
          {
            "text": "        # Update the filter index",
            "lineNumber": 4002
          },
          {
            "text": "        if source_index &lt; (len(self.data_source_filter_type_icons) - 1):",
            "lineNumber": 4003
          },
          {
            "text": "            source_index += 1",
            "lineNumber": 4004
          },
          {
            "text": "        else:",
            "lineNumber": 4005
          },
          {
            "text": "            source_index = 0",
            "lineNumber": 4006
          },
          {
            "lineNumber": 4007
          },
          {
            "text": "        button.setIcon(self.data_source_filter_type_icons[source_index])",
            "lineNumber": 4008
          },
          {
            "text": "        button.setToolTip(self.data_source_filter_type_tooltips[source_index])",
            "lineNumber": 4009
          },
          {
            "lineNumber": 4010
          },
          {
            "text": "        # Update the relevant index for the list type",
            "lineNumber": 4011
          },
          {
            "text": "        if list_type == \"Active\":",
            "lineNumber": 4012
          },
          {
            "text": "            self.active_data_source_filter_type_index = source_index",
            "lineNumber": 4013
          },
          {
            "text": "            self.active_mods_data_source_filter_type = (",
            "lineNumber": 4014
          },
          {
            "text": "                SEARCH_DATA_SOURCE_FILTER_INDEXES[source_index]",
            "lineNumber": 4015
          },
          {
            "text": "            )",
            "lineNumber": 4016
          },
          {
            "text": "        elif list_type == \"Inactive\":",
            "lineNumber": 4017
          },
          {
            "text": "            self.inactive_data_source_filter_type_index = source_index",
            "lineNumber": 4018
          },
          {
            "text": "            self.inactive_mods_data_source_filter_type = (",
            "lineNumber": 4019
          },
          {
            "text": "                SEARCH_DATA_SOURCE_FILTER_INDEXES[source_index]",
            "lineNumber": 4020
          },
          {
            "text": "            )",
            "lineNumber": 4021
          },
          {
            "lineNumber": 4022
          },
          {
            "text": "        mod_list = (",
            "lineNumber": 4023
          },
          {
            "text": "            self.active_mods_list if list_type == \"Active\" else self.inactive_mods_list",
            "lineNumber": 4024
          },
          {
            "text": "        )",
            "lineNumber": 4025
          },
          {
            "lineNumber": 4026
          },
          {
            "text": "        # Apply filtering based on the selected type",
            "lineNumber": 4027
          }
        ]
      },
      "score": 0.2018972635269165
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\utils\\mod_info.py",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 203
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "from dataclasses import dataclass",
            "lineNumber": 1
          },
          {
            "text": "from typing import Any",
            "lineNumber": 2
          },
          {
            "lineNumber": 3
          },
          {
            "text": "from loguru import logger",
            "lineNumber": 4
          },
          {
            "lineNumber": 5
          },
          {
            "text": "from app.utils.generic import format_time_display",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "# Module-level constants for better access",
            "lineNumber": 8
          },
          {
            "text": "UNKNOWN = \"Unknown\"",
            "lineNumber": 9
          },
          {
            "text": "STEAM_CMD = \"SteamCMD\"",
            "lineNumber": 10
          },
          {
            "text": "STEAM = \"Steam\"",
            "lineNumber": 11
          },
          {
            "text": "LOCAL = \"Local\"",
            "lineNumber": 12
          },
          {
            "text": "DATABASE = \"database\"",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "lineNumber": 15
          },
          {
            "text": "@dataclass",
            "lineNumber": 16
          },
          {
            "text": "class ModInfo:",
            "lineNumber": 17,
            "isSignature": true
          },
          {
            "text": "    \"\"\"Standardized mod information structure.\"\"\"",
            "lineNumber": 18
          },
          {
            "lineNumber": 19
          },
          {
            "text": "    uuid: str | None",
            "lineNumber": 20
          },
          {
            "text": "    name: str",
            "lineNumber": 21
          },
          {
            "text": "    authors: str",
            "lineNumber": 22
          },
          {
            "text": "    packageid: str",
            "lineNumber": 23
          },
          {
            "text": "    published_file_id: str",
            "lineNumber": 24
          },
          {
            "text": "    supported_versions: str",
            "lineNumber": 25
          },
          {
            "text": "    source: str",
            "lineNumber": 26
          },
          {
            "text": "    path: str",
            "lineNumber": 27
          },
          {
            "text": "    downloaded_time_raw: float | None",
            "lineNumber": 28
          },
          {
            "text": "    updated_time_raw: float | None",
            "lineNumber": 29
          },
          {
            "text": "    workshop_url: str",
            "lineNumber": 30
          },
          {
            "text": "    type: str  # Type of mod (e.g., \"Original\", \"Replacement\")",
            "lineNumber": 31
          },
          {
            "text": "    installed_status: str  # Installation status (e.g., \"Installed\", \"Not Installed\")",
            "lineNumber": 32
          },
          {
            "lineNumber": 33
          },
          {
            "text": "    def __post_init__(self) -&gt; None:",
            "lineNumber": 34
          },
          {
            "text": "        \"\"\"Validate required fields after initialization.\"\"\"",
            "lineNumber": 35
          },
          {
            "text": "        if not self.packageid or not self.packageid.strip():",
            "lineNumber": 36
          },
          {
            "text": "            raise ValueError(\"packageid cannot be empty or whitespace-only\")",
            "lineNumber": 37
          },
          {
            "text": "        if not self.name or not self.name.strip():",
            "lineNumber": 38
          },
          {
            "text": "            self.name = UNKNOWN  # Set to UNKNOWN if empty, but allow it",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "    @classmethod",
            "lineNumber": 41
          },
          {
            "text": "    def from_metadata(cls, uuid: str | None, metadata: dict[str, Any]) -&gt; \"ModInfo\":",
            "lineNumber": 42
          },
          {
            "text": "        ",
            "lineNumber": 43
          }
        ]
      },
      "score": 0.20155200362205505
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 83,
            "column": 29
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "import json",
            "lineNumber": 1
          },
          {
            "text": "import os",
            "lineNumber": 2
          },
          {
            "text": "from datetime import datetime",
            "lineNumber": 3
          },
          {
            "text": "from difflib import SequenceMatcher",
            "lineNumber": 4
          },
          {
            "text": "from functools import partial",
            "lineNumber": 5
          },
          {
            "text": "from pathlib import Path",
            "lineNumber": 6
          },
          {
            "text": "from shutil import copy2, copytree",
            "lineNumber": 7
          },
          {
            "text": "from traceback import format_exc",
            "lineNumber": 8
          },
          {
            "text": "from typing import Any, Dict, Optional, cast",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "from loguru import logger",
            "lineNumber": 11
          },
          {
            "text": "from platformdirs import PlatformDirs",
            "lineNumber": 12
          },
          {
            "text": "from PySide6.QtCore import (",
            "lineNumber": 13
          },
          {
            "text": "    QEvent,",
            "lineNumber": 14
          },
          {
            "text": "    QItemSelection,",
            "lineNumber": 15
          },
          {
            "text": "    QModelIndex,",
            "lineNumber": 16
          },
          {
            "text": "    QObject,",
            "lineNumber": 17
          },
          {
            "text": "    QRectF,",
            "lineNumber": 18
          },
          {
            "text": "    QSize,",
            "lineNumber": 19
          },
          {
            "text": "    Qt,",
            "lineNumber": 20
          },
          {
            "text": "    QThread,",
            "lineNumber": 21
          },
          {
            "text": "    QTimer,",
            "lineNumber": 22
          },
          {
            "text": "    Signal,",
            "lineNumber": 23
          },
          {
            "text": "    Slot,",
            "lineNumber": 24
          },
          {
            "text": ")",
            "lineNumber": 25
          },
          {
            "text": "from PySide6.QtGui import (",
            "lineNumber": 26
          },
          {
            "text": "    QAction,",
            "lineNumber": 27
          },
          {
            "text": "    QColor,",
            "lineNumber": 28
          },
          {
            "text": "    QCursor,",
            "lineNumber": 29
          },
          {
            "text": "    QDropEvent,",
            "lineNumber": 30
          },
          {
            "text": "    QEnterEvent,",
            "lineNumber": 31
          },
          {
            "text": "    QFocusEvent,",
            "lineNumber": 32
          },
          {
            "text": "    QFontMetrics,",
            "lineNumber": 33
          },
          {
            "text": "    QIcon,",
            "lineNumber": 34
          },
          {
            "text": "    QKeyEvent,",
            "lineNumber": 35
          },
          {
            "text": "    QKeySequence,",
            "lineNumber": 36
          },
          {
            "text": "    QResizeEvent,",
            "lineNumber": 37
          },
          {
            "text": ")",
            "lineNumber": 38
          },
          {
            "text": "from PySide6.QtWidgets import (",
            "lineNumber": 39
          },
          {
            "text": "    QAbstractItemView,",
            "lineNumber": 40
          },
          {
            "text": "    QApplication,",
            "lineNumber": 41
          },
          {
            "text": "    QColorDialog,",
            "lineNumber": 42
          },
          {
            "text": "    QComboBox,",
            "lineNumber": 43
          },
          {
            "text": "    QDialog,",
            "lineNumber": 44
          },
          {
            "text": "    QFrame,",
            "lineNumber": 45
          },
          {
            "text": "    QHBoxLayout,",
            "lineNumber": 46
          },
          {
            "text": "    QInputDialog,",
            "lineNumber": 47
          },
          {
            "text": "    QLabel,",
            "lineNumber": 48
          },
          {
            "text": "    QLineEdit,",
            "lineNumber": 49
          },
          {
            "text": "    QListWidget,",
            "lineNumber": 50
          },
          {
            "text": "    QListWidgetItem,",
            "lineNumber": 51
          },
          {
            "text": "    QMenu,",
            "lineNumber": 52
          },
          {
            "text": "    QMessageBox,",
            "lineNumber": 53
          },
          {
            "text": "    QProgressDialog,",
            "lineNumber": 54
          },
          {
            "text": "    QPushButton,",
            "lineNumber": 55
          },
          {
            "text": "    QSplitter,",
            "lineNumber": 56
          },
          {
            "text": "    QToolButton,",
            "lineNumber": 57
          },
          {
            "text": "    QVBoxLayout,",
            "lineNumber": 58
          },
          {
            "text": "    QWidget,",
            "lineNumber": 59
          },
          {
            "text": ")",
            "lineNumber": 60
          },
          {
            "text": "from rapidfuzz import fuzz",
            "lineNumber": 61
          },
          {
            "text": "from sqlalchemy import text",
            "lineNumber": 62
          },
          {
            "lineNumber": 63
          },
          {
            "text": "from app.controllers.metadata_db_controller import AuxMetadataController",
            "lineNumber": 64
          },
          {
            "text": "from app.controllers.settings_controller import SettingsController",
            "lineNumber": 65
          },
          {
            "text": "from app.sort.mod_sorting import (",
            "lineNumber": 66
          },
          {
            "text": "    _FOLDER_SIZE_CACHE,",
            "lineNumber": 67
          },
          {
            "text": "    FolderSizeWorker,",
            "lineNumber": 68
          },
          {
            "text": "    ModsPanelSortKey,",
            "lineNumber": 69
          },
          {
            "text": "    sort_uuids,",
            "lineNumber": 70
          },
          {
            "text": ")",
            "lineNumber": 71
          },
          {
            "text": "from app.utils.acf_utils import steamcmd_purge_mods",
            "lineNumber": 72
          },
          {
            "text": "from app.utils.app_info import AppInfo",
            "lineNumber": 73
          },
          {
            "text": "from app.utils.aux_db_utils import auxdb_update_all_mod_colors, auxdb_update_mod_color",
            "lineNumber": 74
          },
          {
            "text": "from app.utils.constants import (",
            "lineNumber": 75
          },
          {
            "text": "    KNOWN_MOD_REPLACEMENTS,",
            "lineNumber": 76
          },
          {
            "text": "    SEARCH_DATA_SOURCE_FILTER_INDEXES,",
            "lineNumber": 77
          },
          {
            "text": ")",
            "lineNumber": 78
          },
          {
            "text": "from app.utils.custom_list_widget_item import CustomListWidgetItem",
            "lineNumber": 79
          },
          {
            "text": "from app.utils.custom_list_widget_item_metadata import CustomListWidgetItemMetadata",
            "lineNumber": 80
          },
          {
            "text": "from app.utils.custom_qlabels import AdvancedClickableQLabel, ClickableQLabel",
            "lineNumber": 81
          },
          {
            "text": "from app.utils.event_bus import EventBus",
            "lineNumber": 82
          },
          {
            "text": "from app.utils.generic import (",
            "lineNumber": 83
          },
          {
            "text": "    copy_to_clipboard_safely,",
            "lineNumber": 84
          }
        ]
      },
      "score": 0.2006465047597885
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 3129
          },
          "endPosition": {
            "line": 4800
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 3130,
                "column": 1
              },
              "endPosition": {
                "line": 3131,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 3152,
                "column": 5
              },
              "endPosition": {
                "line": 3153,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModsPanel(QWidget):",
            "lineNumber": 3130,
            "isSignature": true
          },
          {
            "text": "def __init__(self, settings_controller: SettingsController) -&gt; None:",
            "lineNumber": 3183
          },
          {
            "lineNumber": 3263
          },
          {
            "text": "        self.check_dependencies_button.clicked.connect(",
            "lineNumber": 3264
          },
          {
            "text": "            self.check_dependencies_signal.emit",
            "lineNumber": 3265
          },
          {
            "text": "        )",
            "lineNumber": 3266
          },
          {
            "text": "        self.button_panel_frame.setLayout(self.button_panel)",
            "lineNumber": 3267
          },
          {
            "lineNumber": 3268
          },
          {
            "text": "        # Add the buttons frame below the lists panel",
            "lineNumber": 3269
          },
          {
            "text": "        self.panel.addWidget(self.button_panel_frame, 0)",
            "lineNumber": 3270
          },
          {
            "lineNumber": 3271
          },
          {
            "text": "        # Filter icons and tooltips",
            "lineNumber": 3272
          },
          {
            "text": "        self.data_source_filter_icons = [",
            "lineNumber": 3273
          },
          {
            "text": "            QIcon(str(AppInfo().theme_data_folder / \"default-icons\" / \"AppIcon_b.png\")),",
            "lineNumber": 3274
          },
          {
            "text": "            ModListIcons.ludeon_icon(),",
            "lineNumber": 3275
          },
          {
            "text": "            ModListIcons.local_icon(),",
            "lineNumber": 3276
          },
          {
            "text": "            ModListIcons.git_icon(),",
            "lineNumber": 3277
          },
          {
            "text": "            ModListIcons.steamcmd_icon(),",
            "lineNumber": 3278
          },
          {
            "text": "            ModListIcons.steam_icon(),",
            "lineNumber": 3279
          },
          {
            "text": "        ]",
            "lineNumber": 3280
          },
          {
            "text": "        self.data_source_filter_tooltips = [",
            "lineNumber": 3281
          },
          {
            "text": "            self.tr(\"Showing All Mods\"),",
            "lineNumber": 3282
          },
          {
            "text": "            self.tr(\"Showing Core and DLC\"),",
            "lineNumber": 3283
          },
          {
            "text": "            self.tr(\"Showing Local Mods\"),",
            "lineNumber": 3284
          },
          {
            "text": "            self.tr(\"Showing Git Mods\"),",
            "lineNumber": 3285
          },
          {
            "text": "            self.tr(\"Showing SteamCMD Mods\"),",
            "lineNumber": 3286
          },
          {
            "text": "            self.tr(\"Showing Steam Mods\"),",
            "lineNumber": 3287
          },
          {
            "text": "        ]",
            "lineNumber": 3288
          },
          {
            "text": "        self.data_source_filter_type_icons = [",
            "lineNumber": 3289
          },
          {
            "text": "            QIcon(str(AppInfo().theme_data_folder / \"default-icons\" / \"AppIcon_b.png\")),",
            "lineNumber": 3290
          },
          {
            "text": "            ModListIcons.csharp_icon(),",
            "lineNumber": 3291
          },
          {
            "text": "            ModListIcons.xml_icon(),",
            "lineNumber": 3292
          },
          {
            "text": "        ]",
            "lineNumber": 3293
          },
          {
            "text": "        self.data_source_filter_type_tooltips = [",
            "lineNumber": 3294
          },
          {
            "text": "            self.tr(\"Showing All Mod Types\"),",
            "lineNumber": 3295
          },
          {
            "text": "            self.tr(\"Showing C# Mods\"),",
            "lineNumber": 3296
          },
          {
            "text": "            self.tr(\"Showing XML Mods\"),",
            "lineNumber": 3297
          },
          {
            "text": "        ]",
            "lineNumber": 3298
          },
          {
            "lineNumber": 3299
          },
          {
            "text": "        self.mode_filter_icon = QIcon(",
            "lineNumber": 3300
          },
          {
            "text": "            str(AppInfo().theme_data_folder / \"default-icons\" / \"filter.png\")",
            "lineNumber": 3301
          },
          {
            "text": "        )",
            "lineNumber": 3302
          },
          {
            "text": "        self.mode_filter_tooltip = self.tr(\"Hide Filter Disabled\")",
            "lineNumber": 3303
          },
          {
            "text": "        self.mode_nofilter_icon = QIcon(",
            "lineNumber": 3304
          },
          {
            "text": "            str(AppInfo().theme_data_folder / \"default-icons\" / \"nofilter.png\")",
            "lineNumber": 3305
          },
          {
            "text": "        )",
            "lineNumber": 3306
          },
          {
            "text": "        self.mode_nofilter_tooltip = self.tr(\"Hide Filter Enabled\")",
            "lineNumber": 3307
          },
          {
            "lineNumber": 3308
          },
          {
            "text": "        # ACTIVE mod list widget",
            "lineNumber": 3309
          },
          {
            "text": "        self.active_mods_label = QLabel(self.tr(\"Active [0]\"))",
            "lineNumber": 3310
          },
          {
            "text": "        self.active_mods_label.setAlignment(Qt.AlignmentFlag.AlignCenter)",
            "lineNumber": 3311
          },
          {
            "text": "        self.active_mods_label.setObjectName(\"summaryValue\")",
            "lineNumber": 3312
          },
          {
            "text": "        self.active_mods_list = ModListWidget",
            "lineNumber": 3313
          }
        ]
      },
      "score": 0.19848304986953735
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\themes\\Nature\\style.qss",
        "range": {
          "startPosition": {
            "line": 422
          },
          "endPosition": {
            "line": 502
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "}",
            "lineNumber": 423
          },
          {
            "text": "QTableView::indicator {",
            "lineNumber": 424
          },
          {
            "text": "    width: 13px;",
            "lineNumber": 425
          },
          {
            "text": "    height: 13px;",
            "lineNumber": 426
          },
          {
            "text": "}",
            "lineNumber": 427
          },
          {
            "text": "QTableView::indicator:checked {",
            "lineNumber": 428
          },
          {
            "text": "    background: #2e8b57;",
            "lineNumber": 429
          },
          {
            "text": "}",
            "lineNumber": 430
          },
          {
            "text": "QTableView::indicator:unchecked {",
            "lineNumber": 431
          },
          {
            "text": "    background: #4a5b4a;",
            "lineNumber": 432
          },
          {
            "text": "}",
            "lineNumber": 433
          },
          {
            "text": "/* Styling for tool buttons */",
            "lineNumber": 434
          },
          {
            "text": "QToolButton {",
            "lineNumber": 435
          },
          {
            "text": "    background-color: #4a5b4a;",
            "lineNumber": 436
          },
          {
            "text": "    border-style: solid;",
            "lineNumber": 437
          },
          {
            "text": "    border-width: 0px;",
            "lineNumber": 438
          },
          {
            "text": "    border-radius: 5px;",
            "lineNumber": 439
          },
          {
            "text": "    color: #ffffff;",
            "lineNumber": 440
          },
          {
            "text": "    padding: 1px;",
            "lineNumber": 441
          },
          {
            "text": "}",
            "lineNumber": 442
          },
          {
            "text": "QToolButton:hover {",
            "lineNumber": 443
          },
          {
            "text": "    background-color: #5a6b5a;",
            "lineNumber": 444
          },
          {
            "text": "}",
            "lineNumber": 445
          },
          {
            "text": "QToolButton:pressed {",
            "lineNumber": 446
          },
          {
            "text": "    background-color: #2e8b57;",
            "lineNumber": 447
          },
          {
            "text": "    border-style: inset;",
            "lineNumber": 448
          },
          {
            "text": "}",
            "lineNumber": 449
          },
          {
            "text": "QToolButton:disabled {",
            "lineNumber": 450
          },
          {
            "text": "    color: #a9a9a9;",
            "lineNumber": 451
          },
          {
            "text": "}",
            "lineNumber": 452
          },
          {
            "lineNumber": 453
          },
          {
            "text": "/* ===== Browser (util/steam/browser.py) ===== */",
            "lineNumber": 454
          },
          {
            "text": "QWidget#browserPanel {",
            "lineNumber": 455
          },
          {
            "text": "    background-color: #2e3d2f;",
            "lineNumber": 456
          },
          {
            "text": "}",
            "lineNumber": 457
          },
          {
            "text": "QLabel#browserPaneldownloader_label {",
            "lineNumber": 458
          },
          {
            "text": "    color: #ffffff;",
            "lineNumber": 459
          },
          {
            "text": "}",
            "lineNumber": 460
          },
          {
            "lineNumber": 461
          },
          {
            "text": "/* ======= MainWindow (view/main_content_panel.py) ======= */",
            "lineNumber": 462
          },
          {
            "text": "QMainWindow {",
            "lineNumber": 463
          },
          {
            "text": "    background-color: #2e3d2f;",
            "lineNumber": 464
          },
          {
            "text": "}",
            "lineNumber": 465
          },
          {
            "text": "QWidget#MainPanel {",
            "lineNumber": 466
          },
          {
            "text": "    border-style: solid;",
            "lineNumber": 467
          },
          {
            "text": "    border-color: #4a5b4a;",
            "lineNumber": 468
          },
          {
            "text": "    border-width: 1px;",
            "lineNumber": 469
          },
          {
            "text": "    border-radius: 3px;",
            "lineNumber": 470
          },
          {
            "text": "    margin: 7px; /* Space between frame and app edge */",
            "lineNumber": 471
          },
          {
            "text": "}",
            "lineNumber": 472
          },
          {
            "text": "/* Styling for the mod item text */",
            "lineNumber": 473
          },
          {
            "text": "QLabel#ListItemLabel {",
            "lineNumber": 474
          },
          {
            "text": "    color: #ffffff;",
            "lineNumber": 475
          },
          {
            "text": "}",
            "lineNumber": 476
          },
          {
            "text": "QLabel#ListItemLabelFiltered { ",
            "lineNumber": 477
          },
          {
            "text": "    color: #c0c0c0; ",
            "lineNumber": 478
          },
          {
            "text": "}",
            "lineNumber": 479
          },
          {
            "text": "QLabel#ListItemLabelInvalid {",
            "lineNumber": 480
          },
          {
            "text": "    color: #e06c75;",
            "lineNumber": 481
          },
          {
            "text": "}",
            "lineNumber": 482
          },
          {
            "text": "/* Styling for the errors summary frame */",
            "lineNumber": 483
          },
          {
            "text": "QWidget#errorFrame { /* Outer-most encapsulator */",
            "lineNumber": 484
          },
          {
            "text": "    background-color: #2e3d2f;",
            "lineNumber": 485
          },
          {
            "text": "    border-style: solid;",
            "lineNumber": 486
          },
          {
            "text": "    border-color: #4a5b4a;",
            "lineNumber": 487
          },
          {
            "text": "    border-width: 1px;",
            "lineNumber": 488
          },
          {
            "text": "    border-radius: 3px;",
            "lineNumber": 489
          },
          {
            "text": "}",
            "lineNumber": 490
          },
          {
            "lineNumber": 491
          },
          {
            "text": "/* ===== GameConfiguration (view/game_configuration_panel.py) ===== */",
            "lineNumber": 492
          },
          {
            "text": "QLabel#gameVersion {",
            "lineNumber": 493
          },
          {
            "text": "    color: #ffffff;",
            "lineNumber": 494
          },
          {
            "text": "    margin-right: 4px;",
            "lineNumber": 495
          },
          {
            "text": "}",
            "lineNumber": 496
          },
          {
            "lineNumber": 497
          },
          {
            "text": "/* ===== Mod info panel (sub_view/mod_info_panel.py) ===== */",
            "lineNumber": 498
          },
          {
            "text": "/* Outer-most encapsulator */",
            "lineNumber": 499
          },
          {
            "text": "/* Contains QScrollArea for mod description */",
            "lineNumber": 500
          },
          {
            "text": "QWidget#descriptionWidget {",
            "lineNumber": 501
          },
          {
            "text": "    background-color: #2e3d2f;",
            "lineNumber": 502
          }
        ]
      },
      "score": 0.19845159351825714
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\windows\\base_mods_panel.py",
        "range": {
          "startPosition": {
            "line": 122,
            "column": 53
          },
          "endPosition": {
            "line": 1412
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "class BaseModsPanel(QWidget):",
            "lineNumber": 126,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 127
          },
          {
            "text": "    Base class used for multiple panels that display a list of mods.",
            "lineNumber": 128
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 129
          },
          {
            "lineNumber": 130
          },
          {
            "text": "    # Type hints for instance variables",
            "lineNumber": 131
          },
          {
            "text": "    metadata_manager: MetadataManager",
            "lineNumber": 132
          },
          {
            "text": "    settings_controller: Any",
            "lineNumber": 133
          },
          {
            "text": "    editor_model: QStandardItemModel",
            "lineNumber": 134
          },
          {
            "text": "    editor_table_view: QTableView",
            "lineNumber": 135
          },
          {
            "text": "    ui_elements: UIElements",
            "lineNumber": 136
          },
          {
            "text": "    layouts: Layouts",
            "lineNumber": 137
          },
          {
            "lineNumber": 138
          },
          {
            "text": "    # Common column definitions for standardization",
            "lineNumber": 139
          },
          {
            "text": "    COL_MOD_NAME = \"Name\"",
            "lineNumber": 140
          },
          {
            "text": "    COL_AUTHOR = \"Author\"",
            "lineNumber": 141
          },
          {
            "text": "    COL_PACKAGE_ID = \"Package ID\"",
            "lineNumber": 142
          },
          {
            "text": "    COL_PUBLISHED_FILE_ID = \"Published File Id\"",
            "lineNumber": 143
          },
          {
            "text": "    COL_SUPPORTED_VERSIONS = \"Supported Versions\"",
            "lineNumber": 144
          },
          {
            "text": "    COL_MOD_DOWNLOADED = \"Mod Downloaded\"",
            "lineNumber": 145
          },
          {
            "text": "    COL_UPDATED_ON_WORKSHOP = \"Updated on Workshop\"",
            "lineNumber": 146
          },
          {
            "text": "    COL_SOURCE = \"Source\"",
            "lineNumber": 147
          },
          {
            "text": "    COL_PATH = \"Path\"",
            "lineNumber": 148
          },
          {
            "text": "    COL_WORKSHOP_PAGE = \"Workshop Page\"",
            "lineNumber": 149
          },
          {
            "lineNumber": 150
          },
          {
            "text": "    def _setup_metadata(self) -&gt; None:",
            "lineNumber": 151
          },
          {
            "text": "        \"\"\"Set up metadata manager and settings controller.\"\"\"",
            "lineNumber": 152
          },
          {
            "text": "        self.metadata_manager = MetadataManager.instance()",
            "lineNumber": 153
          },
          {
            "text": "        self.settings_controller = self.metadata_manager.settings_controller",
            "lineNumber": 154
          },
          {
            "lineNumber": 155
          },
          {
            "text": "    def _get_steam_client_integration_enabled(self) -&gt; bool:",
            "lineNumber": 156
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 157
          },
          {
            "text": "        Get whether Steam client integration is enabled.",
            "lineNumber": 158
          },
          {
            "lineNumber": 159
          },
          {
            "text": "        Returns:",
            "lineNumber": 160
          },
          {
            "text": "            True if Steam client integration is enabled, False otherwise.",
            "lineNumber": 161
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 162
          },
          {
            "text": "        return self.settings_controller.settings.instances[",
            "lineNumber": 163
          },
          {
            "text": "            self.settings_controller.settings.current_instance",
            "lineNumber": 164
          },
          {
            "text": "        ].steam_client_integration",
            "lineNumber": 165
          },
          {
            "lineNumber": 166
          },
          {
            "text": "    def _setup_ui_elements(",
            "lineNumber": 167
          },
          {
            "text": "        self,",
            "lineNumber": 168
          },
          {
            "text": "        object_name: str,",
            "lineNumber": 169
          },
          {
            "text": "        window_title: str,",
            "lineNumber": 170
          },
          {
            "text": "        title_text: str,",
            "lineNumber": 171
          },
          {
            "text": "        details_text: str,",
            "lineNumber": 172
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 173
          },
          {
            "text": "        ",
            "lineNumber": 174
          }
        ]
      },
      "score": 0.1975950002670288
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\models\\settings.py",
        "range": {
          "startPosition": {
            "line": 30
          },
          "endPosition": {
            "line": 590
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 31,
                "column": 1
              },
              "endPosition": {
                "line": 32,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 46,
                "column": 5
              },
              "endPosition": {
                "line": 47,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class Settings(QObject):",
            "lineNumber": 31,
            "isSignature": true
          },
          {
            "text": "def __init__(self) -&gt; None:",
            "lineNumber": 46
          },
          {
            "lineNumber": 80
          },
          {
            "text": "        self.external_no_version_warning_repo_path: str = (",
            "lineNumber": 81
          },
          {
            "text": "            \"https://github.com/emipa606/NoVersionWarning\"",
            "lineNumber": 82
          },
          {
            "text": "        )",
            "lineNumber": 83
          },
          {
            "lineNumber": 84
          },
          {
            "text": "        self.external_use_this_instead_metadata_source: str = \"None\"",
            "lineNumber": 85
          },
          {
            "text": "        self.external_use_this_instead_file_path: str = str(",
            "lineNumber": 86
          },
          {
            "text": "            AppInfo().app_storage_folder / \"UseThisInstead\" / \"replacements.json.gz\"",
            "lineNumber": 87
          },
          {
            "text": "        )",
            "lineNumber": 88
          },
          {
            "text": "        self.external_use_this_instead_repo_path: str = (",
            "lineNumber": 89
          },
          {
            "text": "            \"https://github.com/emipa606/UseThisInstead\"",
            "lineNumber": 90
          },
          {
            "text": "        )",
            "lineNumber": 91
          },
          {
            "lineNumber": 92
          },
          {
            "text": "        # Sorting",
            "lineNumber": 93
          },
          {
            "text": "        self.sorting_algorithm: SortMethod = SortMethod.TOPOLOGICAL",
            "lineNumber": 94
          },
          {
            "text": "        # Whether to use moddependencies as loadTheseBefore rules",
            "lineNumber": 95
          },
          {
            "text": "        self.use_moddependencies_as_loadTheseBefore: bool = False",
            "lineNumber": 96
          },
          {
            "text": "        # Whether to use alternativePackageIds as satisfying dependencies",
            "lineNumber": 97
          },
          {
            "text": "        self.use_alternative_package_ids_as_satisfying_dependencies: bool = True",
            "lineNumber": 98
          },
          {
            "text": "        # Whether to check for missing dependencies when sorting",
            "lineNumber": 99
          },
          {
            "text": "        self.check_dependencies_on_sort: bool = True",
            "lineNumber": 100
          },
          {
            "lineNumber": 101
          },
          {
            "text": "        # XML parsing behavior",
            "lineNumber": 102
          },
          {
            "text": "        # If enabled, About.xml *ByVersion tags take precedence over base tags",
            "lineNumber": 103
          },
          {
            "text": "        # e.g., modDependenciesByVersion, loadAfterByVersion, loadBeforeByVersion, incompatibleWithByVersion, descriptionsByVersion",
            "lineNumber": 104
          },
          {
            "text": "        self.prefer_versioned_about_tags: bool = True",
            "lineNumber": 105
          },
          {
            "lineNumber": 106
          },
          {
            "text": "        # Whether to notify user about missing mods",
            "lineNumber": 107
          },
          {
            "text": "        self.try_download_missing_mods: bool = True",
            "lineNumber": 108
          },
          {
            "text": "        # Whether to notify user about duplicate mods",
            "lineNumber": 109
          },
          {
            "text": "        self.duplicate_mods_warning: bool = True",
            "lineNumber": 110
          },
          {
            "text": "        # Whether to enable Mod type filter",
            "lineNumber": 111
          },
          {
            "text": "        self.mod_type_filter: bool = True",
            "lineNumber": 112
          },
          {
            "text": "        # Whether to hide invalid mods",
            "lineNumber": 113
          },
          {
            "text": "        self.hide_invalid_mods_when_filtering: bool = False",
            "lineNumber": 114
          },
          {
            "text": "        # Whether to enable inactive mods sorting options",
            "lineNumber": 115
          },
          {
            "text": "        self.inactive_mods_sorting: bool = True",
            "lineNumber": 116
          },
          {
            "text": "        # Inactive mods sort state saving",
            "lineNumber": 117
          },
          {
            "text": "        self.save_inactive_mods_sort_state: bool = False",
            "lineNumber": 118
          },
          {
            "text": "        self.inactive_mods_sort_key: str = \"FILESYSTEM_MODIFIED_TIME\"",
            "lineNumber": 119
          },
          {
            "text": "        self.inactive_mods_sort_descending: bool = True",
            "lineNumber": 120
          },
          {
            "lineNumber": 121
          },
          {
            "text": "        # DB Builder",
            "lineNumber": 122
          },
          {
            "text": "        self.db_builder_include: str = \"all_mods\"",
            "lineNumber": 123
          }
        ]
      },
      "score": 0.19746094942092896
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\themes\\Wood\\style.qss",
        "range": {
          "startPosition": {
            "line": 422
          },
          "endPosition": {
            "line": 502
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "}",
            "lineNumber": 423
          },
          {
            "text": "QTableView::indicator {",
            "lineNumber": 424
          },
          {
            "text": "    width: 13px;",
            "lineNumber": 425
          },
          {
            "text": "    height: 13px;",
            "lineNumber": 426
          },
          {
            "text": "}",
            "lineNumber": 427
          },
          {
            "text": "QTableView::indicator:checked {",
            "lineNumber": 428
          },
          {
            "text": "    background: #a0522d;",
            "lineNumber": 429
          },
          {
            "text": "}",
            "lineNumber": 430
          },
          {
            "text": "QTableView::indicator:unchecked {",
            "lineNumber": 431
          },
          {
            "text": "    background: #5a4a4a;",
            "lineNumber": 432
          },
          {
            "text": "}",
            "lineNumber": 433
          },
          {
            "text": "/* Styling for tool buttons */",
            "lineNumber": 434
          },
          {
            "text": "QToolButton {",
            "lineNumber": 435
          },
          {
            "text": "    background-color: #5a4a4a;",
            "lineNumber": 436
          },
          {
            "text": "    border-style: solid;",
            "lineNumber": 437
          },
          {
            "text": "    border-width: 0px;",
            "lineNumber": 438
          },
          {
            "text": "    border-radius: 5px;",
            "lineNumber": 439
          },
          {
            "text": "    color: #ffffff;",
            "lineNumber": 440
          },
          {
            "text": "    padding: 1px;",
            "lineNumber": 441
          },
          {
            "text": "}",
            "lineNumber": 442
          },
          {
            "text": "QToolButton:hover {",
            "lineNumber": 443
          },
          {
            "text": "    background-color: #6a5a5a;",
            "lineNumber": 444
          },
          {
            "text": "}",
            "lineNumber": 445
          },
          {
            "text": "QToolButton:pressed {",
            "lineNumber": 446
          },
          {
            "text": "    background-color: #cd853f;",
            "lineNumber": 447
          },
          {
            "text": "    border-style: inset;",
            "lineNumber": 448
          },
          {
            "text": "}",
            "lineNumber": 449
          },
          {
            "text": "QToolButton:disabled {",
            "lineNumber": 450
          },
          {
            "text": "    color: #d2b48c;",
            "lineNumber": 451
          },
          {
            "text": "}",
            "lineNumber": 452
          },
          {
            "lineNumber": 453
          },
          {
            "text": "/* ===== Browser (util/steam/browser.py) ===== */",
            "lineNumber": 454
          },
          {
            "text": "QWidget#browserPanel {",
            "lineNumber": 455
          },
          {
            "text": "    background-color: #3b2f2f;",
            "lineNumber": 456
          },
          {
            "text": "}",
            "lineNumber": 457
          },
          {
            "text": "QLabel#browserPaneldownloader_label {",
            "lineNumber": 458
          },
          {
            "text": "    color: #ffffff;",
            "lineNumber": 459
          },
          {
            "text": "}",
            "lineNumber": 460
          },
          {
            "lineNumber": 461
          },
          {
            "text": "/* ======= MainWindow (view/main_content_panel.py) ======= */",
            "lineNumber": 462
          },
          {
            "text": "QMainWindow {",
            "lineNumber": 463
          },
          {
            "text": "    background-color: #3b2f2f;",
            "lineNumber": 464
          },
          {
            "text": "}",
            "lineNumber": 465
          },
          {
            "text": "QWidget#MainPanel {",
            "lineNumber": 466
          },
          {
            "text": "    border-style: solid;",
            "lineNumber": 467
          },
          {
            "text": "    border-color: #5a4a4a;",
            "lineNumber": 468
          },
          {
            "text": "    border-width: 1px;",
            "lineNumber": 469
          },
          {
            "text": "    border-radius: 3px;",
            "lineNumber": 470
          },
          {
            "text": "    margin: 7px; /* Space between frame and app edge */",
            "lineNumber": 471
          },
          {
            "text": "}",
            "lineNumber": 472
          },
          {
            "text": "/* Styling for the mod item text */",
            "lineNumber": 473
          },
          {
            "text": "QLabel#ListItemLabel {",
            "lineNumber": 474
          },
          {
            "text": "    color: #ffffff;",
            "lineNumber": 475
          },
          {
            "text": "}",
            "lineNumber": 476
          },
          {
            "text": "QLabel#ListItemLabelFiltered { ",
            "lineNumber": 477
          },
          {
            "text": "    color: #f4a460; ",
            "lineNumber": 478
          },
          {
            "text": "}",
            "lineNumber": 479
          },
          {
            "text": "QLabel#ListItemLabelInvalid {",
            "lineNumber": 480
          },
          {
            "text": "    color: #ff4500;",
            "lineNumber": 481
          },
          {
            "text": "}",
            "lineNumber": 482
          },
          {
            "text": "/* Styling for the errors summary frame */",
            "lineNumber": 483
          },
          {
            "text": "QWidget#errorFrame { /* Outer-most encapsulator */",
            "lineNumber": 484
          },
          {
            "text": "    background-color: #3b2f2f;",
            "lineNumber": 485
          },
          {
            "text": "    border-style: solid;",
            "lineNumber": 486
          },
          {
            "text": "    border-color: #5a4a4a;",
            "lineNumber": 487
          },
          {
            "text": "    border-width: 1px;",
            "lineNumber": 488
          },
          {
            "text": "    border-radius: 3px;",
            "lineNumber": 489
          },
          {
            "text": "}",
            "lineNumber": 490
          },
          {
            "lineNumber": 491
          },
          {
            "text": "/* ===== GameConfiguration (view/game_configuration_panel.py) ===== */",
            "lineNumber": 492
          },
          {
            "text": "QLabel#gameVersion {",
            "lineNumber": 493
          },
          {
            "text": "    color: #ffffff;",
            "lineNumber": 494
          },
          {
            "text": "    margin-right: 4px;",
            "lineNumber": 495
          },
          {
            "text": "}",
            "lineNumber": 496
          },
          {
            "lineNumber": 497
          },
          {
            "text": "/* ===== Mod info panel (sub_view/mod_info_panel.py) ===== */",
            "lineNumber": 498
          },
          {
            "text": "/* Outer-most encapsulator */",
            "lineNumber": 499
          },
          {
            "text": "/* Contains QScrollArea for mod description */",
            "lineNumber": 500
          },
          {
            "text": "QWidget#descriptionWidget {",
            "lineNumber": 501
          },
          {
            "text": "    background-color: #3b2f2f;",
            "lineNumber": 502
          }
        ]
      },
      "score": 0.1973707675933838
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 101
          },
          "endPosition": {
            "line": 677
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 102,
                "column": 1
              },
              "endPosition": {
                "line": 103,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 111,
                "column": 5
              },
              "endPosition": {
                "line": 124,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListItemInner(QWidget):",
            "lineNumber": 102,
            "isSignature": true
          },
          {
            "text": "def __init__(",
            "lineNumber": 111
          },
          {
            "text": "        self,",
            "lineNumber": 112
          },
          {
            "text": "        errors_warnings: str,",
            "lineNumber": 113
          },
          {
            "text": "        errors: str,",
            "lineNumber": 114
          },
          {
            "text": "        warnings: str,",
            "lineNumber": 115
          },
          {
            "text": "        filtered: bool,",
            "lineNumber": 116
          },
          {
            "text": "        invalid: bool,",
            "lineNumber": 117
          },
          {
            "text": "        mismatch: bool,",
            "lineNumber": 118
          },
          {
            "text": "        alternative: bool,",
            "lineNumber": 119
          },
          {
            "text": "        settings_controller: SettingsController,",
            "lineNumber": 120
          },
          {
            "text": "        uuid: str,",
            "lineNumber": 121
          },
          {
            "text": "        mod_color: QColor,",
            "lineNumber": 122
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 123
          },
          {
            "text": "\"\"\"",
            "lineNumber": 141
          },
          {
            "lineNumber": 142
          },
          {
            "text": "        super(ModListItemInner, self).__init__()",
            "lineNumber": 143
          },
          {
            "lineNumber": 144
          },
          {
            "text": "        # Used to handle hover, select etc. behavior for this custom widget",
            "lineNumber": 145
          },
          {
            "text": "        self.setAttribute(Qt.WidgetAttribute.WA_Hover)",
            "lineNumber": 146
          },
          {
            "text": "        self._selected = False",
            "lineNumber": 147
          },
          {
            "text": "        self._hovered = False",
            "lineNumber": 148
          },
          {
            "lineNumber": 149
          },
          {
            "text": "        # Cache MetadataManager instance",
            "lineNumber": 150
          },
          {
            "text": "        self.metadata_manager = MetadataManager.instance()",
            "lineNumber": 151
          },
          {
            "lineNumber": 152
          },
          {
            "text": "        # Cache error and warning strings for tooltips",
            "lineNumber": 153
          },
          {
            "text": "        self.errors_warnings = errors_warnings",
            "lineNumber": 154
          },
          {
            "text": "        self.errors = errors",
            "lineNumber": 155
          },
          {
            "text": "        self.warnings = warnings",
            "lineNumber": 156
          },
          {
            "text": "        # Cache filtered state of widget's item - used to determine styling of widget",
            "lineNumber": 157
          },
          {
            "text": "        self.filtered = filtered",
            "lineNumber": 158
          },
          {
            "text": "        # Cache invalid state of widget's item - used to determine styling of widget",
            "lineNumber": 159
          },
          {
            "text": "        self.invalid = invalid",
            "lineNumber": 160
          },
          {
            "text": "        # Cache mismatch state of widget's item - used to determine warning icon visibility",
            "lineNumber": 161
          },
          {
            "text": "        self.mismatch = mismatch",
            "lineNumber": 162
          },
          {
            "text": "        # Cache alternative state of widget's item - used to determine warning icon visibility",
            "lineNumber": 163
          },
          {
            "text": "        self.alternative = alternative",
            "lineNumber": 164
          },
          {
            "text": "        # Cache SettingsManager instance",
            "lineNumber": 165
          },
          {
            "text": "        self.settings_controller = settings_controller",
            "lineNumber": 166
          },
          {
            "text": "        # Cache the mod color",
            "lineNumber": 167
          },
          {
            "text": "        self.mod_color: QColor | None = mod_color",
            "lineNumber": 168
          },
          {
            "lineNumber": 169
          },
          {
            "text": "        # All data, including name, author, package id, dependencies,",
            "lineNumber": 170
          },
          {
            "text": "        # whether the mod is a workshop mod or expansion, etc is encapsulated",
            "lineNumber": 171
          },
          {
            "text": "        # in this variable. This is exactly equal to the dict value of a",
            "lineNumber": 172
          },
          {
            "text": "        # single all_mods key-value",
            "lineNumber": 173
          },
          {
            "text": "        self.uuid = uuid",
            "lineNumber": 174
          },
          {
            "text": "        name_value = self.metadata_manager.internal_local_metadata.get(",
            "lineNumber": 175
          },
          {
            "text": "            self.uuid, {}",
            "lineNumber": 176
          },
          {
            "text": "        ).get(\"name\")",
            "lineNumber": 177
          },
          {
            "text": "        if not isinstance(name_value, str):",
            "lineNumber": 178
          },
          {
            "text": "            name_value = \"name error in mod about.xml\"",
            "lineNumber": 179
          },
          {
            "text": "        self.list_item_name = name_value",
            "lineNumber": 180
          },
          {
            "text": "        self.main_label = QLabel()",
            "lineNumber": 181
          },
          {
            "lineNumber": 182
          },
          {
            "text": "        # Visuals",
            "lineNumber": 183
          },
          {
            "text": "        self.setToolTip(self.get_tool_tip_text())",
            "lineNumber": 184
          },
          {
            "text": "        self.main_item_layout = QHBoxLayout()",
            "lineNumber": 185
          },
          {
            "text": "        self.main_item_layout.setContentsMargins(0, 0, 0, 0)",
            "lineNumber": 186
          },
          {
            "text": "        self.main_item_layout.setSpacing(0)",
            "lineNumber": 187
          },
          {
            "text": "        self.font_metrics = QFontMetrics(self.font())",
            "lineNumber": 188
          }
        ]
      },
      "score": 0.19704510271549225
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 2820,
                "column": 5
              },
              "endPosition": {
                "line": 2821,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "lineNumber": 2918
          },
          {
            "lineNumber": 2919
          },
          {
            "text": "    def recreate_mod_list(",
            "lineNumber": 2920
          },
          {
            "text": "        self, list_type: str, uuids: list[str], filtering: bool = False",
            "lineNumber": 2921
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 2922
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2923
          },
          {
            "text": "        Clear all mod items and add new ones from a dict.",
            "lineNumber": 2924
          },
          {
            "lineNumber": 2925
          },
          {
            "text": "        :param mods: dict of mod data",
            "lineNumber": 2926
          },
          {
            "text": "        :param filtering: if True, UUIDs are already sorted; skip sorting",
            "lineNumber": 2927
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2928
          },
          {
            "text": "        logger.info(f\"Internally recreating {list_type} mod list\")",
            "lineNumber": 2929
          },
          {
            "text": "        # Skip sorting if UUIDs are already filtered/sorted (filtering=True)",
            "lineNumber": 2930
          },
          {
            "text": "        if not filtering:",
            "lineNumber": 2931
          },
          {
            "text": "            # Sort inactive mods using saved settings if enabled",
            "lineNumber": 2932
          },
          {
            "text": "            if (",
            "lineNumber": 2933
          },
          {
            "text": "                list_type == \"Inactive\"",
            "lineNumber": 2934
          },
          {
            "text": "                and self.settings_controller.settings.save_inactive_mods_sort_state",
            "lineNumber": 2935
          },
          {
            "text": "                and self.settings_controller.settings.inactive_mods_sorting",
            "lineNumber": 2936
          },
          {
            "text": "            ):",
            "lineNumber": 2937
          },
          {
            "text": "                sort_key = ModsPanelSortKey[",
            "lineNumber": 2938
          },
          {
            "text": "                    self.settings_controller.settings.inactive_mods_sort_key",
            "lineNumber": 2939
          },
          {
            "text": "                ]",
            "lineNumber": 2940
          },
          {
            "text": "                descending = (",
            "lineNumber": 2941
          },
          {
            "text": "                    self.settings_controller.settings.inactive_mods_sort_descending",
            "lineNumber": 2942
          },
          {
            "text": "                )",
            "lineNumber": 2943
          },
          {
            "text": "                uuids = sort_uuids(",
            "lineNumber": 2944
          },
          {
            "text": "                    uuids,",
            "lineNumber": 2945
          },
          {
            "text": "                    key=sort_key,",
            "lineNumber": 2946
          },
          {
            "text": "                    descending=descending,",
            "lineNumber": 2947
          },
          {
            "text": "                    settings_controller=self.settings_controller,",
            "lineNumber": 2948
          },
          {
            "text": "                )",
            "lineNumber": 2949
          },
          {
            "text": "            else:",
            "lineNumber": 2950
          },
          {
            "text": "                if list_type == \"Inactive\":",
            "lineNumber": 2951
          },
          {
            "text": "                    uuids = sort_uuids(",
            "lineNumber": 2952
          },
          {
            "text": "                        uuids,",
            "lineNumber": 2953
          },
          {
            "text": "                        key=ModsPanelSortKey.FILESYSTEM_MODIFIED_TIME,",
            "lineNumber": 2954
          },
          {
            "text": "                        descending=True,",
            "lineNumber": 2955
          },
          {
            "text": "                        settings_controller=self.settings_controller,",
            "lineNumber": 2956
          },
          {
            "text": "                    )",
            "lineNumber": 2957
          },
          {
            "text": "        # Disable updates and disconnect model signals during rebuild",
            "lineNumber": 2958
          },
          {
            "text": "        self.setUpdatesEnabled(False)",
            "lineNumber": 2959
          },
          {
            "text": "        # Temporarily disconnect model signals to avoid cascading updates and duplicate items",
            "lineNumber": 2960
          },
          {
            "text": "        try:",
            "lineNumber": 2961
          },
          {
            "text": "            self.model().rowsInserted.disconnect(self.handle_rows_inserted)",
            "lineNumber": 2962
          },
          {
            "text": "        except TypeError:",
            "lineNumber": 2963
          },
          {
            "text": "            pass  # Signal not connected",
            "lineNumber": 2964
          },
          {
            "text": "        try:",
            "lineNumber": 2965
          },
          {
            "text": "            self.model().rowsAboutToBeRemoved.disconnect",
            "lineNumber": 2966
          }
        ]
      },
      "score": 0.19622689485549927
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\app\views\mods_panel.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\app\utils\custom_list_widget_item.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\app\controllers\mods_panel_controller.py</summary>

</details>
</tool-use>

---



---


Reading key files to understand the structure:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\app\views\mods_panel.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\app\utils\custom_list_widget_item_metadata.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "separator|divider|category|header|section",
  "path": "d:\\DEV_Rimsort\\RimSort\\app\\views\\mods_panel.py",
  "caseInsensitive": true
}
```
Additional data:

```json
{
  "isPruned": true,
  "pattern": "separator|divider|category|header|section",
  "path": "d:\\DEV_Rimsort\\RimSort\\app\\views\\mods_panel.py",
  "outputMode": "content",
  "totalFiles": 1,
  "totalMatches": 10,
  "topFiles": [
    {
      "uri": "app\\views\\mods_panel.py",
      "matchCount": 10
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\app\views\mods_panel.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="generic" data-tool-name="glob_file_search">
<details>
<summary>Tool use: **glob_file_search** • Searched codebase "undefined" • **1** result in **1** directory</summary>

Directory: **d:\DEV_Rimsort\RimSort** (1 file)

| File |
|------|
| `../README.md` |

</details>
</tool-use>

---

<tool-use data-tool-type="generic" data-tool-name="glob_file_search">
<details>
<summary>Tool use: **glob_file_search** • Searched codebase "undefined" • **1** result in **1** directory</summary>

Directory: **d:\DEV_Rimsort\RimSort** (1 file)

| File |
|------|
| `../pyproject.toml` |

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\app\views\mods_panel.py</summary>

</details>
</tool-use>

---



---


Checking project structure and how items are inserted into lists:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\README.md</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\pyproject.toml</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "insertItem|addItem|appendItem|insert.*item",
  "path": "d:\\DEV_Rimsort\\RimSort\\app\\views\\mods_panel.py",
  "caseInsensitive": true
}
```
Additional data:

```json
{
  "isPruned": true,
  "pattern": "insertItem|addItem|appendItem|insert.*item",
  "path": "d:\\DEV_Rimsort\\RimSort\\app\\views\\mods_panel.py",
  "outputMode": "content",
  "totalFiles": 1,
  "totalMatches": 12,
  "topFiles": [
    {
      "uri": "app\\views\\mods_panel.py",
      "matchCount": 12
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\app\views\mods_panel.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\app\views\main_content_panel.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How are mods inserted into the active mod list widget?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\main_content_panel.py",
        "range": {
          "startPosition": {
            "line": 94
          },
          "endPosition": {
            "line": 3647
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 95,
                "column": 1
              },
              "endPosition": {
                "line": 96,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainContent(QObject):",
            "lineNumber": 95,
            "isSignature": true
          },
          {
            "lineNumber": 525
          },
          {
            "lineNumber": 526
          },
          {
            "text": "    def _insert_data_into_lists(",
            "lineNumber": 527
          },
          {
            "text": "        self, active_mods_uuids: list[str], inactive_mods_uuids: list[str]",
            "lineNumber": 528
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 529
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 530
          },
          {
            "text": "        Insert active mods and inactive mods into respective mod list widgets.",
            "lineNumber": 531
          },
          {
            "lineNumber": 532
          },
          {
            "text": "        :param active_mods_uuids: list of active mod uuids",
            "lineNumber": 533
          },
          {
            "text": "        :param inactive_mods_uuids: list of inactive mod uuids",
            "lineNumber": 534
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 535
          },
          {
            "text": "        logger.info(",
            "lineNumber": 536
          },
          {
            "text": "            f\"Inserting mod data into active [{len(active_mods_uuids)}] and inactive [{len(inactive_mods_uuids)}] mod lists\"",
            "lineNumber": 537
          },
          {
            "text": "        )",
            "lineNumber": 538
          },
          {
            "text": "        self.mods_panel.active_mods_list.recreate_mod_list(",
            "lineNumber": 539
          },
          {
            "text": "            list_type=\"active\", uuids=active_mods_uuids",
            "lineNumber": 540
          },
          {
            "text": "        )",
            "lineNumber": 541
          },
          {
            "text": "        # Determine sort key and descending for inactive mods",
            "lineNumber": 542
          },
          {
            "text": "        if self.settings_controller.settings.inactive_mods_sorting:",
            "lineNumber": 543
          },
          {
            "text": "            # Use current UI state from the combobox and button",
            "lineNumber": 544
          },
          {
            "text": "            sort_key = ModsPanelSortKey[self.mods_panel.inactive_mods_sort_key]",
            "lineNumber": 545
          },
          {
            "text": "            descending = self.mods_panel.inactive_sort_descending",
            "lineNumber": 546
          },
          {
            "text": "        else:",
            "lineNumber": 547
          },
          {
            "text": "            sort_key = ModsPanelSortKey.FILESYSTEM_MODIFIED_TIME",
            "lineNumber": 548
          },
          {
            "text": "            descending = True",
            "lineNumber": 549
          },
          {
            "text": "        self.mods_panel.inactive_mods_list.recreate_mod_list_and_sort(",
            "lineNumber": 550
          },
          {
            "text": "            list_type=\"inactive\",",
            "lineNumber": 551
          },
          {
            "text": "            uuids=inactive_mods_uuids,",
            "lineNumber": 552
          },
          {
            "text": "            key=sort_key,",
            "lineNumber": 553
          },
          {
            "text": "            descending=descending,",
            "lineNumber": 554
          },
          {
            "text": "        )",
            "lineNumber": 555
          },
          {
            "text": "        logger.info(",
            "lineNumber": 556
          },
          {
            "text": "            f\"Finished inserting mod data into active [{len(active_mods_uuids)}] and inactive [{len(inactive_mods_uuids)}] mod lists\"",
            "lineNumber": 557
          },
          {
            "text": "        )",
            "lineNumber": 558
          },
          {
            "text": "        # Recalculate warnings for both lists",
            "lineNumber": 559
          },
          {
            "text": "        # self.mods_panel.active_mods_list.recalculate_warnings_signal.emit()",
            "lineNumber": 560
          },
          {
            "text": "        # self.mods_panel.inactive_mods_list.recalculate_warnings_signal.emit()",
            "lineNumber": 561
          },
          {
            "lineNumber": 562
          },
          {
            "text": "    def __duplicate_mods_prompt(self) -&gt; None:",
            "lineNumber": 563
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 564
          }
        ]
      },
      "score": 0.5445335507392883
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 3129
          },
          "endPosition": {
            "line": 4800
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 3130,
                "column": 1
              },
              "endPosition": {
                "line": 3131,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 3152,
                "column": 5
              },
              "endPosition": {
                "line": 3153,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModsPanel(QWidget):",
            "lineNumber": 3130,
            "isSignature": true
          },
          {
            "text": "def __init__(self, settings_controller: SettingsController) -&gt; None:",
            "lineNumber": 3183
          },
          {
            "lineNumber": 3311
          },
          {
            "text": "        self.active_mods_label.setObjectName(\"summaryValue\")",
            "lineNumber": 3312
          },
          {
            "text": "        self.active_mods_list = ModListWidget(",
            "lineNumber": 3313
          },
          {
            "text": "            list_type=\"Active\",",
            "lineNumber": 3314
          },
          {
            "text": "            settings_controller=self.settings_controller,",
            "lineNumber": 3315
          },
          {
            "text": "        )",
            "lineNumber": 3316
          },
          {
            "text": "        # Active mods search widgets",
            "lineNumber": 3317
          },
          {
            "text": "        self.active_mods_search_layout = QHBoxLayout()",
            "lineNumber": 3318
          },
          {
            "text": "        self.initialize_active_mods_search_widgets()",
            "lineNumber": 3319
          },
          {
            "lineNumber": 3320
          },
          {
            "text": "        # Add active mods widgets to layout",
            "lineNumber": 3321
          },
          {
            "text": "        self.active_panel.addWidget(self.active_mods_label)",
            "lineNumber": 3322
          },
          {
            "text": "        self.active_panel.addLayout(self.active_mods_search_layout)",
            "lineNumber": 3323
          },
          {
            "text": "        self.active_panel.addWidget(self.active_mods_list)",
            "lineNumber": 3324
          },
          {
            "lineNumber": 3325
          },
          {
            "text": "        # Add the errors summary frame below the active mods list",
            "lineNumber": 3326
          },
          {
            "text": "        self.active_panel.addWidget(self.errors_summary_frame)",
            "lineNumber": 3327
          },
          {
            "lineNumber": 3328
          },
          {
            "text": "        # Initialize inactive mods widgets",
            "lineNumber": 3329
          },
          {
            "text": "        self.inactive_mods_label = QLabel(self.tr(\"Inactive [0]\"))",
            "lineNumber": 3330
          },
          {
            "text": "        self.inactive_mods_label.setAlignment(Qt.AlignmentFlag.AlignCenter)",
            "lineNumber": 3331
          },
          {
            "text": "        self.inactive_mods_label.setObjectName(\"summaryValue\")",
            "lineNumber": 3332
          },
          {
            "text": "        self.inactive_mods_list = ModListWidget(",
            "lineNumber": 3333
          },
          {
            "text": "            list_type=\"Inactive\",",
            "lineNumber": 3334
          },
          {
            "text": "            settings_controller=self.settings_controller,",
            "lineNumber": 3335
          },
          {
            "text": "        )",
            "lineNumber": 3336
          },
          {
            "lineNumber": 3337
          },
          {
            "text": "        # Inactive mods search layout",
            "lineNumber": 3338
          },
          {
            "text": "        self.inactive_mods_search_layout = QHBoxLayout()",
            "lineNumber": 3339
          },
          {
            "text": "        self.initialize_inactive_mods_search_widgets()",
            "lineNumber": 3340
          },
          {
            "lineNumber": 3341
          },
          {
            "text": "        # Add inactive mods widgets to layout",
            "lineNumber": 3342
          },
          {
            "text": "        self.inactive_panel.addWidget(self.inactive_mods_label)",
            "lineNumber": 3343
          },
          {
            "text": "        self.inactive_panel.addLayout(self.inactive_mods_search_layout)",
            "lineNumber": 3344
          },
          {
            "text": "        self.inactive_panel.addWidget(self.inactive_mods_list)",
            "lineNumber": 3345
          },
          {
            "lineNumber": 3346
          },
          {
            "text": "        # Connect signals and slots",
            "lineNumber": 3347
          },
          {
            "text": "        self.connect_signals()",
            "lineNumber": 3348
          },
          {
            "lineNumber": 3349
          },
          {
            "text": "        # Connect to settings changed to update sort UI",
            "lineNumber": 3350
          },
          {
            "text": "        EventBus().settings_have_changed.connect(self.update_sort_ui_from_settings)",
            "lineNumber": 3351
          },
          {
            "lineNumber": 3352
          },
          {
            "text": "        # Set the main layout for the widget",
            "lineNumber": 3353
          },
          {
            "text": "        self.setLayout(self.panel)",
            "lineNumber": 3354
          },
          {
            "lineNumber": 3355
          },
          {
            "text": "        logger.debug(\"Finished ModsPanel initialization\")",
            "lineNumber": 3356
          },
          {
            "lineNumber": 3357
          },
          {
            "text": "    def initialize_active_mods_search_widgets(self) -&gt; None:",
            "lineNumber": 3358
          },
          {
            "text": "        \"\"\"Initialize widgets for active mods search layout.\"\"\"",
            "lineNumber": 3359
          }
        ]
      },
      "score": 0.46496719121932983
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 3129
          },
          "endPosition": {
            "line": 4800,
            "column": 13
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 3130,
                "column": 1
              },
              "endPosition": {
                "line": 3131,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 4657,
                "column": 5
              },
              "endPosition": {
                "line": 4658,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModsPanel(QWidget):",
            "lineNumber": 3130,
            "isSignature": true
          },
          {
            "text": "def _on_auto_add_translations(self) -&gt; None:",
            "lineNumber": 4657
          },
          {
            "lineNumber": 4764
          },
          {
            "text": "        added_uuids: list[str] = []",
            "lineNumber": 4765
          },
          {
            "text": "        for uuid in mods_to_add:",
            "lineNumber": 4766
          },
          {
            "text": "            if uuid not in self.active_mods_list.uuids:",
            "lineNumber": 4767
          },
          {
            "text": "                # Need to find the item in inactive list",
            "lineNumber": 4768
          },
          {
            "text": "                if uuid in self.inactive_mods_list.uuids:",
            "lineNumber": 4769
          },
          {
            "text": "                    index = self.inactive_mods_list.uuids.index(uuid)",
            "lineNumber": 4770
          },
          {
            "text": "                    item = self.inactive_mods_list.takeItem(index)  # This removes from list widget",
            "lineNumber": 4771
          },
          {
            "text": "                    self.inactive_mods_list.uuids.pop(index)",
            "lineNumber": 4772
          },
          {
            "text": "                    ",
            "lineNumber": 4773
          },
          {
            "text": "                    self.active_mods_list.addItem(item)",
            "lineNumber": 4774
          },
          {
            "text": "                    # self.active_mods_list.uuids is updated via handle_rows_inserted signal",
            "lineNumber": 4775
          },
          {
            "text": "                    ",
            "lineNumber": 4776
          },
          {
            "text": "                    # Ensure item data is updated (list_type)",
            "lineNumber": 4777
          },
          {
            "text": "                    data = item.data(Qt.ItemDataRole.UserRole)",
            "lineNumber": 4778
          },
          {
            "text": "                    if data:",
            "lineNumber": 4779
          },
          {
            "text": "                        data[\"list_type\"] = \"Active\"",
            "lineNumber": 4780
          },
          {
            "text": "                        item.setData(Qt.ItemDataRole.UserRole, data)",
            "lineNumber": 4781
          },
          {
            "text": "                    ",
            "lineNumber": 4782
          },
          {
            "text": "                    count += 1",
            "lineNumber": 4783
          },
          {
            "text": "                    added_uuids.append(uuid)",
            "lineNumber": 4784
          },
          {
            "text": "        ",
            "lineNumber": 4785
          },
          {
            "text": "        if count &gt; 0:",
            "lineNumber": 4786
          },
          {
            "text": "            logger.info(f\"Added {count} translation mods.\")",
            "lineNumber": 4787
          },
          {
            "text": "            show_warning(",
            "lineNumber": 4788
          },
          {
            "text": "                self.tr(\"Translations Added\"), ",
            "lineNumber": 4789
          },
          {
            "text": "                self.tr(f\"Successfully added {count} translation mods to the active list.\")",
            "lineNumber": 4790
          },
          {
            "text": "            )",
            "lineNumber": 4791
          },
          {
            "text": "            ",
            "lineNumber": 4792
          },
          {
            "text": "            # Also update translation status indicators if enabled",
            "lineNumber": 4793
          },
          {
            "text": "            if self.active_mods_list.show_translation_status:",
            "lineNumber": 4794
          },
          {
            "text": "                self._on_toggle_translation_status(True)",
            "lineNumber": 4795
          },
          {
            "text": "        else:",
            "lineNumber": 4796
          },
          {
            "text": "            logger.info(\"No new translation mods added (maybe already active).\")",
            "lineNumber": 4797
          },
          {
            "text": "            show_warning(",
            "lineNumber": 4798
          },
          {
            "text": "                self.tr(\"No New Translations\"), ",
            "lineNumber": 4799
          },
          {
            "text": "                self.tr(\"All found translation mods are already active.\")",
            "lineNumber": 4800
          },
          {
            "text": "            )",
            "lineNumber": 4801,
            "isSignature": true
          }
        ]
      },
      "score": 0.464376300573349
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\main_content_panel.py",
        "range": {
          "startPosition": {
            "line": 94
          },
          "endPosition": {
            "line": 3647
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 95,
                "column": 1
              },
              "endPosition": {
                "line": 96,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainContent(QObject):",
            "lineNumber": 95,
            "isSignature": true
          },
          {
            "lineNumber": 718
          },
          {
            "lineNumber": 719
          },
          {
            "text": "    def __repopulate_lists(self, is_initial: bool = False) -&gt; None:",
            "lineNumber": 720
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 721
          },
          {
            "text": "        Get active and inactive mod lists based on the config path",
            "lineNumber": 722
          },
          {
            "text": "        and write them to the list widgets. is_initial indicates if",
            "lineNumber": 723
          },
          {
            "text": "        this function is running at app initialization. If is_initial is",
            "lineNumber": 724
          },
          {
            "text": "        true, then write the active_mods_data and inactive_mods_data to",
            "lineNumber": 725
          },
          {
            "text": "        restore variables.",
            "lineNumber": 726
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 727
          },
          {
            "text": "        logger.info(\"Repopulating mod lists\")",
            "lineNumber": 728
          },
          {
            "text": "        (",
            "lineNumber": 729
          },
          {
            "text": "            active_mods_uuids,",
            "lineNumber": 730
          },
          {
            "text": "            inactive_mods_uuids,",
            "lineNumber": 731
          },
          {
            "text": "            self.duplicate_mods,",
            "lineNumber": 732
          },
          {
            "text": "            self.missing_mods,",
            "lineNumber": 733
          },
          {
            "text": "        ) = metadata.get_mods_from_list(",
            "lineNumber": 734
          },
          {
            "text": "            mod_list=str(",
            "lineNumber": 735
          },
          {
            "text": "                (",
            "lineNumber": 736
          },
          {
            "text": "                    Path(",
            "lineNumber": 737
          },
          {
            "text": "                        self.settings_controller.settings.instances[",
            "lineNumber": 738
          },
          {
            "text": "                            self.settings_controller.settings.current_instance",
            "lineNumber": 739
          },
          {
            "text": "                        ].config_folder",
            "lineNumber": 740
          },
          {
            "text": "                    )",
            "lineNumber": 741
          },
          {
            "text": "                    / \"ModsConfig.xml\"",
            "lineNumber": 742
          },
          {
            "text": "                )",
            "lineNumber": 743
          },
          {
            "text": "            )",
            "lineNumber": 744
          },
          {
            "text": "        )",
            "lineNumber": 745
          },
          {
            "text": "        self.active_mods_uuids_last_save = active_mods_uuids",
            "lineNumber": 746
          },
          {
            "text": "        if is_initial:",
            "lineNumber": 747
          },
          {
            "text": "            logger.info(\"Caching initial active/inactive mod lists\")",
            "lineNumber": 748
          },
          {
            "text": "            self.active_mods_uuids_restore_state = active_mods_uuids",
            "lineNumber": 749
          },
          {
            "text": "            self.inactive_mods_uuids_restore_state = inactive_mods_uuids",
            "lineNumber": 750
          },
          {
            "lineNumber": 751
          },
          {
            "text": "        self._insert_data_into_lists(active_mods_uuids, inactive_mods_uuids)",
            "lineNumber": 752
          },
          {
            "lineNumber": 753
          },
          {
            "text": "    def _do_check_for_update(self) -&gt; None:",
            "lineNumber": 754
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 755
          },
          {
            "text": "        Check for RimSort updates using UpdateManager.",
            "lineNumber": 756
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 757
          },
          {
            "text": "        update_manager = UpdateManager(",
            "lineNumber": 758
          },
          {
            "text": "            self.settings_controller, self, self.mod_info_panel",
            "lineNumber": 759
          },
          {
            "text": "        )",
            "lineNumber": 760
          },
          {
            "text": "        update_manager.do_check_for_update()",
            "lineNumber": 761
          },
          {
            "lineNumber": 762
          },
          {
            "text": "    def __do_get_github_release_info(self) -&gt; dict[str, Any]:",
            "lineNumber": 763
          },
          {
            "text": "        # Parse latest release",
            "lineNumber": 764
          },
          {
            "text": "        ",
            "lineNumber": 765
          }
        ]
      },
      "score": 0.4628581404685974
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 2820,
                "column": 5
              },
              "endPosition": {
                "line": 2821,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "lineNumber": 2918
          },
          {
            "lineNumber": 2919
          },
          {
            "text": "    def recreate_mod_list(",
            "lineNumber": 2920
          },
          {
            "text": "        self, list_type: str, uuids: list[str], filtering: bool = False",
            "lineNumber": 2921
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 2922
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2923
          },
          {
            "text": "        Clear all mod items and add new ones from a dict.",
            "lineNumber": 2924
          },
          {
            "lineNumber": 2925
          },
          {
            "text": "        :param mods: dict of mod data",
            "lineNumber": 2926
          },
          {
            "text": "        :param filtering: if True, UUIDs are already sorted; skip sorting",
            "lineNumber": 2927
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2928
          },
          {
            "text": "        logger.info(f\"Internally recreating {list_type} mod list\")",
            "lineNumber": 2929
          },
          {
            "text": "        # Skip sorting if UUIDs are already filtered/sorted (filtering=True)",
            "lineNumber": 2930
          },
          {
            "text": "        if not filtering:",
            "lineNumber": 2931
          },
          {
            "text": "            # Sort inactive mods using saved settings if enabled",
            "lineNumber": 2932
          },
          {
            "text": "            if (",
            "lineNumber": 2933
          },
          {
            "text": "                list_type == \"Inactive\"",
            "lineNumber": 2934
          },
          {
            "text": "                and self.settings_controller.settings.save_inactive_mods_sort_state",
            "lineNumber": 2935
          },
          {
            "text": "                and self.settings_controller.settings.inactive_mods_sorting",
            "lineNumber": 2936
          },
          {
            "text": "            ):",
            "lineNumber": 2937
          },
          {
            "text": "                sort_key = ModsPanelSortKey[",
            "lineNumber": 2938
          },
          {
            "text": "                    self.settings_controller.settings.inactive_mods_sort_key",
            "lineNumber": 2939
          },
          {
            "text": "                ]",
            "lineNumber": 2940
          },
          {
            "text": "                descending = (",
            "lineNumber": 2941
          },
          {
            "text": "                    self.settings_controller.settings.inactive_mods_sort_descending",
            "lineNumber": 2942
          },
          {
            "text": "                )",
            "lineNumber": 2943
          },
          {
            "text": "                uuids = sort_uuids(",
            "lineNumber": 2944
          },
          {
            "text": "                    uuids,",
            "lineNumber": 2945
          },
          {
            "text": "                    key=sort_key,",
            "lineNumber": 2946
          },
          {
            "text": "                    descending=descending,",
            "lineNumber": 2947
          },
          {
            "text": "                    settings_controller=self.settings_controller,",
            "lineNumber": 2948
          },
          {
            "text": "                )",
            "lineNumber": 2949
          },
          {
            "text": "            else:",
            "lineNumber": 2950
          },
          {
            "text": "                if list_type == \"Inactive\":",
            "lineNumber": 2951
          },
          {
            "text": "                    uuids = sort_uuids(",
            "lineNumber": 2952
          },
          {
            "text": "                        uuids,",
            "lineNumber": 2953
          },
          {
            "text": "                        key=ModsPanelSortKey.FILESYSTEM_MODIFIED_TIME,",
            "lineNumber": 2954
          },
          {
            "text": "                        descending=True,",
            "lineNumber": 2955
          },
          {
            "text": "                        settings_controller=self.settings_controller,",
            "lineNumber": 2956
          },
          {
            "text": "                    )",
            "lineNumber": 2957
          },
          {
            "text": "        # Disable updates and disconnect model signals during rebuild",
            "lineNumber": 2958
          },
          {
            "text": "        self.setUpdatesEnabled(False)",
            "lineNumber": 2959
          },
          {
            "text": "        # Temporarily disconnect model signals to avoid cascading updates and duplicate items",
            "lineNumber": 2960
          },
          {
            "text": "        try:",
            "lineNumber": 2961
          },
          {
            "text": "            self.model().rowsInserted.disconnect(self.handle_rows_inserted)",
            "lineNumber": 2962
          },
          {
            "text": "        except TypeError:",
            "lineNumber": 2963
          },
          {
            "text": "            pass  # Signal not connected",
            "lineNumber": 2964
          },
          {
            "text": "        try:",
            "lineNumber": 2965
          },
          {
            "text": "            self.model().rowsAboutToBeRemoved.disconnect",
            "lineNumber": 2966
          }
        ]
      },
      "score": 0.4627443552017212
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "lineNumber": 2356
          },
          {
            "lineNumber": 2357
          },
          {
            "text": "    def handle_rows_inserted(self, parent: QModelIndex, first: int, last: int) -&gt; None:",
            "lineNumber": 2358
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2359
          },
          {
            "text": "        This slot is called when rows are inserted.",
            "lineNumber": 2360
          },
          {
            "lineNumber": 2361
          },
          {
            "text": "        When mods are inserted into the mod list, either through the",
            "lineNumber": 2362
          },
          {
            "text": "        &#96;recreate_mod_list&#96; method above or automatically through dragging",
            "lineNumber": 2363
          },
          {
            "text": "        and dropping on the UI, this function is called. For single-item",
            "lineNumber": 2364
          },
          {
            "text": "        inserts, which happens through the above method or through dragging",
            "lineNumber": 2365
          },
          {
            "text": "        and dropping individual mods, &#96;first&#96; equals &#96;last&#96; and the below",
            "lineNumber": 2366
          },
          {
            "text": "        loop is just run once. In this loop, a custom widget is created,",
            "lineNumber": 2367
          },
          {
            "text": "        which displays the text, icons, etc, and is added to the list item.",
            "lineNumber": 2368
          },
          {
            "lineNumber": 2369
          },
          {
            "text": "        For dragging and dropping multiple items, the loop is run multiple",
            "lineNumber": 2370
          },
          {
            "text": "        times. Importantly, even for multiple items, the number of list items",
            "lineNumber": 2371
          },
          {
            "text": "        is set BEFORE the loop starts running, e.g. if we were dragging 3 mods",
            "lineNumber": 2372
          },
          {
            "text": "        onto a list of 100 mods, this method is called once and by the start",
            "lineNumber": 2373
          },
          {
            "text": "        of this method, &#96;self.count()&#96; is already 103; there are 3 \"empty\"",
            "lineNumber": 2374
          },
          {
            "text": "        list items that do not have widgets assigned to them.",
            "lineNumber": 2375
          },
          {
            "lineNumber": 2376
          },
          {
            "text": "        However, inserting the initial &#96;n&#96; mods with &#96;recreate_mod_list&#96; has",
            "lineNumber": 2377
          },
          {
            "text": "        an inefficiency: it is only able to insert one at a time. This means",
            "lineNumber": 2378
          },
          {
            "text": "        this method is called &#96;n&#96; times for the first &#96;n&#96; mods.",
            "lineNumber": 2379
          },
          {
            "text": "        One optimization here (saving about 1 second with a 200 mod list) is",
            "lineNumber": 2380
          },
          {
            "text": "        to not emit the list update signal until the number of widgets is",
            "lineNumber": 2381
          },
          {
            "text": "        equal to the number of items. If widgets &lt; items, that means",
            "lineNumber": 2382
          },
          {
            "text": "        widgets are still being added. Only when widgets == items does it mean",
            "lineNumber": 2383
          },
          {
            "text": "        we are done with adding the initial set of mods. We can do this",
            "lineNumber": 2384
          },
          {
            "text": "        by keeping track of the number of widgets currently loaded in the list",
            "lineNumber": 2385
          },
          {
            "text": "        through a set of UUIDs which we can compare to the number of items",
            "lineNumber": 2386
          },
          {
            "text": "        directly, as this set will equate to the items in the list.",
            "lineNumber": 2387
          },
          {
            "lineNumber": 2388
          },
          {
            "text": "        :param parent: parent to get rows under (not used)",
            "lineNumber": 2389
          },
          {
            "text": "        :param first: index of first item inserted",
            "lineNumber": 2390
          },
          {
            "text": "        :param last: index of last item inserted",
            "lineNumber": 2391
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2392
          },
          {
            "text": "        # Loop through the indexes of inserted items, load widgets if not",
            "lineNumber": 2393
          },
          {
            "text": "        # already loaded. Each item index corresponds to a UUID index.",
            "lineNumber": 2394
          },
          {
            "text": "        for",
            "lineNumber": 2395
          }
        ]
      },
      "score": 0.4594106674194336
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 2268,
                "column": 5
              },
              "endPosition": {
                "line": 2269,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "lineNumber": 2307
          },
          {
            "lineNumber": 2308
          },
          {
            "text": "    def check_widgets_visible(self) -&gt; None:",
            "lineNumber": 2309
          },
          {
            "text": "        # This function checks the visibility of each item and creates a widget if the item is visible and not already setup.",
            "lineNumber": 2310
          },
          {
            "text": "        indexes = self.get_visible_indexes()",
            "lineNumber": 2311
          },
          {
            "text": "        for idx in indexes:",
            "lineNumber": 2312
          },
          {
            "text": "            item = self.item(idx)",
            "lineNumber": 2313
          },
          {
            "text": "            # Check for visible item without a widget set",
            "lineNumber": 2314
          },
          {
            "text": "            if item and self.itemWidget(item) is None:",
            "lineNumber": 2315
          },
          {
            "text": "                self.create_widget_for_item(item)",
            "lineNumber": 2316
          },
          {
            "lineNumber": 2317
          },
          {
            "text": "    def get_visible_indexes(self) -&gt; set[int]:",
            "lineNumber": 2318
          },
          {
            "text": "        \"\"\"This function returns the set of indexes for items that are currently visible in the viewport.\"\"\"",
            "lineNumber": 2319
          },
          {
            "text": "        indexes: set[int] = set()",
            "lineNumber": 2320
          },
          {
            "lineNumber": 2321
          },
          {
            "text": "        top_index = self.indexAt(self.viewport().rect().topLeft())",
            "lineNumber": 2322
          },
          {
            "text": "        if not top_index.isValid():",
            "lineNumber": 2323
          },
          {
            "text": "            return indexes",
            "lineNumber": 2324
          },
          {
            "lineNumber": 2325
          },
          {
            "text": "        row = top_index.row()",
            "lineNumber": 2326
          },
          {
            "text": "        model = self.model()",
            "lineNumber": 2327
          },
          {
            "lineNumber": 2328
          },
          {
            "text": "        while row &lt; model.rowCount():",
            "lineNumber": 2329
          },
          {
            "text": "            idx = model.index(row, 0)",
            "lineNumber": 2330
          },
          {
            "text": "            rect = self.visualRect(idx)",
            "lineNumber": 2331
          },
          {
            "text": "            if rect.top() &gt; self.viewport().height():",
            "lineNumber": 2332
          },
          {
            "text": "                break",
            "lineNumber": 2333
          },
          {
            "text": "            elif rect.bottom() &gt;= 0:",
            "lineNumber": 2334
          },
          {
            "text": "                indexes.add(row)",
            "lineNumber": 2335
          },
          {
            "lineNumber": 2336
          },
          {
            "text": "            row += 1",
            "lineNumber": 2337
          },
          {
            "lineNumber": 2338
          },
          {
            "text": "        return indexes",
            "lineNumber": 2339
          },
          {
            "text": "    ",
            "lineNumber": 2340
          },
          {
            "text": "    def handle_item_data_changed(self, item: CustomListWidgetItem) -&gt; None:",
            "lineNumber": 2341
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2342
          },
          {
            "text": "        This slot is called when an item's data changes",
            "lineNumber": 2343
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2344
          },
          {
            "text": "        widget = self.itemWidget(item)",
            "lineNumber": 2345
          },
          {
            "text": "        if widget is not None and isinstance(widget, ModListItemInner):",
            "lineNumber": 2346
          },
          {
            "text": "            widget.repolish(item)",
            "lineNumber": 2347
          },
          {
            "lineNumber": 2348
          },
          {
            "text": "    def handle_other_list_row_added(self, uuid: str) -&gt; None:",
            "lineNumber": 2349
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2350
          },
          {
            "text": "        When a mod is moved from Inactive-&gt;Active, the uuid is removed from the Inactive list.",
            "lineNumber": 2351
          },
          {
            "lineNumber": 2352
          },
          {
            "text": "        When a mod is moved from Active-&gt;Inactive, the uuid is removed from the Active list.",
            "lineNumber": 2353
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2354
          },
          {
            "text": "        if uuid in self.uuids:",
            "lineNumber": 2355
          },
          {
            "text": "            self.uuids.remove(uuid)",
            "lineNumber": 2356
          },
          {
            "lineNumber": 2357
          },
          {
            "text": "    def handle_rows_inserted(self, parent: QModelIndex, first: int, last: int) -&gt; None:",
            "lineNumber": 2358
          },
          {
            "text": "        ",
            "lineNumber": 2359
          }
        ]
      },
      "score": 0.4538346529006958
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\utils\\metadata.py",
        "range": {
          "startPosition": {
            "line": 2237,
            "column": 17
          },
          "endPosition": {
            "line": 2379
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "def get_mods_from_list(",
            "lineNumber": 2241,
            "isSignature": true
          },
          {
            "text": "    mod_list: Union[str, list[str]],",
            "lineNumber": 2242,
            "isSignature": true
          },
          {
            "text": ") -&gt; tuple[list[str], list[str], dict[str, Any], list[str]]:",
            "lineNumber": 2243,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 2244
          },
          {
            "text": "    Given a RimWorld mods list containing a complete list of mods,",
            "lineNumber": 2245
          },
          {
            "text": "    including base game and DLC, as well as their dependencies in order,",
            "lineNumber": 2246
          },
          {
            "text": "    return a list of mods for the active list widget and a list of",
            "lineNumber": 2247
          },
          {
            "text": "    mods for the inactive list widget.",
            "lineNumber": 2248
          },
          {
            "lineNumber": 2249
          },
          {
            "text": "    :param mod_list:",
            "lineNumber": 2250
          },
          {
            "text": "        A path to an .rws/.xml style list, or a list of package ids",
            "lineNumber": 2251
          },
          {
            "text": "        OR a list of mod uuids",
            "lineNumber": 2252
          },
          {
            "text": "    :return: a tuple which contains the active mods dict, inactive mods dict,",
            "lineNumber": 2253
          },
          {
            "text": "    duplicate mods dict, and missing mods list",
            "lineNumber": 2254
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 2255
          },
          {
            "text": "    all_mods = MetadataManager.instance().internal_local_metadata",
            "lineNumber": 2256
          },
          {
            "lineNumber": 2257
          },
          {
            "text": "    active_mods_uuids: list[str] = []",
            "lineNumber": 2258
          },
          {
            "text": "    inactive_mods_uuids: list[str] = []",
            "lineNumber": 2259
          },
          {
            "text": "    duplicate_mods: dict[str, Any] = {}",
            "lineNumber": 2260
          },
          {
            "text": "    duplicates_processed = []",
            "lineNumber": 2261
          },
          {
            "text": "    missing_mods: list[str] = []",
            "lineNumber": 2262
          },
          {
            "text": "    populated_mods = []",
            "lineNumber": 2263
          },
          {
            "text": "    to_populate = []",
            "lineNumber": 2264
          },
          {
            "text": "    logger.debug(\"Started generating active and inactive mods\")",
            "lineNumber": 2265
          },
          {
            "text": "    # Calculate duplicate mods (SCHEMA: {str packageid: list[str duplicate uuids]})",
            "lineNumber": 2266
          },
          {
            "text": "    for mod_uuid, mod_data in all_mods.items():",
            "lineNumber": 2267
          },
          {
            "text": "        # Using setdefault() to initialize the dictionary and then assigning the value",
            "lineNumber": 2268
          },
          {
            "text": "        duplicate_mods.setdefault(mod_data[\"packageid\"], []).append(mod_uuid)",
            "lineNumber": 2269
          },
          {
            "text": "    # Filter out non-duplicate mods",
            "lineNumber": 2270
          },
          {
            "text": "    duplicate_mods = {k: v for k, v in duplicate_mods.items() if len(v) &gt; 1}",
            "lineNumber": 2271
          },
          {
            "text": "    # Calculate mod lists",
            "lineNumber": 2272
          },
          {
            "text": "    if isinstance(mod_list, str):",
            "lineNumber": 2273
          }
        ]
      },
      "score": 0.446905255317688
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 2358,
                "column": 5
              },
              "endPosition": {
                "line": 2359,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "text": "def handle_rows_inserted(self, parent: QModelIndex, first: int, last: int) -&gt; None:",
            "lineNumber": 2358
          },
          {
            "text": "\"\"\"",
            "lineNumber": 2392
          },
          {
            "text": "        # Loop through the indexes of inserted items, load widgets if not",
            "lineNumber": 2393
          },
          {
            "text": "        # already loaded. Each item index corresponds to a UUID index.",
            "lineNumber": 2394
          },
          {
            "text": "        for idx in range(first, last + 1):",
            "lineNumber": 2395
          },
          {
            "text": "            item = self.item(idx)",
            "lineNumber": 2396
          },
          {
            "text": "            if not isinstance(item, CustomListWidgetItem):",
            "lineNumber": 2397
          },
          {
            "text": "                # Convert to CustomListWidgetItem",
            "lineNumber": 2398
          },
          {
            "text": "                item = CustomListWidgetItem(item)",
            "lineNumber": 2399
          },
          {
            "text": "                self.replaceItemAtIndex(idx, item)",
            "lineNumber": 2400
          },
          {
            "text": "            if item:",
            "lineNumber": 2401
          },
          {
            "text": "                data = item.data(Qt.ItemDataRole.UserRole)",
            "lineNumber": 2402
          },
          {
            "text": "                if data is None:",
            "lineNumber": 2403
          },
          {
            "text": "                    logger.debug(f\"Attempted to insert item with None data. Idx: {idx}\")",
            "lineNumber": 2404
          },
          {
            "text": "                    continue",
            "lineNumber": 2405
          },
          {
            "text": "                # Ensure the item's persisted list_type matches the destination list after insertion",
            "lineNumber": 2406
          },
          {
            "text": "                try:",
            "lineNumber": 2407
          },
          {
            "text": "                    data[\"list_type\"] = self.list_type",
            "lineNumber": 2408
          },
          {
            "text": "                    item.setData(Qt.ItemDataRole.UserRole, data)",
            "lineNumber": 2409
          },
          {
            "text": "                except Exception:",
            "lineNumber": 2410
          },
          {
            "text": "                    pass",
            "lineNumber": 2411
          },
          {
            "text": "                uuid = data[\"uuid\"]",
            "lineNumber": 2412
          },
          {
            "text": "                self.uuids.insert(idx, uuid)",
            "lineNumber": 2413
          },
          {
            "text": "                self.item_added_signal.emit(uuid)",
            "lineNumber": 2414
          },
          {
            "text": "        # Update list signal if all items are loaded",
            "lineNumber": 2415
          },
          {
            "text": "        if len(self.uuids) == self.count():",
            "lineNumber": 2416
          },
          {
            "text": "            # Update list with the number of items",
            "lineNumber": 2417
          },
          {
            "text": "            logger.debug(",
            "lineNumber": 2418
          },
          {
            "text": "                f\"Emitting {self.list_type} list update signal after rows inserted [{self.count()}]\"",
            "lineNumber": 2419
          },
          {
            "text": "            )",
            "lineNumber": 2420
          },
          {
            "text": "            self.list_update_signal.emit(str(self.count()))",
            "lineNumber": 2421
          },
          {
            "lineNumber": 2422
          },
          {
            "text": "    def handle_rows_removed(self, parent: QModelIndex, first: int, last: int) -&gt; None:",
            "lineNumber": 2423
          },
          {
            "text": "        ",
            "lineNumber": 2424
          }
        ]
      },
      "score": 0.4457859396934509
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 2820,
                "column": 5
              },
              "endPosition": {
                "line": 2821,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "text": "def recreate_mod_list(",
            "lineNumber": 2920
          },
          {
            "text": "        self, list_type: str, uuids: list[str], filtering: bool = False",
            "lineNumber": 2921
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 2922
          },
          {
            "lineNumber": 2964
          },
          {
            "text": "        try:",
            "lineNumber": 2965
          },
          {
            "text": "            self.model().rowsAboutToBeRemoved.disconnect(self.handle_rows_removed)",
            "lineNumber": 2966
          },
          {
            "text": "        except TypeError:",
            "lineNumber": 2967
          },
          {
            "text": "            pass  # Signal not connected",
            "lineNumber": 2968
          },
          {
            "lineNumber": 2969
          },
          {
            "text": "        self.clear()",
            "lineNumber": 2970
          },
          {
            "text": "        self.uuids = list()",
            "lineNumber": 2971
          },
          {
            "text": "        if uuids:  # Insert data...",
            "lineNumber": 2972
          },
          {
            "text": "            for uuid_key in uuids:",
            "lineNumber": 2973
          },
          {
            "text": "                mod_path = self.metadata_manager.internal_local_metadata[uuid_key][",
            "lineNumber": 2974
          },
          {
            "text": "                    \"path\"",
            "lineNumber": 2975
          },
          {
            "text": "                ]",
            "lineNumber": 2976
          },
          {
            "text": "                aux_metadata_controller = (",
            "lineNumber": 2977
          },
          {
            "text": "                    AuxMetadataController.get_or_create_cached_instance(",
            "lineNumber": 2978
          },
          {
            "text": "                        self.settings_controller.settings.aux_db_path",
            "lineNumber": 2979
          },
          {
            "text": "                    )",
            "lineNumber": 2980
          },
          {
            "text": "                )",
            "lineNumber": 2981
          },
          {
            "text": "                with aux_metadata_controller.Session() as aux_metadata_session:",
            "lineNumber": 2982
          },
          {
            "text": "                    aux_metadata_controller.get_or_create(",
            "lineNumber": 2983
          },
          {
            "text": "                        aux_metadata_session, mod_path",
            "lineNumber": 2984
          },
          {
            "text": "                    )",
            "lineNumber": 2985
          },
          {
            "text": "                    aux_metadata_controller.update(",
            "lineNumber": 2986
          },
          {
            "text": "                        aux_metadata_session, mod_path, outdated=False",
            "lineNumber": 2987
          },
          {
            "text": "                    )",
            "lineNumber": 2988
          },
          {
            "text": "                    list_item = CustomListWidgetItem(self)",
            "lineNumber": 2989
          },
          {
            "text": "                    data = CustomListWidgetItemMetadata(",
            "lineNumber": 2990
          },
          {
            "text": "                        uuid=uuid_key,",
            "lineNumber": 2991
          },
          {
            "text": "                        list_type=self.list_type,",
            "lineNumber": 2992
          },
          {
            "text": "                        aux_metadata_controller=aux_metadata_controller,",
            "lineNumber": 2993
          },
          {
            "text": "                        aux_metadata_session=aux_metadata_session,",
            "lineNumber": 2994
          },
          {
            "text": "                        settings_controller=self.settings_controller,",
            "lineNumber": 2995
          },
          {
            "text": "                    )",
            "lineNumber": 2996
          },
          {
            "text": "                list_item.setData(Qt.ItemDataRole.UserRole, data)",
            "lineNumber": 2997
          },
          {
            "text": "                self.addItem(list_item)",
            "lineNumber": 2998
          },
          {
            "text": "                # When refreshing, update entry if needed?",
            "lineNumber": 2999
          },
          {
            "text": "            # Set uuids list to match the widget after all items are added",
            "lineNumber": 3000
          },
          {
            "text": "            self.uuids = uuids",
            "lineNumber": 3001
          },
          {
            "lineNumber": 3002
          },
          {
            "text": "        else:  # ...unless we don't have mods, at which point reenable updates and exit",
            "lineNumber": 3003
          }
        ]
      },
      "score": 0.4405938982963562
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\main_content_panel.py",
        "range": {
          "startPosition": {
            "line": 94
          },
          "endPosition": {
            "line": 3647
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 95,
                "column": 1
              },
              "endPosition": {
                "line": 96,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 417,
                "column": 5
              },
              "endPosition": {
                "line": 418,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainContent(QObject):",
            "lineNumber": 95,
            "isSignature": true
          },
          {
            "text": "def __handle_active_mod_key_press(self, key: str) -&gt; None:",
            "lineNumber": 417
          },
          {
            "lineNumber": 430
          },
          {
            "text": "        if key == \"Left\":",
            "lineNumber": 431
          },
          {
            "text": "            iml.setFocus()",
            "lineNumber": 432
          },
          {
            "text": "            if not iml.selectedIndexes():",
            "lineNumber": 433
          },
          {
            "text": "                iml.setCurrentRow(self.___get_relative_middle(iml))",
            "lineNumber": 434
          },
          {
            "text": "            selected_items = iml.selectedItems()",
            "lineNumber": 435
          },
          {
            "text": "            if not selected_items:",
            "lineNumber": 436
          },
          {
            "text": "                return",
            "lineNumber": 437
          },
          {
            "text": "            item = selected_items[0]",
            "lineNumber": 438
          },
          {
            "text": "            data = item.data(Qt.ItemDataRole.UserRole)",
            "lineNumber": 439
          },
          {
            "text": "            uuid = data[\"uuid\"]",
            "lineNumber": 440
          },
          {
            "text": "            self.__mod_list_slot(uuid, cast(CustomListWidgetItem, item))",
            "lineNumber": 441
          },
          {
            "lineNumber": 442
          },
          {
            "text": "        elif key == \"Return\" or key == \"Space\" or key == \"DoubleClick\":",
            "lineNumber": 443
          },
          {
            "text": "            # TODO: graphical bug where if you hold down the key, items are",
            "lineNumber": 444
          },
          {
            "text": "            # inserted too quickly and become empty items",
            "lineNumber": 445
          },
          {
            "lineNumber": 446
          },
          {
            "text": "            items_to_move = aml.selectedItems().copy()",
            "lineNumber": 447
          },
          {
            "text": "            if items_to_move:",
            "lineNumber": 448
          },
          {
            "text": "                first_selected = sorted(aml.row(i) for i in items_to_move)[0]",
            "lineNumber": 449
          },
          {
            "lineNumber": 450
          },
          {
            "text": "                # Remove items from current list",
            "lineNumber": 451
          },
          {
            "text": "                for item in items_to_move:",
            "lineNumber": 452
          },
          {
            "text": "                    data = item.data(Qt.ItemDataRole.UserRole)",
            "lineNumber": 453
          },
          {
            "text": "                    uuid = data[\"uuid\"]",
            "lineNumber": 454
          },
          {
            "text": "                    aml.uuids.remove(uuid)",
            "lineNumber": 455
          },
          {
            "text": "                    aml.takeItem(aml.row(item))",
            "lineNumber": 456
          },
          {
            "text": "                if aml.count():",
            "lineNumber": 457
          },
          {
            "text": "                    if aml.count() == first_selected:",
            "lineNumber": 458
          },
          {
            "text": "                        aml.setCurrentRow(aml.count() - 1)",
            "lineNumber": 459
          },
          {
            "text": "                    else:",
            "lineNumber": 460
          },
          {
            "text": "                        aml.setCurrentRow(first_selected)",
            "lineNumber": 461
          },
          {
            "lineNumber": 462
          },
          {
            "text": "                # Insert items into other list",
            "lineNumber": 463
          },
          {
            "text": "                if not iml.selectedIndexes():",
            "lineNumber": 464
          },
          {
            "text": "                    count = self.___get_relative_middle(iml)",
            "lineNumber": 465
          },
          {
            "text": "                else:",
            "lineNumber": 466
          },
          {
            "text": "                    count = iml.row(iml.selectedItems()[-1]) + 1",
            "lineNumber": 467
          },
          {
            "text": "                for item in items_to_move:",
            "lineNumber": 468
          },
          {
            "text": "                    iml.insertItem(count, item)",
            "lineNumber": 469
          },
          {
            "text": "                    count += 1",
            "lineNumber": 470
          },
          {
            "text": "        # List error/warnings are automatically recalculated when a mod is inserted/removed from a list",
            "lineNumber": 471
          },
          {
            "lineNumber": 472
          },
          {
            "text": "    def __handle_inactive_mod_key_press(self, key: str) -&gt; None:",
            "lineNumber": 473
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 474
          }
        ]
      },
      "score": 0.4378449022769928
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\controllers\\main_window_controller.py",
        "range": {
          "startPosition": {
            "line": 13
          },
          "endPosition": {
            "line": 414
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 14,
                "column": 1
              },
              "endPosition": {
                "line": 15,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 98,
                "column": 5
              },
              "endPosition": {
                "line": 100,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainWindowController(QObject):",
            "lineNumber": 14,
            "isSignature": true
          },
          {
            "text": "def check_dependencies(self) -&gt; None:",
            "lineNumber": 98
          },
          {
            "text": "        # Get the active mods list",
            "lineNumber": 99
          },
          {
            "lineNumber": 307
          },
          {
            "lineNumber": 308
          },
          {
            "text": "                # First add any local mods to the active list",
            "lineNumber": 309
          },
          {
            "text": "                if local_mods:",
            "lineNumber": 310
          },
          {
            "text": "                    for mod_id in local_mods:",
            "lineNumber": 311
          },
          {
            "text": "                        # Find the UUID for this package ID",
            "lineNumber": 312
          },
          {
            "text": "                        for (",
            "lineNumber": 313
          },
          {
            "text": "                            uuid,",
            "lineNumber": 314
          },
          {
            "text": "                            mod_data,",
            "lineNumber": 315
          },
          {
            "text": "                        ) in self.metadata_manager.internal_local_metadata.items():",
            "lineNumber": 316
          },
          {
            "text": "                            if mod_data.get(\"packageid\") == mod_id:",
            "lineNumber": 317
          },
          {
            "text": "                                active_mods.add(uuid)",
            "lineNumber": 318
          },
          {
            "text": "                                break",
            "lineNumber": 319
          },
          {
            "lineNumber": 320
          },
          {
            "text": "                    # Update the active mods list with local mods",
            "lineNumber": 321
          },
          {
            "text": "                    self.main_window.main_content_panel.mods_panel.active_mods_list.uuids = list(",
            "lineNumber": 322
          },
          {
            "text": "                        active_mods",
            "lineNumber": 323
          },
          {
            "text": "                    )",
            "lineNumber": 324
          },
          {
            "text": "                    # Trigger list updated signal to refresh UI",
            "lineNumber": 325
          },
          {
            "text": "                    self.main_window.main_content_panel.mods_panel.list_updated_signal.emit()",
            "lineNumber": 326
          },
          {
            "lineNumber": 327
          },
          {
            "text": "                # If there are mods to download, check SteamCMD setup first",
            "lineNumber": 328
          }
        ]
      },
      "score": 0.4297858476638794
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 3129
          },
          "endPosition": {
            "line": 4800
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 3130,
                "column": 1
              },
              "endPosition": {
                "line": 3131,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModsPanel(QWidget):",
            "lineNumber": 3130,
            "isSignature": true
          },
          {
            "lineNumber": 3935
          },
          {
            "lineNumber": 3936
          },
          {
            "text": "    def on_active_mods_search(self, pattern: str) -&gt; None:",
            "lineNumber": 3937
          },
          {
            "text": "        self.signal_search_and_filters(",
            "lineNumber": 3938
          },
          {
            "text": "            list_type=\"Active\",",
            "lineNumber": 3939
          },
          {
            "text": "            pattern=pattern,",
            "lineNumber": 3940
          },
          {
            "text": "        )",
            "lineNumber": 3941
          },
          {
            "lineNumber": 3942
          },
          {
            "text": "    def on_active_mods_search_clear(self) -&gt; None:",
            "lineNumber": 3943
          },
          {
            "text": "        self.signal_clear_search(",
            "lineNumber": 3944
          },
          {
            "text": "            list_type=\"Active\",",
            "lineNumber": 3945
          },
          {
            "text": "        )",
            "lineNumber": 3946
          },
          {
            "lineNumber": 3947
          },
          {
            "text": "    def on_active_mods_search_data_source_filter(self) -&gt; None:",
            "lineNumber": 3948
          },
          {
            "text": "        self.signal_search_source_filter(list_type=\"Active\")",
            "lineNumber": 3949
          },
          {
            "lineNumber": 3950
          },
          {
            "text": "    def on_active_mods_search_data_source_filter_type(self) -&gt; None:",
            "lineNumber": 3951
          },
          {
            "text": "        self.apply_mods_filter_type(list_type=\"Active\")",
            "lineNumber": 3952
          },
          {
            "lineNumber": 3953
          },
          {
            "text": "    def on_active_mods_mode_filter_toggle(self) -&gt; None:",
            "lineNumber": 3954
          },
          {
            "text": "        self.signal_search_mode_filter(list_type=\"Active\")",
            "lineNumber": 3955
          },
          {
            "lineNumber": 3956
          },
          {
            "text": "    def on_inactive_mods_list_updated(self, count: str) -&gt; None:",
            "lineNumber": 3957
          },
          {
            "text": "        self.mod_list_updated(count=count, list_type=\"Inactive\")",
            "lineNumber": 3958
          },
          {
            "lineNumber": 3959
          },
          {
            "text": "    def on_inactive_mods_search(self, pattern: str) -&gt; None:",
            "lineNumber": 3960
          },
          {
            "text": "        self.signal_search_and_filters(",
            "lineNumber": 3961
          },
          {
            "text": "            list_type=\"Inactive\",",
            "lineNumber": 3962
          },
          {
            "text": "            pattern=pattern,",
            "lineNumber": 3963
          },
          {
            "text": "        )",
            "lineNumber": 3964
          },
          {
            "lineNumber": 3965
          },
          {
            "text": "    def on_inactive_mods_search_clear(self) -&gt; None:",
            "lineNumber": 3966
          },
          {
            "text": "        self.signal_clear_search(",
            "lineNumber": 3967
          },
          {
            "text": "            list_type=\"Inactive\",",
            "lineNumber": 3968
          },
          {
            "text": "        )",
            "lineNumber": 3969
          },
          {
            "lineNumber": 3970
          },
          {
            "text": "    def on_inactive_mods_search_data_source_filter(self) -&gt; None:",
            "lineNumber": 3971
          },
          {
            "text": "        self.signal_search_source_filter(list_type=\"Inactive\")",
            "lineNumber": 3972
          },
          {
            "lineNumber": 3973
          },
          {
            "text": "    def on_inactive_mods_search_data_source_filter_type(self) -&gt; None:",
            "lineNumber": 3974
          },
          {
            "text": "        self.apply_mods_filter_type(list_type=\"Inactive\")",
            "lineNumber": 3975
          },
          {
            "lineNumber": 3976
          },
          {
            "text": "    def on_inactive_mods_mode_filter_toggle(self) -&gt; None:",
            "lineNumber": 3977
          },
          {
            "text": "        self.signal_search_mode_filter(list_type=\"Inactive\")",
            "lineNumber": 3978
          },
          {
            "lineNumber": 3979
          },
          {
            "text": "    def on_mod_created(self, uuid: str) -&gt; None:",
            "lineNumber": 3980
          },
          {
            "text": "        self.inactive_mods_list.append_new_item(uuid)",
            "lineNumber": 3981
          },
          {
            "lineNumber": 3982
          },
          {
            "text": "    def apply_mods_filter_type(self, list_type: str) -&gt; None:",
            "lineNumber": 3983
          },
          {
            "text": "        # Define the mod types",
            "lineNumber": 3984
          },
          {
            "text": "        ",
            "lineNumber": 3985
          }
        ]
      },
      "score": 0.42934730648994446
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "lineNumber": 2169
          },
          {
            "lineNumber": 2170
          },
          {
            "text": "    def SaveUserCustomColors(self, color_dlg: QColorDialog) -&gt; None:",
            "lineNumber": 2171
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2172
          },
          {
            "text": "        Saves the user's custom colors from the QColorDialog to settings.json as list of hex strings.",
            "lineNumber": 2173
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2174
          },
          {
            "text": "        settings = self.settings_controller.settings",
            "lineNumber": 2175
          },
          {
            "text": "        colors = []",
            "lineNumber": 2176
          },
          {
            "text": "        for i in range(16):",
            "lineNumber": 2177
          },
          {
            "text": "            color = color_dlg.customColor(i)",
            "lineNumber": 2178
          },
          {
            "text": "            colors.append(color.name())  # Store as hex string",
            "lineNumber": 2179
          },
          {
            "text": "        settings.color_picker_custom_colors = colors",
            "lineNumber": 2180
          },
          {
            "text": "        settings.save()",
            "lineNumber": 2181
          },
          {
            "lineNumber": 2182
          },
          {
            "text": "    def append_new_item(self, uuid: str) -&gt; None:",
            "lineNumber": 2183
          },
          {
            "text": "        mod_path = self.metadata_manager.internal_local_metadata[uuid][\"path\"]",
            "lineNumber": 2184
          },
          {
            "text": "        aux_metadata_controller = AuxMetadataController.get_or_create_cached_instance(",
            "lineNumber": 2185
          },
          {
            "text": "            self.settings_controller.settings.aux_db_path",
            "lineNumber": 2186
          },
          {
            "text": "        )",
            "lineNumber": 2187
          },
          {
            "text": "        with aux_metadata_controller.Session() as aux_metadata_session:",
            "lineNumber": 2188
          },
          {
            "text": "            aux_metadata_controller.get_or_create(aux_metadata_session, mod_path)",
            "lineNumber": 2189
          },
          {
            "text": "            aux_metadata_controller.update(",
            "lineNumber": 2190
          },
          {
            "text": "                aux_metadata_session, mod_path, outdated=False",
            "lineNumber": 2191
          },
          {
            "text": "            )",
            "lineNumber": 2192
          },
          {
            "text": "            data = CustomListWidgetItemMetadata(",
            "lineNumber": 2193
          },
          {
            "text": "                uuid=uuid,",
            "lineNumber": 2194
          },
          {
            "text": "                list_type=self.list_type,",
            "lineNumber": 2195
          },
          {
            "text": "                aux_metadata_controller=aux_metadata_controller,",
            "lineNumber": 2196
          },
          {
            "text": "                aux_metadata_session=aux_metadata_session,",
            "lineNumber": 2197
          },
          {
            "text": "                settings_controller=self.settings_controller,",
            "lineNumber": 2198
          },
          {
            "text": "            )",
            "lineNumber": 2199
          },
          {
            "text": "        item = CustomListWidgetItem(self)",
            "lineNumber": 2200
          },
          {
            "text": "        item.setData(Qt.ItemDataRole.UserRole, data)",
            "lineNumber": 2201
          },
          {
            "text": "        self.addItem(item)",
            "lineNumber": 2202
          },
          {
            "text": "        self.uuids.append(uuid)  # Append for new item",
            "lineNumber": 2203
          },
          {
            "lineNumber": 2204
          },
          {
            "text": "    def get_all_mod_list_items(self) -&gt; list[CustomListWidgetItem]:",
            "lineNumber": 2205
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2206
          },
          {
            "text": "        This gets all modlist items.",
            "lineNumber": 2207
          },
          {
            "lineNumber": 2208
          },
          {
            "text": "        :return: List of all modlist items as CustomListWidgetItem",
            "lineNumber": 2209
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2210
          },
          {
            "text": "        mod_list_items = []",
            "lineNumber": 2211
          },
          {
            "text": "        for index in range(self.count()):",
            "lineNumber": 2212
          },
          {
            "text": "            item = self.item(index)",
            "lineNumber": 2213
          },
          {
            "text": "            mod_list_items.append(item)",
            "lineNumber": 2214
          },
          {
            "text": "        return mod_list_items",
            "lineNumber": 2215
          },
          {
            "lineNumber": 2216
          },
          {
            "text": "    def get_all_loaded_mod_list_items(self) -&gt; list[ModListItemInner]:",
            "lineNumber": 2217
          },
          {
            "text": "        ",
            "lineNumber": 2218
          }
        ]
      },
      "score": 0.428098201751709
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\main_content_panel.py",
        "range": {
          "startPosition": {
            "line": 94
          },
          "endPosition": {
            "line": 3647
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 95,
                "column": 1
              },
              "endPosition": {
                "line": 96,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 829,
                "column": 5
              },
              "endPosition": {
                "line": 830,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainContent(QObject):",
            "lineNumber": 95,
            "isSignature": true
          },
          {
            "text": "def _do_clear(self) -&gt; None:",
            "lineNumber": 903
          },
          {
            "lineNumber": 927
          },
          {
            "text": "        ]",
            "lineNumber": 928
          },
          {
            "text": "        # If user wants Clear to also move DLC, only keep the base game in Active",
            "lineNumber": 929
          },
          {
            "text": "        if self.settings_controller.settings.clear_moves_dlc and package_id_order:",
            "lineNumber": 930
          },
          {
            "text": "            package_ids_to_keep_active = [package_id_order[0]]  # Base game only",
            "lineNumber": 931
          },
          {
            "text": "        else:",
            "lineNumber": 932
          },
          {
            "text": "            package_ids_to_keep_active = package_id_order",
            "lineNumber": 933
          },
          {
            "text": "        # Create a set of all package IDs from mod_data",
            "lineNumber": 934
          },
          {
            "text": "        package_ids_set = set(",
            "lineNumber": 935
          },
          {
            "text": "            mod_data[\"packageid\"]",
            "lineNumber": 936
          },
          {
            "text": "            for mod_data in self.metadata_manager.internal_local_metadata.values()",
            "lineNumber": 937
          },
          {
            "text": "        )",
            "lineNumber": 938
          },
          {
            "text": "        # Iterate over the package IDs we want to keep active",
            "lineNumber": 939
          },
          {
            "text": "        for package_id in package_ids_to_keep_active:",
            "lineNumber": 940
          },
          {
            "text": "            if package_id in package_ids_set:",
            "lineNumber": 941
          },
          {
            "text": "                # Append the UUIDs to active_mods_uuids if the package ID exists in mod_data",
            "lineNumber": 942
          },
          {
            "text": "                active_mods_uuids.extend(",
            "lineNumber": 943
          },
          {
            "text": "                    uuid",
            "lineNumber": 944
          },
          {
            "text": "                    for uuid, mod_data in self.metadata_manager.internal_local_metadata.items()",
            "lineNumber": 945
          },
          {
            "text": "                    if mod_data[\"data_source\"] == \"expansion\"",
            "lineNumber": 946
          },
          {
            "text": "                    and mod_data[\"packageid\"] == package_id",
            "lineNumber": 947
          },
          {
            "text": "                )",
            "lineNumber": 948
          },
          {
            "text": "        # Append the remaining UUIDs to inactive_mods_uuids",
            "lineNumber": 949
          },
          {
            "text": "        inactive_mods_uuids.extend(",
            "lineNumber": 950
          },
          {
            "text": "            uuid",
            "lineNumber": 951
          },
          {
            "text": "            for uuid in self.metadata_manager.internal_local_metadata.keys()",
            "lineNumber": 952
          },
          {
            "text": "            if uuid not in active_mods_uuids",
            "lineNumber": 953
          },
          {
            "text": "        )",
            "lineNumber": 954
          },
          {
            "text": "        # Disable widgets while inserting",
            "lineNumber": 955
          },
          {
            "text": "        self.disable_enable_widgets_signal.emit(False)",
            "lineNumber": 956
          },
          {
            "text": "        # Insert data into lists",
            "lineNumber": 957
          },
          {
            "text": "        self._insert_data_into_lists(active_mods_uuids, inactive_mods_uuids)",
            "lineNumber": 958
          },
          {
            "text": "        # Re-enable widgets after inserting",
            "lineNumber": 959
          },
          {
            "text": "        self.disable_enable_widgets_signal.emit(True)",
            "lineNumber": 960
          },
          {
            "lineNumber": 961
          },
          {
            "text": "    def _do_sort(self, check_deps: bool = True) -&gt; None:",
            "lineNumber": 962
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 963
          }
        ]
      },
      "score": 0.4251616895198822
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "lineNumber": 2261
          },
          {
            "lineNumber": 2262
          },
          {
            "text": "    def check_item_visible(self, item: CustomListWidgetItem) -&gt; bool:",
            "lineNumber": 2263
          },
          {
            "text": "        # Determines if the item is currently visible in the viewport.",
            "lineNumber": 2264
          },
          {
            "text": "        rect = self.visualItemRect(item)",
            "lineNumber": 2265
          },
          {
            "text": "        return rect.top() &lt; self.viewport().height() and rect.bottom() &gt; 0",
            "lineNumber": 2266
          },
          {
            "lineNumber": 2267
          },
          {
            "text": "    def create_widget_for_item(self, item: CustomListWidgetItem) -&gt; None:",
            "lineNumber": 2268
          },
          {
            "text": "        data = item.data(Qt.ItemDataRole.UserRole)",
            "lineNumber": 2269
          },
          {
            "text": "        if data is None:",
            "lineNumber": 2270
          },
          {
            "text": "            logger.debug(\"Attempted to create widget for item with None data\")",
            "lineNumber": 2271
          },
          {
            "text": "            return",
            "lineNumber": 2272
          },
          {
            "text": "        errors_warnings = data[\"errors_warnings\"]",
            "lineNumber": 2273
          },
          {
            "text": "        errors = data[\"errors\"]",
            "lineNumber": 2274
          },
          {
            "text": "        warnings = data[\"warnings\"]",
            "lineNumber": 2275
          },
          {
            "text": "        filtered = data[\"filtered\"]",
            "lineNumber": 2276
          },
          {
            "text": "        invalid = data[\"invalid\"]",
            "lineNumber": 2277
          },
          {
            "text": "        mismatch = data[\"mismatch\"]",
            "lineNumber": 2278
          },
          {
            "text": "        alternative = data[\"alternative\"]",
            "lineNumber": 2279
          },
          {
            "text": "        uuid = data[\"uuid\"]",
            "lineNumber": 2280
          },
          {
            "text": "        mod_color = data[\"mod_color\"]",
            "lineNumber": 2281
          },
          {
            "text": "        if uuid:",
            "lineNumber": 2282
          },
          {
            "text": "            widget = ModListItemInner(",
            "lineNumber": 2283
          },
          {
            "text": "                errors_warnings=errors_warnings,",
            "lineNumber": 2284
          },
          {
            "text": "                errors=errors,",
            "lineNumber": 2285
          },
          {
            "text": "                warnings=warnings,",
            "lineNumber": 2286
          },
          {
            "text": "                filtered=filtered,",
            "lineNumber": 2287
          },
          {
            "text": "                invalid=invalid,",
            "lineNumber": 2288
          },
          {
            "text": "                mismatch=mismatch,",
            "lineNumber": 2289
          },
          {
            "text": "                alternative=alternative,",
            "lineNumber": 2290
          },
          {
            "text": "                settings_controller=self.settings_controller,",
            "lineNumber": 2291
          },
          {
            "text": "                uuid=uuid,",
            "lineNumber": 2292
          },
          {
            "text": "                mod_color=mod_color,",
            "lineNumber": 2293
          },
          {
            "text": "            )",
            "lineNumber": 2294
          },
          {
            "text": "            widget.toggle_warning_signal.connect(self.toggle_warning)",
            "lineNumber": 2295
          },
          {
            "text": "            widget.toggle_error_signal.connect(self.toggle_warning)",
            "lineNumber": 2296
          },
          {
            "text": "            item.setSizeHint(widget.sizeHint())",
            "lineNumber": 2297
          },
          {
            "text": "            self.setItemWidget(item, widget)",
            "lineNumber": 2298
          },
          {
            "text": "            ",
            "lineNumber": 2299
          },
          {
            "text": "            # Apply translation status if enabled",
            "lineNumber": 2300
          },
          {
            "text": "            if self.show_translation_status:",
            "lineNumber": 2301
          },
          {
            "text": "                pkg_id = self.metadata_manager.internal_local_metadata[uuid].get(\"packageid\")",
            "lineNumber": 2302
          },
          {
            "text": "                has_translation = pkg_id in self.translation_lookup",
            "lineNumber": 2303
          },
          {
            "text": "                widget.update_translation_status(has_translation)",
            "lineNumber": 2304
          },
          {
            "lineNumber": 2305
          },
          {
            "text": "            # Ensure initial icon states reflect current item data",
            "lineNumber": 2306
          },
          {
            "text": "            widget.repolish(item)",
            "lineNumber": 2307
          },
          {
            "lineNumber": 2308
          },
          {
            "text": "    def check_widgets_visible(self) -&gt; None:",
            "lineNumber": 2309
          },
          {
            "text": "        # This function checks the visibility of each item and creates a widget if the item is visible and not already setup.",
            "lineNumber": 2310
          },
          {
            "text": "        ",
            "lineNumber": 2311
          }
        ]
      },
      "score": 0.41826093196868896
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "lineNumber": 812
          },
          {
            "lineNumber": 813
          },
          {
            "text": "    def __init__(self, list_type: str, settings_controller: SettingsController) -&gt; None:",
            "lineNumber": 814
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 815
          },
          {
            "text": "        Initialize the ListWidget with a dict of mods.",
            "lineNumber": 816
          },
          {
            "text": "        Keys are the package ids and values are a dict of",
            "lineNumber": 817
          },
          {
            "text": "        mod attributes. See tags:",
            "lineNumber": 818
          },
          {
            "text": "        https://rimworldwiki.com/wiki/About.xml",
            "lineNumber": 819
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 820
          },
          {
            "text": "        logger.debug(\"Initializing ModListWidget\")",
            "lineNumber": 821
          },
          {
            "lineNumber": 822
          },
          {
            "text": "        # Cache list_type for later use",
            "lineNumber": 823
          },
          {
            "text": "        self.list_type = list_type",
            "lineNumber": 824
          },
          {
            "lineNumber": 825
          },
          {
            "text": "        # Cache MetadataManager instance",
            "lineNumber": 826
          },
          {
            "text": "        self.metadata_manager = MetadataManager.instance()",
            "lineNumber": 827
          },
          {
            "lineNumber": 828
          },
          {
            "text": "        self.settings_controller = settings_controller",
            "lineNumber": 829
          },
          {
            "lineNumber": 830
          },
          {
            "text": "        super(ModListWidget, self).__init__()",
            "lineNumber": 831
          },
          {
            "lineNumber": 832
          },
          {
            "text": "        # Track when a custom widget (ModListItemInner) is selected/not selected",
            "lineNumber": 833
          },
          {
            "text": "        self.selectionModel().selectionChanged.connect(self.on_selection_changed)",
            "lineNumber": 834
          },
          {
            "lineNumber": 835
          },
          {
            "text": "        # Allow for dragging and dropping between lists",
            "lineNumber": 836
          },
          {
            "text": "        self.setDefaultDropAction(Qt.DropAction.MoveAction)",
            "lineNumber": 837
          },
          {
            "text": "        self.setDragDropMode(QAbstractItemView.DragDropMode.DragDrop)",
            "lineNumber": 838
          },
          {
            "lineNumber": 839
          },
          {
            "text": "        # Allow for selecting and moving multiple items",
            "lineNumber": 840
          },
          {
            "text": "        self.setSelectionMode(QAbstractItemView.SelectionMode.ExtendedSelection)",
            "lineNumber": 841
          },
          {
            "lineNumber": 842
          },
          {
            "text": "        # When an item is clicked, display the mod information",
            "lineNumber": 843
          },
          {
            "text": "        self.currentItemChanged.connect(self.mod_changed_to)",
            "lineNumber": 844
          },
          {
            "text": "        self.itemClicked.connect(self.mod_clicked)",
            "lineNumber": 845
          },
          {
            "lineNumber": 846
          },
          {
            "text": "        # When an item is double clicked, move it to the opposite list",
            "lineNumber": 847
          },
          {
            "text": "        self.itemDoubleClicked.connect(self.mod_double_clicked)",
            "lineNumber": 848
          },
          {
            "lineNumber": 849
          },
          {
            "text": "        # Add an eventFilter for per mod_list_item context menu",
            "lineNumber": 850
          },
          {
            "text": "        self.installEventFilter(self)",
            "lineNumber": 851
          },
          {
            "lineNumber": 852
          },
          {
            "text": "        # Disable horizontal scroll bar",
            "lineNumber": 853
          },
          {
            "text": "        self.horizontalScrollBar().setEnabled(False)",
            "lineNumber": 854
          },
          {
            "text": "        self.horizontalScrollBar().setVisible(False)",
            "lineNumber": 855
          },
          {
            "lineNumber": 856
          },
          {
            "text": "        # Optimizes performance",
            "lineNumber": 857
          },
          {
            "text": "        # self.setUniformItemSizes(True)",
            "lineNumber": 858
          },
          {
            "lineNumber": 859
          },
          {
            "text": "        # Slot to handle item widgets when itemChanged()",
            "lineNumber": 860
          },
          {
            "text": "        self.itemChanged.connect(self.handle_item_data_changed)",
            "lineNumber": 861
          },
          {
            "lineNumber": 862
          },
          {
            "text": "        # Allow inserting custom list items",
            "lineNumber": 863
          }
        ]
      },
      "score": 0.41805151104927063
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 814,
                "column": 5
              },
              "endPosition": {
                "line": 815,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "text": "def __init__(self, list_type: str, settings_controller: SettingsController) -&gt; None:",
            "lineNumber": 814
          },
          {
            "lineNumber": 861
          },
          {
            "lineNumber": 862
          },
          {
            "text": "        # Allow inserting custom list items",
            "lineNumber": 863
          },
          {
            "text": "        self.model().rowsInserted.connect(self.handle_rows_inserted, Qt.ConnectionType.QueuedConnection)",
            "lineNumber": 864
          },
          {
            "lineNumber": 865
          },
          {
            "text": "        # Handle removing items to update count",
            "lineNumber": 866
          },
          {
            "text": "        self.model().rowsAboutToBeRemoved.connect(self.handle_rows_removed, Qt.ConnectionType.QueuedConnection)",
            "lineNumber": 867
          },
          {
            "lineNumber": 868
          },
          {
            "text": "        # Lazy load ModListItemInner",
            "lineNumber": 869
          },
          {
            "text": "        self.verticalScrollBar().valueChanged.connect(self.check_widgets_visible)",
            "lineNumber": 870
          },
          {
            "lineNumber": 871
          },
          {
            "text": "        # This set is used to keep track of mods that have been loaded",
            "lineNumber": 872
          },
          {
            "text": "        # into widgets. Used for an optimization strategy for &#96;handle_rows_inserted&#96;",
            "lineNumber": 873
          },
          {
            "text": "        self.uuids: list[str] = []",
            "lineNumber": 874
          },
          {
            "text": "        self.ignore_warning_list: list[str] = []",
            "lineNumber": 875
          },
          {
            "text": "        # Cache of latest save package ids to check new mods",
            "lineNumber": 876
          },
          {
            "text": "        self._latest_save_package_ids: set[str] | None = None",
            "lineNumber": 877
          },
          {
            "text": "        ",
            "lineNumber": 878
          },
          {
            "text": "        # Translation status",
            "lineNumber": 879
          },
          {
            "text": "        self.show_translation_status: bool = False",
            "lineNumber": 880
          },
          {
            "text": "        self.translation_lookup: set[str] = set()",
            "lineNumber": 881
          },
          {
            "lineNumber": 882
          },
          {
            "text": "        self.deletion_sub_menu = ModDeletionMenu(",
            "lineNumber": 883
          },
          {
            "text": "            self.settings_controller,",
            "lineNumber": 884
          },
          {
            "text": "            self._get_selected_metadata,",
            "lineNumber": 885
          },
          {
            "text": "            self.uuids,",
            "lineNumber": 886
          },
          {
            "text": "        )  # TODO: should we enable items conditionally? For now use all",
            "lineNumber": 887
          },
          {
            "text": "        logger.debug(\"Finished ModListW&#96;idget initialization\")",
            "lineNumber": 888
          },
          {
            "lineNumber": 889
          },
          {
            "text": "    def on_selection_changed(",
            "lineNumber": 890
          },
          {
            "text": "        self, selected: QItemSelection, deselected: QItemSelection",
            "lineNumber": 891
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 892
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 893
          },
          {
            "text": "        Used to indicate when the custom widget is selected/not selected.",
            "lineNumber": 894
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 895
          },
          {
            "text": "        for index in selected.indexes():",
            "lineNumber": 896
          },
          {
            "text": "            item = self.item(index.row())",
            "lineNumber": 897
          },
          {
            "text": "            widget = self.itemWidget(item)",
            "lineNumber": 898
          },
          {
            "text": "            if widget:",
            "lineNumber": 899
          },
          {
            "text": "                widget.set_selected(True)  # type: ignore",
            "lineNumber": 900
          },
          {
            "lineNumber": 901
          },
          {
            "text": "        for index in deselected.indexes():",
            "lineNumber": 902
          },
          {
            "text": "            item = self.item(index.row())",
            "lineNumber": 903
          },
          {
            "text": "            widget = self.itemWidget(item)",
            "lineNumber": 904
          },
          {
            "text": "            if widget:",
            "lineNumber": 905
          },
          {
            "text": "                widget.set_selected(False)  # type: ignore",
            "lineNumber": 906
          },
          {
            "lineNumber": 907
          },
          {
            "text": "    def item(self, row: int) -&gt; CustomListWidgetItem:",
            "lineNumber": 908
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 909
          }
        ]
      },
      "score": 0.4174360930919647
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 3129
          },
          "endPosition": {
            "line": 4800
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 3130,
                "column": 1
              },
              "endPosition": {
                "line": 3131,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 3706,
                "column": 5
              },
              "endPosition": {
                "line": 3707,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 3707,
                "column": 5
              },
              "endPosition": {
                "line": 3708,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModsPanel(QWidget):",
            "lineNumber": 3130,
            "isSignature": true
          },
          {
            "text": "@Slot(dict)",
            "lineNumber": 3706
          },
          {
            "text": "def _on_folder_size_finished(self, sizes: dict[str, int]) -&gt; None:",
            "lineNumber": 3707
          },
          {
            "lineNumber": 3749
          },
          {
            "text": "                )",
            "lineNumber": 3750
          },
          {
            "text": "            )",
            "lineNumber": 3751
          },
          {
            "lineNumber": 3752
          },
          {
            "text": "            # OPTIMIZATION 1: Single DB session for all mods instead of per-mod",
            "lineNumber": 3753
          },
          {
            "text": "            with aux_metadata_controller.Session() as aux_metadata_session:",
            "lineNumber": 3754
          },
          {
            "text": "                for idx, uuid_key in enumerate(sorted_uuids, start=1):",
            "lineNumber": 3755
          },
          {
            "text": "                    list_item = CustomListWidgetItem(lw)",
            "lineNumber": 3756
          },
          {
            "text": "                    # Create metadata with aux controller to reduce lookups",
            "lineNumber": 3757
          },
          {
            "text": "                    data = CustomListWidgetItemMetadata(",
            "lineNumber": 3758
          },
          {
            "text": "                        uuid=uuid_key,",
            "lineNumber": 3759
          },
          {
            "text": "                        list_type=lw.list_type,",
            "lineNumber": 3760
          },
          {
            "text": "                        settings_controller=self.settings_controller,",
            "lineNumber": 3761
          },
          {
            "text": "                        aux_metadata_controller=aux_metadata_controller,",
            "lineNumber": 3762
          },
          {
            "text": "                        aux_metadata_session=aux_metadata_session,",
            "lineNumber": 3763
          },
          {
            "text": "                    )",
            "lineNumber": 3764
          },
          {
            "text": "                    list_item.setData(Qt.ItemDataRole.UserRole, data)",
            "lineNumber": 3765
          },
          {
            "text": "                    lw.addItem(list_item)",
            "lineNumber": 3766
          },
          {
            "text": "                    if (",
            "lineNumber": 3767
          },
          {
            "text": "                        hasattr(self, \"_size_progress_dialog\")",
            "lineNumber": 3768
          },
          {
            "text": "                        and self._size_progress_dialog",
            "lineNumber": 3769
          },
          {
            "text": "                    ):",
            "lineNumber": 3770
          },
          {
            "text": "                        self._size_progress_dialog.setValue(idx)",
            "lineNumber": 3771
          },
          {
            "text": "            lw.uuids = sorted_uuids",
            "lineNumber": 3772
          },
          {
            "lineNumber": 3773
          },
          {
            "text": "            # Reconnect model signals",
            "lineNumber": 3774
          },
          {
            "text": "            lw.model().rowsInserted.connect(",
            "lineNumber": 3775
          },
          {
            "text": "                lw.handle_rows_inserted, Qt.ConnectionType.QueuedConnection",
            "lineNumber": 3776
          },
          {
            "text": "            )",
            "lineNumber": 3777
          },
          {
            "text": "            lw.model().rowsAboutToBeRemoved.connect(",
            "lineNumber": 3778
          },
          {
            "text": "                lw.handle_rows_removed, Qt.ConnectionType.QueuedConnection",
            "lineNumber": 3779
          },
          {
            "text": "            )",
            "lineNumber": 3780
          },
          {
            "text": "            lw.setUpdatesEnabled(True)",
            "lineNumber": 3781
          },
          {
            "text": "            lw.repaint()",
            "lineNumber": 3782
          },
          {
            "text": "            # Load visible widgets after rebuild completes",
            "lineNumber": 3783
          },
          {
            "text": "            lw.check_widgets_visible()",
            "lineNumber": 3784
          },
          {
            "text": "            # Emit signal to update counts and errors/warnings",
            "lineNumber": 3785
          },
          {
            "text": "            lw.list_update_signal.emit(str(lw.count()))",
            "lineNumber": 3786
          },
          {
            "text": "        finally:",
            "lineNumber": 3787
          },
          {
            "text": "            if hasattr(self, \"_size_progress_dialog\") and",
            "lineNumber": 3788
          }
        ]
      },
      "score": 0.41051390767097473
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\main_content_panel.py",
        "range": {
          "startPosition": {
            "line": 94
          },
          "endPosition": {
            "line": 3647
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 95,
                "column": 1
              },
              "endPosition": {
                "line": 96,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 115,
                "column": 5
              },
              "endPosition": {
                "line": 116,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainContent(QObject):",
            "lineNumber": 95,
            "isSignature": true
          },
          {
            "text": "def __init__(self, settings_controller: SettingsController) -&gt; None:",
            "lineNumber": 115
          },
          {
            "lineNumber": 288
          },
          {
            "text": "            self.mods_panel.active_mods_list.key_press_signal.connect(",
            "lineNumber": 289
          },
          {
            "text": "                self.__handle_active_mod_key_press",
            "lineNumber": 290
          },
          {
            "text": "            )",
            "lineNumber": 291
          },
          {
            "text": "            self.mods_panel.inactive_mods_list.key_press_signal.connect(",
            "lineNumber": 292
          },
          {
            "text": "                self.__handle_inactive_mod_key_press",
            "lineNumber": 293
          },
          {
            "text": "            )",
            "lineNumber": 294
          },
          {
            "text": "            self.mods_panel.active_mods_list.mod_info_signal.connect(",
            "lineNumber": 295
          },
          {
            "text": "                self.__mod_list_slot",
            "lineNumber": 296
          },
          {
            "text": "            )",
            "lineNumber": 297
          },
          {
            "text": "            self.mods_panel.inactive_mods_list.mod_info_signal.connect(",
            "lineNumber": 298
          },
          {
            "text": "                self.__mod_list_slot",
            "lineNumber": 299
          },
          {
            "text": "            )",
            "lineNumber": 300
          },
          {
            "text": "            self.mods_panel.active_mods_list.item_added_signal.connect(",
            "lineNumber": 301
          },
          {
            "text": "                self.mods_panel.inactive_mods_list.handle_other_list_row_added",
            "lineNumber": 302
          },
          {
            "text": "            )",
            "lineNumber": 303
          },
          {
            "text": "            self.mods_panel.inactive_mods_list.item_added_signal.connect(",
            "lineNumber": 304
          },
          {
            "text": "                self.mods_panel.active_mods_list.handle_other_list_row_added",
            "lineNumber": 305
          },
          {
            "text": "            )",
            "lineNumber": 306
          },
          {
            "text": "            self.mods_panel.active_mods_list.edit_rules_signal.connect(",
            "lineNumber": 307
          },
          {
            "text": "                self._do_open_rule_editor",
            "lineNumber": 308
          },
          {
            "text": "            )",
            "lineNumber": 309
          },
          {
            "text": "            self.mods_panel.inactive_mods_list.edit_rules_signal.connect(",
            "lineNumber": 310
          },
          {
            "text": "                self._do_open_rule_editor",
            "lineNumber": 311
          },
          {
            "text": "            )",
            "lineNumber": 312
          },
          {
            "text": "            self.mods_panel.active_mods_list.steamdb_blacklist_signal.connect(",
            "lineNumber": 313
          },
          {
            "text": "                self._do_blacklist_action_steamdb",
            "lineNumber": 314
          },
          {
            "text": "            )",
            "lineNumber": 315
          },
          {
            "text": "            self.mods_panel.inactive_mods_list.steamdb_blacklist_signal.connect(",
            "lineNumber": 316
          },
          {
            "text": "                self._do_blacklist_action_steamdb",
            "lineNumber": 317
          },
          {
            "text": "            )",
            "lineNumber": 318
          },
          {
            "text": "            self.mods_panel.active_mods_list.refresh_signal.connect(self._do_refresh)",
            "lineNumber": 319
          },
          {
            "text": "            self.mods_panel.inactive_mods_list.refresh_signal.connect(self._do_refresh)",
            "lineNumber": 320
          },
          {
            "lineNumber": 321
          },
          {
            "text": "            EventBus().use_this_instead_clicked.connect(self._use_this_instead_clicked)",
            "lineNumber": 322
          },
          {
            "lineNumber": 323
          },
          {
            "text": "            EventBus().do_threaded_loading_animation.connect(",
            "lineNumber": 324
          },
          {
            "text": "                self.do_threaded_loading_animation",
            "lineNumber": 325
          },
          {
            "text": "            )",
            "lineNumber": 326
          },
          {
            "lineNumber": 327
          },
          {
            "text": "            EventBus().do_metadata_refresh_cache.connect(self.do_metadata_refresh_cache)",
            "lineNumber": 328
          },
          {
            "lineNumber": 329
          },
          {
            "text": "            # Restore cache initially set to empty",
            "lineNumber": 330
          },
          {
            "text": "            self.active_mods_uuids_last_save: list[str] = []",
            "lineNumber": 331
          },
          {
            "text": "            self.active_mods_uuids_restore_state: list[str] = []",
            "lineNumber": 332
          },
          {
            "text": "            self.inactive_mods_uuids_restore_state: list[str] = []",
            "lineNumber": 333
          }
        ]
      },
      "score": 0.40706899762153625
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\windows\\base_mods_panel.py",
        "range": {
          "startPosition": {
            "line": 125
          },
          "endPosition": {
            "line": 1412
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 126,
                "column": 1
              },
              "endPosition": {
                "line": 127,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class BaseModsPanel(QWidget):",
            "lineNumber": 126,
            "isSignature": true
          },
          {
            "text": "def _add_combo_box_to_row(",
            "lineNumber": 1096
          },
          {
            "text": "        self,",
            "lineNumber": 1097
          },
          {
            "text": "        row_items: list[QStandardItem],",
            "lineNumber": 1098
          },
          {
            "text": "        combo_column: int,",
            "lineNumber": 1099
          },
          {
            "text": "        items: list[str] | None = None,",
            "lineNumber": 1100
          },
          {
            "text": "    ) -&gt; QComboBox:",
            "lineNumber": 1101
          },
          {
            "lineNumber": 1119
          },
          {
            "text": "        return combo_box",
            "lineNumber": 1120
          },
          {
            "lineNumber": 1121
          },
          {
            "text": "    # ===== NEW HELPER METHODS FOR REFACTORING =====",
            "lineNumber": 1122
          },
          {
            "lineNumber": 1123
          },
          {
            "text": "    def _add_mod_row(",
            "lineNumber": 1124
          },
          {
            "text": "        self,",
            "lineNumber": 1125
          },
          {
            "text": "        mod_info: \"ModInfo\",",
            "lineNumber": 1126
          },
          {
            "text": "        additional_items: list[QStandardItem] | None = None,",
            "lineNumber": 1127
          },
          {
            "text": "        default_checkbox_state: bool = False,",
            "lineNumber": 1128
          },
          {
            "text": "    ) -&gt; None:",
            "lineNumber": 1129
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 1130
          },
          {
            "text": "        Standardized method to add a mod row to the table.",
            "lineNumber": 1131
          },
          {
            "lineNumber": 1132
          },
          {
            "text": "        Args:",
            "lineNumber": 1133
          },
          {
            "text": "            mod_info: ModInfo object containing mod data",
            "lineNumber": 1134
          },
          {
            "text": "            additional_items: Optional additional QStandardItem objects for extra columns",
            "lineNumber": 1135
          },
          {
            "text": "            default_checkbox_state: Default state for the checkbox",
            "lineNumber": 1136
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 1137
          },
          {
            "text": "        # Base columns that all panels use",
            "lineNumber": 1138
          },
          {
            "text": "        base_items = [",
            "lineNumber": 1139
          },
          {
            "text": "            QStandardItem(mod_info.name),",
            "lineNumber": 1140
          },
          {
            "text": "            QStandardItem(mod_info.authors),",
            "lineNumber": 1141
          },
          {
            "text": "            QStandardItem(mod_info.packageid),",
            "lineNumber": 1142
          },
          {
            "text": "            QStandardItem(mod_info.published_file_id),",
            "lineNumber": 1143
          },
          {
            "text": "            QStandardItem(mod_info.supported_versions),",
            "lineNumber": 1144
          },
          {
            "text": "            QStandardItem(mod_info.downloaded_time),",
            "lineNumber": 1145
          },
          {
            "text": "            QStandardItem(mod_info.updated_on_workshop),",
            "lineNumber": 1146
          },
          {
            "text": "            QStandardItem(mod_info.source),",
            "lineNumber": 1147
          },
          {
            "text": "            QStandardItem(\"\"),  # Path will be displayed via widget",
            "lineNumber": 1148
          },
          {
            "text": "        ]",
            "lineNumber": 1149
          },
          {
            "lineNumber": 1150
          },
          {
            "text": "        # Add workshop page column",
            "lineNumber": 1151
          },
          {
            "text": "        workshop_item = QStandardItem()",
            "lineNumber": 1152
          },
          {
            "text": "        base_items.append(workshop_item)",
            "lineNumber": 1153
          },
          {
            "lineNumber": 1154
          },
          {
            "text": "        # Add any additional columns specific to the panel",
            "lineNumber": 1155
          },
          {
            "text": "        if additional_items:",
            "lineNumber": 1156
          },
          {
            "text": "            base_items.extend(additional_items)",
            "lineNumber": 1157
          },
          {
            "lineNumber": 1158
          },
          {
            "text": "        # Set UUID data on name item for metadata lookup",
            "lineNumber": 1159
          },
          {
            "text": "        if mod_info.uuid:",
            "lineNumber": 1160
          },
          {
            "text": "            base_items[0].setData(mod_info.uuid, Qt.ItemDataRole.UserRole)",
            "lineNumber": 1161
          },
          {
            "lineNumber": 1162
          },
          {
            "text": "        self._add_row(base_items, default_checkbox_state)",
            "lineNumber": 1163
          },
          {
            "lineNumber": 1164
          },
          {
            "text": "        # Add path link to the path column (index 9) only if path exists and row is not blank",
            "lineNumber": 1165
          },
          {
            "text": "        if mod_info.path and mod_info.path.strip():",
            "lineNumber": 1166
          },
          {
            "text": "            path_link = self._create_path_link(mod_info.path, \"pathLink\")",
            "lineNumber": 1167
          },
          {
            "text": "            self.editor_table_view.setIndexWidget(base_items[8].index(), path_link)",
            "lineNumber": 1168
          },
          {
            "lineNumber": 1169
          },
          {
            "text": "        # Add workshop button to the workshop column only if published_file_id exists",
            "lineNumber": 1170
          }
        ]
      },
      "score": 0.4016948342323303
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 779,
            "column": 30
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {},
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 784
          },
          {
            "text": "    Subclass for QListWidget. Used to store lists for",
            "lineNumber": 785
          },
          {
            "text": "    active and inactive mods. Mods can be rearranged within",
            "lineNumber": 786
          },
          {
            "text": "    their own lists or moved from one list to another.",
            "lineNumber": 787
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 788
          },
          {
            "lineNumber": 789
          },
          {
            "text": "    SORT_TEXT_TO_KEY_MAP = {",
            "lineNumber": 790
          },
          {
            "text": "        \"Name\": ModsPanelSortKey.MODNAME,",
            "lineNumber": 791
          },
          {
            "text": "        \"Author\": ModsPanelSortKey.AUTHOR,",
            "lineNumber": 792
          },
          {
            "text": "        \"Modified Time\": ModsPanelSortKey.FILESYSTEM_MODIFIED_TIME,",
            "lineNumber": 793
          },
          {
            "text": "        \"Folder Size\": ModsPanelSortKey.FOLDER_SIZE,",
            "lineNumber": 794
          },
          {
            "text": "        \"Version\": ModsPanelSortKey.VERSION,",
            "lineNumber": 795
          },
          {
            "text": "        \"PackageId\": ModsPanelSortKey.PACKAGEID,",
            "lineNumber": 796
          },
          {
            "text": "        \"Color\": ModsPanelSortKey.MOD_COLOR,",
            "lineNumber": 797
          },
          {
            "text": "    }",
            "lineNumber": 798
          },
          {
            "lineNumber": 799
          },
          {
            "text": "    @staticmethod",
            "lineNumber": 800
          },
          {
            "text": "    def _text_to_sort_key(text: str) -&gt; ModsPanelSortKey:",
            "lineNumber": 801
          },
          {
            "text": "        return ModListWidget.SORT_TEXT_TO_KEY_MAP.get(text, ModsPanelSortKey.MODNAME)",
            "lineNumber": 802
          },
          {
            "lineNumber": 803
          },
          {
            "text": "    edit_rules_signal = Signal(bool, str, str)",
            "lineNumber": 804
          },
          {
            "text": "    item_added_signal = Signal(str)",
            "lineNumber": 805
          },
          {
            "text": "    key_press_signal = Signal(str)",
            "lineNumber": 806
          },
          {
            "text": "    list_update_signal = Signal(str)",
            "lineNumber": 807
          },
          {
            "text": "    mod_info_signal = Signal(str, CustomListWidgetItem)",
            "lineNumber": 808
          },
          {
            "text": "    recalculate_warnings_signal = Signal()",
            "lineNumber": 809
          },
          {
            "text": "    refresh_signal = Signal()",
            "lineNumber": 810
          },
          {
            "text": "    update_git_mods_signal = Signal(list)",
            "lineNumber": 811
          },
          {
            "text": "    steamdb_blacklist_signal = Signal(list)",
            "lineNumber": 812
          },
          {
            "lineNumber": 813
          },
          {
            "text": "    def __init__(self, list_type: str, settings_controller: SettingsController) -&gt; None:",
            "lineNumber": 814
          },
          {
            "text": "        ",
            "lineNumber": 815
          }
        ]
      },
      "score": 0.3979189395904541
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\main_content_panel.py",
        "range": {
          "startPosition": {
            "line": 94
          },
          "endPosition": {
            "line": 3647
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 95,
                "column": 1
              },
              "endPosition": {
                "line": 96,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class MainContent(QObject):",
            "lineNumber": 95,
            "isSignature": true
          },
          {
            "text": "def _open_in_default_editor(self, path: Path | None) -&gt; None:",
            "lineNumber": 1830
          },
          {
            "lineNumber": 1843
          },
          {
            "text": "                ),",
            "lineNumber": 1844
          },
          {
            "text": "            )",
            "lineNumber": 1845
          },
          {
            "lineNumber": 1846
          },
          {
            "text": "    def _do_save(self) -&gt; None:",
            "lineNumber": 1847
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 1848
          },
          {
            "text": "        Method to save the current list of active mods to the selected ModsConfig.xml",
            "lineNumber": 1849
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 1850
          },
          {
            "text": "        logger.info(\"Saving current active mods to ModsConfig.xml\")",
            "lineNumber": 1851
          },
          {
            "text": "        active_mods = []",
            "lineNumber": 1852
          },
          {
            "text": "        for uuid in self.mods_panel.active_mods_list.uuids:",
            "lineNumber": 1853
          },
          {
            "text": "            package_id = self.metadata_manager.internal_local_metadata[uuid][",
            "lineNumber": 1854
          },
          {
            "text": "                \"packageid\"",
            "lineNumber": 1855
          },
          {
            "text": "            ]",
            "lineNumber": 1856
          },
          {
            "text": "            if package_id in active_mods:  # This should NOT be happening",
            "lineNumber": 1857
          },
          {
            "text": "                logger.critical(",
            "lineNumber": 1858
          },
          {
            "text": "                    f\"Tried to export more than 1 identical package ids to the same mod list. Skipping duplicate {package_id}\"",
            "lineNumber": 1859
          },
          {
            "text": "                )",
            "lineNumber": 1860
          },
          {
            "text": "                continue",
            "lineNumber": 1861
          },
          {
            "text": "            else:  # Otherwise, proceed with adding the mod package_id",
            "lineNumber": 1862
          },
          {
            "text": "                if (",
            "lineNumber": 1863
          },
          {
            "text": "                    package_id in self.duplicate_mods.keys()",
            "lineNumber": 1864
          },
          {
            "text": "                ):  # Check if mod has duplicates",
            "lineNumber": 1865
          },
          {
            "text": "                    if (",
            "lineNumber": 1866
          },
          {
            "text": "                        self.metadata_manager.internal_local_metadata[uuid][",
            "lineNumber": 1867
          },
          {
            "text": "                            \"data_source\"",
            "lineNumber": 1868
          },
          {
            "text": "                        ]",
            "lineNumber": 1869
          },
          {
            "text": "                        == \"workshop\"",
            "lineNumber": 1870
          },
          {
            "text": "                    ):",
            "lineNumber": 1871
          },
          {
            "text": "                        active_mods.append(package_id + \"_steam\")",
            "lineNumber": 1872
          },
          {
            "text": "                        continue  # Append &#96;_steam&#96; suffix if Steam mod, continue to next mod",
            "lineNumber": 1873
          },
          {
            "text": "                active_mods.append(package_id)",
            "lineNumber": 1874
          },
          {
            "text": "        active_mods_uuids, inactive_mods_uuids, _, _ = metadata.get_mods_from_list(",
            "lineNumber": 1875
          },
          {
            "text": "            mod_list=active_mods",
            "lineNumber": 1876
          },
          {
            "text": "        )",
            "lineNumber": 1877
          },
          {
            "text": "        self.active_mods_uuids_last_save = active_mods_uuids",
            "lineNumber": 1878
          },
          {
            "text": "        logger.info(f\"Collected {len(active_mods)} active mods for saving\")",
            "lineNumber": 1879
          },
          {
            "lineNumber": 1880
          },
          {
            "text": "        mods_config_data = generate_rimworld_mods_list(",
            "lineNumber": 1881
          },
          {
            "text": "            self.metadata_manager.game_version, active_mods",
            "lineNumber": 1882
          },
          {
            "text": "        )",
            "lineNumber": 1883
          },
          {
            "text": "        mods_config_path = str(",
            "lineNumber": 1884
          },
          {
            "text": "            Path",
            "lineNumber": 1885
          }
        ]
      },
      "score": 0.39348673820495605
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\views\\mods_panel.py",
        "range": {
          "startPosition": {
            "line": 782
          },
          "endPosition": {
            "line": 3126
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 783,
                "column": 1
              },
              "endPosition": {
                "line": 784,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ModListWidget(QListWidget):",
            "lineNumber": 783,
            "isSignature": true
          },
          {
            "lineNumber": 2463
          },
          {
            "lineNumber": 2464
          },
          {
            "text": "    def mod_clicked(self, current: CustomListWidgetItem) -&gt; None:",
            "lineNumber": 2465
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2466
          },
          {
            "text": "        Method to handle clicking on a row. Necessary because &#96;mod_changed_to&#96; does not",
            "lineNumber": 2467
          },
          {
            "text": "        properly handle clicking on a previous selected item after clicking on an item",
            "lineNumber": 2468
          },
          {
            "text": "        in another list. For example, clicking on item 1 in the inactive list, then on item 2",
            "lineNumber": 2469
          },
          {
            "text": "        in the active list, then back to item 1 in the inactive list-- this method makes",
            "lineNumber": 2470
          },
          {
            "text": "        it so that mod info is updated as expected.",
            "lineNumber": 2471
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2472
          },
          {
            "text": "        if current is not None:",
            "lineNumber": 2473
          },
          {
            "text": "            data = current.data(Qt.ItemDataRole.UserRole)",
            "lineNumber": 2474
          },
          {
            "text": "            self.mod_info_signal.emit(data[\"uuid\"], current)",
            "lineNumber": 2475
          },
          {
            "text": "            mod_info = self.metadata_manager.internal_local_metadata[data[\"uuid\"]]",
            "lineNumber": 2476
          },
          {
            "text": "            mod_info = flatten_to_list(mod_info)",
            "lineNumber": 2477
          },
          {
            "text": "            mod_info_pretty = json.dumps(mod_info, indent=4)",
            "lineNumber": 2478
          },
          {
            "text": "            logger.debug(",
            "lineNumber": 2479
          },
          {
            "text": "                f\"USER ACTION: mod was clicked: [{data['uuid']}] {mod_info_pretty}\"",
            "lineNumber": 2480
          },
          {
            "text": "            )",
            "lineNumber": 2481
          },
          {
            "lineNumber": 2482
          },
          {
            "text": "    def mod_double_clicked(self, item: CustomListWidgetItem) -&gt; None:",
            "lineNumber": 2483
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2484
          },
          {
            "text": "        Method to handle double clicking on a row.",
            "lineNumber": 2485
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2486
          },
          {
            "text": "        # widget = ModListItemInner = self.itemWidget(item)",
            "lineNumber": 2487
          },
          {
            "text": "        self.key_press_signal.emit(\"DoubleClick\")",
            "lineNumber": 2488
          },
          {
            "lineNumber": 2489
          },
          {
            "text": "    def rebuild_item_widget_from_uuid(self, uuid: str) -&gt; None:",
            "lineNumber": 2490
          },
          {
            "text": "        item_index = self.uuids.index(uuid)",
            "lineNumber": 2491
          }
        ]
      },
      "score": 0.39190763235092163
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\utils\\metadata.py",
        "range": {
          "startPosition": {
            "line": 2240
          },
          "endPosition": {
            "line": 2379
          }
        },
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 2241,
                "column": 1
              },
              "endPosition": {
                "line": 2244,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "def get_mods_from_list(",
            "lineNumber": 2241,
            "isSignature": true
          },
          {
            "text": "    mod_list: Union[str, list[str]],",
            "lineNumber": 2242,
            "isSignature": true
          },
          {
            "text": ") -&gt; tuple[list[str], list[str], dict[str, Any], list[str]]:",
            "lineNumber": 2243,
            "isSignature": true
          },
          {
            "lineNumber": 2271
          },
          {
            "text": "    # Calculate mod lists",
            "lineNumber": 2272
          },
          {
            "text": "    if isinstance(mod_list, str):",
            "lineNumber": 2273
          },
          {
            "text": "        # Handle the mod list not existing",
            "lineNumber": 2274
          },
          {
            "text": "        if not os.path.exists(mod_list):",
            "lineNumber": 2275
          },
          {
            "text": "            logger.debug(f\"Could not find mods list at: {mod_list}\")",
            "lineNumber": 2276
          },
          {
            "text": "            logger.debug(\"Creating an empty list with available expansions...\")",
            "lineNumber": 2277
          },
          {
            "text": "            metadata_manager = MetadataManager.instance()",
            "lineNumber": 2278
          },
          {
            "text": "            game_version = metadata_manager.game_version",
            "lineNumber": 2279
          },
          {
            "text": "            generated_xml = generate_rimworld_mods_list(",
            "lineNumber": 2280
          },
          {
            "text": "                game_version, [\"Ludeon.RimWorld\"]",
            "lineNumber": 2281
          },
          {
            "text": "            )",
            "lineNumber": 2282
          },
          {
            "text": "            logger.debug(f\"Saving new mods list to: {mod_list}\")",
            "lineNumber": 2283
          },
          {
            "text": "            json_to_xml_write(generated_xml, mod_list)",
            "lineNumber": 2284
          },
          {
            "text": "        # Parse the ModsConfig.xml activeMods list",
            "lineNumber": 2285
          },
          {
            "text": "        logger.info(f\"Retrieving active mods from RimWorld mod list: {mod_list}\")",
            "lineNumber": 2286
          },
          {
            "text": "        mod_data = xml_path_to_json(mod_list)",
            "lineNumber": 2287
          },
          {
            "text": "        package_ids_to_import = validate_rimworld_mods_list(mod_data)",
            "lineNumber": 2288
          },
          {
            "text": "    elif isinstance(mod_list, list):",
            "lineNumber": 2289
          },
          {
            "text": "        logger.info(\"Retrieving active mods from the provided list of package ids\")",
            "lineNumber": 2290
          },
          {
            "text": "        package_ids_to_import = mod_list",
            "lineNumber": 2291
          },
          {
            "text": "    # Parse the ModsConfig.xml data",
            "lineNumber": 2292
          },
          {
            "text": "    logger.info(\"Generating active mod list\")",
            "lineNumber": 2293
          },
          {
            "text": "    for (",
            "lineNumber": 2294
          },
          {
            "text": "        package_id",
            "lineNumber": 2295
          },
          {
            "text": "    ) in package_ids_to_import:",
            "lineNumber": 2296
          }
        ]
      },
      "score": 0.38639751076698303
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Checking the directory structure:


---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_command_v2">
<details><summary>Tool use: **run_terminal_command_v2** • Run command: cd d:\DEV_Rimsort\RimSort && dir /B</summary>

```bash
cd d:\DEV_Rimsort\RimSort && dir /B
```

```
Cursor Sandbox is unsupported

```
</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\app\views\mods_panel.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\DEV_Rimsort\RimSort\app\views\mods_panel.py</summary>

</details>
</tool-use>

---



---


## RimSort Codebase Exploration Summary

### 1. Project Structure

**Top-level directories:**
- `app/` - Main application code
  - `views/` - UI components (Qt widgets)
  - `controllers/` - MVC controllers
  - `models/` - Data models
  - `utils/` - Utility functions
  - `sort/` - Sorting algorithms
  - `windows/` - Window dialogs/panels
  - `cli/` - Command-line interface
- `themes/` - QSS stylesheets (Modern, RimPy, Wood, Nature, SunSet)
- `tests/` - Test suite
- `docs/` - Documentation

**Key configuration files:**
- `pyproject.toml` - Project dependencies and configuration
- `README.md` - Project documentation

### 2. UI Framework

**Framework:** PySide6 (Qt 6)

**Evidence:**
- `pyproject.toml` lists `pyside6==6.10.1`
- Imports: `from PySide6.QtWidgets import QListWidget, QListWidgetItem, QWidget`
- Uses Qt widgets: `QListWidget`, `QWidget`, `QVBoxLayout`, `QHBoxLayout`, `QSplitter`, etc.

### 3. Active Mod List Implementation

**Main files:**

**`d:\DEV_Rimsort\RimSort\app\views\mods_panel.py`** (4802 lines)
- `ModListWidget` (line 783) - Custom `QListWidget` subclass for active/inactive mod lists
- `ModsPanel` (line 3130) - Container widget managing both active and inactive lists
- `ModListItemInner` (line 102) - Custom `QWidget` for individual mod items

**Key classes and methods:**

**`ModListWidget` class:**
- `__init__()` (line 814) - Initializes list widget with drag-drop, selection, signals
- `recreate_mod_list()` (line 2920) - Rebuilds the entire mod list from UUIDs
- `append_new_item()` (line 2183) - Adds a single mod item
- `insertItem()` (line 3111) - Inserts item at specific index
- `addItem()` (line 2202) - Adds item to end of list
- `create_widget_for_item()` (line 2268) - Lazy-loads `ModListItemInner` widget
- `check_widgets_visible()` (line 2309) - Lazy loading optimization
- `dropEvent()` (line 920) - Handles drag-and-drop between lists
- `uuids` (line 874) - List tracking mod UUIDs in order

**`ModsPanel` class:**
- `active_mods_list` (line 3313) - Instance of `ModListWidget` for active mods
- `inactive_mods_list` (line 3333) - Instance of `ModListWidget` for inactive mods
- Uses `QSplitter` (line 3227) to separate active/inactive lists

**Data flow:**
1. `MainContent._insert_data_into_lists()` (`app/views/main_content_panel.py:527`) - Entry point
2. Calls `metadata.get_mods_from_list()` (`app/utils/metadata.py:2241`) - Parses ModsConfig.xml
3. Calls `ModListWidget.recreate_mod_list()` - Rebuilds list from UUIDs
4. Items created as `CustomListWidgetItem` with `CustomListWidgetItemMetadata`
5. Widgets (`ModListItemInner`) are lazy-loaded when visible

### 4. Mod Representation

**Data model hierarchy:**

**`CustomListWidgetItem`** (`app/utils/custom_list_widget_item.py:8`)
- Custom `QListWidgetItem` subclass
- Stores metadata via `setData(Qt.ItemDataRole.UserRole, data)`
- Emits `itemChanged` signal when data changes

**`CustomListWidgetItemMetadata`** (`app/utils/custom_list_widget_item_metadata.py:17`)
- Metadata class stored in item's `UserRole`
- Attributes:
  - `uuid` - Unique identifier
  - `errors_warnings`, `errors`, `warnings` - Status strings
  - `warning_toggled` - Boolean flag
  - `filtered`, `hidden_by_filter` - Filter states
  - `invalid`, `mismatch`, `alternative` - Mod status flags
  - `mod_color` - `QColor` for custom coloring
  - `user_notes` - User annotations
  - `list_type` - "Active" or "Inactive"

**`ModListItemInner`** (`app/views/mods_panel.py:102`)
- Custom `QWidget` displayed inside each list item
- Visual representation with icons, labels, tooltips
- Handles hover/selection states
- Signals: `toggle_warning_signal`, `toggle_error_signal`

**Metadata source:**
- `MetadataManager.instance().internal_local_metadata[uuid]` - Central metadata dict
- Contains mod info: name, author, packageid, path, dependencies, etc.

### 5. Separator/Divider/Category Functionality

**Current state:** No separator/divider/category functionality found

**Findings:**
- No separator items in `ModListWidget`
- No category grouping in mod lists
- Only separator found: `context_menu.addSeparator()` (line 1600) - Menu separators, not list items
- Lists are flat sequences of mod items

**Insertion methods available:**
- `addItem(item)` - Append to end
- `insertItem(index, item)` - Insert at specific inde

---

